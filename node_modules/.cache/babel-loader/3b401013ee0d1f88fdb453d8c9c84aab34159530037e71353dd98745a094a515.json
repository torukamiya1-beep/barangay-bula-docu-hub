{"ast":null,"code":"import DocumentViewer from './DocumentViewer.vue';\nexport default {\n  name: 'DocumentReviewModal',\n  components: {\n    DocumentViewer\n  },\n  props: {\n    client: {\n      type: Object,\n      required: true\n    },\n    documents: {\n      type: Array,\n      required: true\n    }\n  },\n  data() {\n    return {\n      showDocumentViewer: false,\n      selectedDocument: null,\n      showRejectModal: false,\n      rejectionReason: '',\n      rejectionError: null\n    };\n  },\n  methods: {\n    handleOverlayClick() {\n      this.$emit('close');\n    },\n    getFullName(client) {\n      const parts = [client.first_name, client.middle_name, client.last_name].filter(Boolean);\n      return parts.join(' ') || client.username;\n    },\n    getAddress(client) {\n      const parts = [client.barangay, client.city_municipality, client.province].filter(Boolean);\n      return parts.join(', ') || 'Not provided';\n    },\n    formatDate(dateString) {\n      return new Date(dateString).toLocaleDateString('en-US', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    },\n    formatDocumentType(type) {\n      const typeMap = {\n        'utility_bill': 'Utility Bill',\n        'barangay_certificate': 'Barangay Certificate',\n        'valid_id': 'Valid ID',\n        'lease_contract': 'Lease Contract',\n        'other': 'Other Document'\n      };\n      return typeMap[type] || type;\n    },\n    getDocumentIcon(type) {\n      const iconMap = {\n        'utility_bill': 'fas fa-file-invoice text-warning',\n        'barangay_certificate': 'fas fa-certificate text-success',\n        'valid_id': 'fas fa-id-card text-info',\n        'lease_contract': 'fas fa-file-contract text-primary',\n        'other': 'fas fa-file text-secondary'\n      };\n      return iconMap[type] || 'fas fa-file text-secondary';\n    },\n    formatFileSize(bytes) {\n      if (!bytes) return 'Unknown size';\n      const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n      const i = Math.floor(Math.log(bytes) / Math.log(1024));\n      return Math.round(bytes / Math.pow(1024, i) * 100) / 100 + ' ' + sizes[i];\n    },\n    viewDocument(document) {\n      this.selectedDocument = document;\n      this.showDocumentViewer = true;\n    },\n    closeDocumentViewer() {\n      this.showDocumentViewer = false;\n      this.selectedDocument = null;\n    },\n    handleApprove() {\n      if (confirm('Are you sure you want to approve this residency verification? This will activate the client account.')) {\n        this.$emit('approve', this.client.account_id);\n      }\n    },\n    handleReject() {\n      this.rejectionError = null;\n      if (this.rejectionReason.length < 10) {\n        this.rejectionError = 'Rejection reason must be at least 10 characters long';\n        return;\n      }\n      if (confirm('Are you sure you want to reject this residency verification? The client will need to upload new documents.')) {\n        this.$emit('reject', {\n          accountId: this.client.account_id,\n          reason: this.rejectionReason\n        });\n        this.showRejectModal = false;\n        this.rejectionReason = '';\n      }\n    }\n  }\n};","map":{"version":3,"names":["DocumentViewer","name","components","props","client","type","Object","required","documents","Array","data","showDocumentViewer","selectedDocument","showRejectModal","rejectionReason","rejectionError","methods","handleOverlayClick","$emit","getFullName","parts","first_name","middle_name","last_name","filter","Boolean","join","username","getAddress","barangay","city_municipality","province","formatDate","dateString","Date","toLocaleDateString","year","month","day","hour","minute","formatDocumentType","typeMap","getDocumentIcon","iconMap","formatFileSize","bytes","sizes","i","Math","floor","log","round","pow","viewDocument","document","closeDocumentViewer","handleApprove","confirm","account_id","handleReject","length","accountId","reason"],"sources":["D:\\brgy_docu_hub\\BOSFDR\\src\\components\\admin\\DocumentReviewModal.vue"],"sourcesContent":["<template>\n  <div class=\"modal-overlay\" @click=\"handleOverlayClick\">\n    <div class=\"modal-container\" @click.stop>\n      <div class=\"modal-header\">\n        <h3 class=\"modal-title\">\n          <i class=\"fas fa-file-alt me-2\"></i>\n          Review Residency Documents\n        </h3>\n        <button class=\"btn-close\" @click=\"$emit('close')\" aria-label=\"Close\">\n          <i class=\"fas fa-times\"></i>\n        </button>\n      </div>\n\n      <div class=\"modal-body\">\n        <!-- Client Information -->\n        <div class=\"client-info-card mb-4\">\n          <h5 class=\"card-title\">\n            <i class=\"fas fa-user me-2\"></i>\n            Client Information\n          </h5>\n          <div class=\"row\">\n            <div class=\"col-md-6\">\n              <div class=\"info-item\">\n                <label>Full Name:</label>\n                <span>{{ getFullName(client) }}</span>\n              </div>\n              <div class=\"info-item\">\n                <label>Username:</label>\n                <span>{{ client.username }}</span>\n              </div>\n              <div class=\"info-item\">\n                <label>Email:</label>\n                <span>{{ client.email || 'Not provided' }}</span>\n              </div>\n            </div>\n            <div class=\"col-md-6\">\n              <div class=\"info-item\">\n                <label>Phone:</label>\n                <span>{{ client.phone_number || 'Not provided' }}</span>\n              </div>\n              <div class=\"info-item\">\n                <label>Address:</label>\n                <span>{{ getAddress(client) }}</span>\n              </div>\n              <div class=\"info-item\">\n                <label>Registration Date:</label>\n                <span>{{ formatDate(client.registration_date) }}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- Documents Section -->\n        <div class=\"documents-section\">\n          <h5 class=\"section-title\">\n            <i class=\"fas fa-folder-open me-2\"></i>\n            Uploaded Documents ({{ documents.length }})\n          </h5>\n          \n          <div v-if=\"documents.length === 0\" class=\"no-documents\">\n            <i class=\"fas fa-file-excel fa-3x text-muted mb-3\"></i>\n            <p class=\"text-muted\">No documents uploaded</p>\n          </div>\n\n          <div v-else class=\"documents-grid\">\n            <div \n              v-for=\"document in documents\" \n              :key=\"document.id\" \n              class=\"document-card\"\n              @click=\"viewDocument(document)\"\n            >\n              <div class=\"document-header\">\n                <div class=\"document-icon\">\n                  <i :class=\"getDocumentIcon(document.document_type)\"></i>\n                </div>\n                <div class=\"document-type\">\n                  {{ formatDocumentType(document.document_type) }}\n                </div>\n              </div>\n              \n              <div class=\"document-info\">\n                <div class=\"document-name\">{{ document.document_name }}</div>\n                <div class=\"document-meta\">\n                  <span class=\"file-size\">{{ formatFileSize(document.file_size) }}</span>\n                  <span class=\"upload-date\">{{ formatDate(document.created_at) }}</span>\n                </div>\n              </div>\n\n              <div class=\"document-actions\">\n                <button \n                  class=\"btn btn-sm btn-outline-primary\"\n                  @click.stop=\"viewDocument(document)\"\n                >\n                  <i class=\"fas fa-eye\"></i>\n                  View\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"modal-footer\">\n        <div class=\"action-buttons\">\n          <button \n            class=\"btn btn-success me-2\" \n            @click=\"handleApprove\"\n            :disabled=\"documents.length === 0\"\n          >\n            <i class=\"fas fa-check me-1\"></i>\n            Approve Verification\n          </button>\n          \n          <button \n            class=\"btn btn-danger me-2\" \n            @click=\"showRejectModal = true\"\n            :disabled=\"documents.length === 0\"\n          >\n            <i class=\"fas fa-times me-1\"></i>\n            Reject Verification\n          </button>\n          \n          <button class=\"btn btn-secondary\" @click=\"$emit('close')\">\n            <i class=\"fas fa-arrow-left me-1\"></i>\n            Back to List\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- Document Viewer Modal -->\n    <DocumentViewer\n      v-if=\"showDocumentViewer\"\n      :document=\"selectedDocument\"\n      @close=\"closeDocumentViewer\"\n    />\n\n    <!-- Rejection Reason Modal -->\n    <div v-if=\"showRejectModal\" class=\"modal-overlay\" @click=\"showRejectModal = false\">\n      <div class=\"modal-container small\" @click.stop>\n        <div class=\"modal-header\">\n          <h4 class=\"modal-title\">Reject Verification</h4>\n          <button class=\"btn-close\" @click=\"showRejectModal = false\">\n            <i class=\"fas fa-times\"></i>\n          </button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"form-group\">\n            <label for=\"rejectionReason\">Reason for Rejection:</label>\n            <textarea\n              id=\"rejectionReason\"\n              v-model=\"rejectionReason\"\n              class=\"form-control\"\n              rows=\"4\"\n              placeholder=\"Please provide a detailed reason for rejecting this verification...\"\n              :class=\"{ 'is-invalid': rejectionError }\"\n            ></textarea>\n            <div v-if=\"rejectionError\" class=\"invalid-feedback\">\n              {{ rejectionError }}\n            </div>\n            <small class=\"form-text text-muted\">\n              Minimum 10 characters required. This will be sent to the client.\n            </small>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button class=\"btn btn-danger\" @click=\"handleReject\" :disabled=\"rejectionReason.length < 10\">\n            <i class=\"fas fa-times me-1\"></i>\n            Confirm Rejection\n          </button>\n          <button class=\"btn btn-secondary\" @click=\"showRejectModal = false\">\n            Cancel\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport DocumentViewer from './DocumentViewer.vue';\n\nexport default {\n  name: 'DocumentReviewModal',\n  components: {\n    DocumentViewer\n  },\n  props: {\n    client: {\n      type: Object,\n      required: true\n    },\n    documents: {\n      type: Array,\n      required: true\n    }\n  },\n  data() {\n    return {\n      showDocumentViewer: false,\n      selectedDocument: null,\n      showRejectModal: false,\n      rejectionReason: '',\n      rejectionError: null\n    };\n  },\n  methods: {\n    handleOverlayClick() {\n      this.$emit('close');\n    },\n\n    getFullName(client) {\n      const parts = [client.first_name, client.middle_name, client.last_name].filter(Boolean);\n      return parts.join(' ') || client.username;\n    },\n\n    getAddress(client) {\n      const parts = [client.barangay, client.city_municipality, client.province].filter(Boolean);\n      return parts.join(', ') || 'Not provided';\n    },\n\n    formatDate(dateString) {\n      return new Date(dateString).toLocaleDateString('en-US', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    },\n\n    formatDocumentType(type) {\n      const typeMap = {\n        'utility_bill': 'Utility Bill',\n        'barangay_certificate': 'Barangay Certificate',\n        'valid_id': 'Valid ID',\n        'lease_contract': 'Lease Contract',\n        'other': 'Other Document'\n      };\n      return typeMap[type] || type;\n    },\n\n    getDocumentIcon(type) {\n      const iconMap = {\n        'utility_bill': 'fas fa-file-invoice text-warning',\n        'barangay_certificate': 'fas fa-certificate text-success',\n        'valid_id': 'fas fa-id-card text-info',\n        'lease_contract': 'fas fa-file-contract text-primary',\n        'other': 'fas fa-file text-secondary'\n      };\n      return iconMap[type] || 'fas fa-file text-secondary';\n    },\n\n    formatFileSize(bytes) {\n      if (!bytes) return 'Unknown size';\n      const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n      const i = Math.floor(Math.log(bytes) / Math.log(1024));\n      return Math.round(bytes / Math.pow(1024, i) * 100) / 100 + ' ' + sizes[i];\n    },\n\n    viewDocument(document) {\n      this.selectedDocument = document;\n      this.showDocumentViewer = true;\n    },\n\n    closeDocumentViewer() {\n      this.showDocumentViewer = false;\n      this.selectedDocument = null;\n    },\n\n    handleApprove() {\n      if (confirm('Are you sure you want to approve this residency verification? This will activate the client account.')) {\n        this.$emit('approve', this.client.account_id);\n      }\n    },\n\n    handleReject() {\n      this.rejectionError = null;\n      \n      if (this.rejectionReason.length < 10) {\n        this.rejectionError = 'Rejection reason must be at least 10 characters long';\n        return;\n      }\n\n      if (confirm('Are you sure you want to reject this residency verification? The client will need to upload new documents.')) {\n        this.$emit('reject', {\n          accountId: this.client.account_id,\n          reason: this.rejectionReason\n        });\n        this.showRejectModal = false;\n        this.rejectionReason = '';\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1050;\n}\n\n.modal-container {\n  background: white;\n  border-radius: 8px;\n  width: 90%;\n  max-width: 1000px;\n  max-height: 90vh;\n  overflow-y: auto;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);\n}\n\n.modal-container.small {\n  max-width: 500px;\n}\n\n.modal-header {\n  padding: 1.5rem;\n  border-bottom: 1px solid #dee2e6;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.modal-title {\n  margin: 0;\n  color: #495057;\n}\n\n.btn-close {\n  background: none;\n  border: none;\n  font-size: 1.2rem;\n  color: #6c757d;\n  cursor: pointer;\n  padding: 0.5rem;\n  border-radius: 4px;\n}\n\n.btn-close:hover {\n  background-color: #f8f9fa;\n  color: #495057;\n}\n\n.modal-body {\n  padding: 1.5rem;\n}\n\n.client-info-card {\n  background: #f8f9fa;\n  padding: 1.5rem;\n  border-radius: 8px;\n  border: 1px solid #dee2e6;\n}\n\n.card-title {\n  color: #495057;\n  margin-bottom: 1rem;\n}\n\n.info-item {\n  margin-bottom: 0.75rem;\n}\n\n.info-item label {\n  font-weight: 600;\n  color: #6c757d;\n  margin-right: 0.5rem;\n  min-width: 120px;\n  display: inline-block;\n}\n\n.section-title {\n  color: #495057;\n  margin-bottom: 1rem;\n  padding-bottom: 0.5rem;\n  border-bottom: 2px solid #e9ecef;\n}\n\n.documents-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  gap: 1rem;\n}\n\n.document-card {\n  border: 1px solid #dee2e6;\n  border-radius: 8px;\n  padding: 1rem;\n  background: white;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.document-card:hover {\n  border-color: #007bff;\n  box-shadow: 0 2px 8px rgba(0, 123, 255, 0.15);\n}\n\n.document-header {\n  display: flex;\n  align-items: center;\n  margin-bottom: 0.75rem;\n}\n\n.document-icon {\n  font-size: 1.5rem;\n  margin-right: 0.75rem;\n}\n\n.document-type {\n  font-weight: 600;\n  color: #495057;\n}\n\n.document-name {\n  font-size: 0.9rem;\n  color: #6c757d;\n  margin-bottom: 0.5rem;\n  word-break: break-word;\n}\n\n.document-meta {\n  display: flex;\n  justify-content: space-between;\n  font-size: 0.8rem;\n  color: #868e96;\n}\n\n.document-actions {\n  margin-top: 0.75rem;\n  text-align: right;\n}\n\n.no-documents {\n  text-align: center;\n  padding: 3rem;\n}\n\n.modal-footer {\n  padding: 1.5rem;\n  border-top: 1px solid #dee2e6;\n  background: #f8f9fa;\n}\n\n.action-buttons {\n  display: flex;\n  justify-content: flex-end;\n  gap: 0.5rem;\n}\n\n@media (max-width: 768px) {\n  .modal-container {\n    width: 95%;\n    margin: 1rem;\n  }\n  \n  .documents-grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .action-buttons {\n    flex-direction: column;\n  }\n  \n  .action-buttons .btn {\n    margin-bottom: 0.5rem;\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}