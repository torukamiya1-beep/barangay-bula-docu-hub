{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport documentRequestService from '@/services/documentRequestService';\nimport notificationService from '@/services/notificationService';\nimport paymentService from '@/services/paymentService';\nimport unifiedAuthService from '@/services/unifiedAuthService';\nexport default {\n  name: 'MyRequests',\n  data() {\n    return {\n      requests: [],\n      loading: true,\n      error: null,\n      // Filters\n      searchQuery: '',\n      statusFilter: '',\n      typeFilter: '',\n      sortBy: 'created_at_desc',\n      // Pagination\n      currentPage: 1,\n      itemsPerPage: 10,\n      // Search debounce\n      searchTimeout: null\n    };\n  },\n  computed: {\n    filteredRequests() {\n      // Ensure requests is always an array\n      if (!Array.isArray(this.requests)) {\n        return [];\n      }\n      let filtered = [...this.requests];\n\n      // Apply search filter\n      if (this.searchQuery) {\n        const query = this.searchQuery.toLowerCase();\n        filtered = filtered.filter(request => request.document_type.toLowerCase().includes(query) || request.purpose_category?.toLowerCase().includes(query) || request.id.toString().includes(query));\n      }\n\n      // Apply status filter\n      if (this.statusFilter) {\n        filtered = filtered.filter(request => request.status === this.statusFilter);\n      }\n\n      // Apply type filter\n      if (this.typeFilter) {\n        filtered = filtered.filter(request => request.document_type === this.typeFilter);\n      }\n\n      // Apply sorting\n      filtered.sort((a, b) => {\n        switch (this.sortBy) {\n          case 'created_at_desc':\n            return new Date(b.created_at) - new Date(a.created_at);\n          case 'created_at_asc':\n            return new Date(a.created_at) - new Date(b.created_at);\n          case 'status':\n            return a.status.localeCompare(b.status);\n          case 'type':\n            return a.document_type.localeCompare(b.document_type);\n          default:\n            return 0;\n        }\n      });\n      return filtered;\n    },\n    paginatedRequests() {\n      const start = (this.currentPage - 1) * this.itemsPerPage;\n      const end = start + this.itemsPerPage;\n      return this.filteredRequests.slice(start, end);\n    },\n    totalPages() {\n      return Math.ceil(this.filteredRequests.length / this.itemsPerPage);\n    },\n    visiblePages() {\n      const pages = [];\n      const start = Math.max(1, this.currentPage - 2);\n      const end = Math.min(this.totalPages, this.currentPage + 2);\n      for (let i = start; i <= end; i++) {\n        pages.push(i);\n      }\n      return pages;\n    },\n    totalRequests() {\n      return this.requests.length;\n    },\n    pendingCount() {\n      return this.requests.filter(r => ['pending', 'under_review'].includes(r.status)).length;\n    },\n    completedCount() {\n      return this.requests.filter(r => r.status === 'completed').length;\n    },\n    totalSpent() {\n      return this.requests.filter(r => r.status === 'completed').reduce((sum, r) => sum + parseFloat(r.total_fee || 0), 0);\n    }\n  },\n  async mounted() {\n    await this.loadRequests();\n    await this.initializeRealTimeFeatures();\n  },\n  beforeUnmount() {\n    this.cleanupRealTimeFeatures();\n  },\n  methods: {\n    async loadRequests() {\n      try {\n        this.loading = true;\n        this.error = null;\n        const response = await documentRequestService.getMyRequests();\n\n        // Handle the nested response structure: response.data.requests\n        if (response && response.data && response.data.requests && Array.isArray(response.data.requests)) {\n          this.requests = response.data.requests;\n        } else if (response && response.data && Array.isArray(response.data)) {\n          this.requests = response.data;\n        } else if (response && Array.isArray(response)) {\n          this.requests = response;\n        } else {\n          this.requests = [];\n          console.warn('API response does not contain array data:', response);\n        }\n      } catch (error) {\n        console.error('Error loading requests:', error);\n        this.error = error.response?.data?.message || 'Failed to load requests';\n        this.requests = []; // Ensure requests is always an array even on error\n      } finally {\n        this.loading = false;\n      }\n    },\n    handleSearch() {\n      // Debounce search\n      if (this.searchTimeout) {\n        clearTimeout(this.searchTimeout);\n      }\n      this.searchTimeout = setTimeout(() => {\n        this.currentPage = 1; // Reset to first page when searching\n      }, 300);\n    },\n    applyFilters() {\n      this.currentPage = 1; // Reset to first page when filtering\n    },\n    changePage(page) {\n      if (page >= 1 && page <= this.totalPages) {\n        this.currentPage = page;\n      }\n    },\n    handleItemsPerPageChange() {\n      this.currentPage = 1; // Reset to first page when changing items per page\n    },\n    getShowingStart() {\n      if (this.filteredRequests.length === 0) return 0;\n      return (this.currentPage - 1) * this.itemsPerPage + 1;\n    },\n    getShowingEnd() {\n      const end = this.currentPage * this.itemsPerPage;\n      return Math.min(end, this.filteredRequests.length);\n    },\n    getDocumentIcon(type) {\n      const icons = {\n        'Barangay Clearance': 'fas fa-certificate',\n        'Cedula': 'fas fa-id-card'\n      };\n      return icons[type] || 'fas fa-file-alt';\n    },\n    getStatusClass(status) {\n      const classes = {\n        'pending': 'status-pending',\n        'under_review': 'status-review',\n        'additional_info_required': 'status-info-required',\n        'approved': 'status-approved',\n        'payment_pending': 'status-payment-pending',\n        'payment_confirmed': 'status-payment-confirmed',\n        'payment_failed': 'status-payment-failed',\n        'processing': 'status-processing',\n        'ready_for_pickup': 'status-ready',\n        'pickup_scheduled': 'status-pickup-scheduled',\n        'completed': 'status-completed',\n        'rejected': 'status-rejected',\n        'cancelled': 'status-cancelled'\n      };\n      return classes[status] || 'status-unknown';\n    },\n    formatStatus(status) {\n      const statusMap = {\n        'pending': 'Pending',\n        'under_review': 'Under Review',\n        'additional_info_required': 'Additional Info Required',\n        'approved': 'Approved',\n        'payment_pending': 'Payment Pending',\n        'payment_confirmed': 'Payment Confirmed',\n        'payment_failed': 'Payment Failed',\n        'processing': 'Processing',\n        'ready_for_pickup': 'Ready for Pickup',\n        'pickup_scheduled': 'Pickup Scheduled',\n        'completed': 'Completed',\n        'rejected': 'Rejected',\n        'cancelled': 'Cancelled'\n      };\n      return statusMap[status] || status;\n    },\n    getProgressPercentage(status) {\n      const percentages = {\n        'pending': 10,\n        'under_review': 25,\n        'additional_info_required': 20,\n        'approved': 40,\n        'payment_pending': 45,\n        'payment_confirmed': 50,\n        'payment_failed': 45,\n        'processing': 75,\n        'ready_for_pickup': 90,\n        'pickup_scheduled': 95,\n        'completed': 100,\n        'rejected': 0,\n        'cancelled': 0\n      };\n      return percentages[status] || 0;\n    },\n    getProgressText(status) {\n      const texts = {\n        'pending': 'Waiting for review',\n        'under_review': 'Being reviewed',\n        'additional_info_required': 'Additional information required',\n        'approved': 'Approved, awaiting payment',\n        'payment_pending': 'Payment required',\n        'payment_confirmed': 'Payment confirmed, processing document',\n        'payment_failed': 'Payment failed, please retry',\n        'processing': 'Document being prepared',\n        'ready_for_pickup': 'Ready for pickup',\n        'pickup_scheduled': 'Pickup scheduled',\n        'completed': 'Request completed',\n        'rejected': 'Request rejected',\n        'cancelled': 'Request cancelled'\n      };\n      return texts[status] || 'Unknown status';\n    },\n    canCancelRequest(status) {\n      // Enhanced cancellation rules - allow cancellation until payment is confirmed\n      const cancellableStatuses = ['pending', 'under_review', 'additional_info_required', 'approved', 'payment_pending', 'payment_failed'];\n      return cancellableStatuses.includes(status);\n    },\n    needsPayment(request) {\n      // Check if request needs payment based on enhanced workflow\n      const paymentRequiredStatuses = ['approved', 'payment_pending', 'payment_failed'];\n      const unpaidStatuses = ['pending', 'failed', null, undefined, ''];\n      const needsPayment = paymentRequiredStatuses.includes(request.status) && unpaidStatuses.includes(request.payment_status) && request.payment_method_id &&\n      // Must have a payment method selected\n      request.is_online_payment; // Only show for online payment methods\n\n      return needsPayment;\n    },\n    formatDate(dateString) {\n      if (!dateString) return 'N/A';\n      return new Date(dateString).toLocaleDateString('en-US', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric'\n      });\n    },\n    formatCurrency(amount) {\n      return parseFloat(amount || 0).toFixed(2);\n    },\n    viewRequestDetails(requestId) {\n      this.$router.push({\n        name: 'RequestDetails',\n        params: {\n          id: requestId\n        }\n      });\n    },\n    async cancelRequest(requestId) {\n      // Enhanced cancellation with reason input\n      const reason = prompt('Please provide a reason for cancelling this request (optional):', '');\n\n      // If user clicked cancel on the prompt, don't proceed\n      if (reason === null) return;\n\n      // Confirm cancellation\n      if (!confirm('Are you sure you want to cancel this request?')) return;\n      try {\n        // Find the request to get its current status for debugging\n        const currentRequest = this.requests.find(r => r.id === requestId);\n        console.log('üö´ Cancelling request:', {\n          requestId,\n          reason,\n          currentStatus: currentRequest?.status,\n          currentRequest: currentRequest\n        });\n        const cancellationReason = reason.trim() || 'Cancelled by user';\n        await documentRequestService.cancelRequest(requestId, cancellationReason);\n        this.$toast?.success('Request cancelled successfully. Administrators have been notified.');\n        await this.loadRequests(); // Reload requests\n\n        console.log('‚úÖ Request cancelled successfully');\n      } catch (error) {\n        console.error('‚ùå Error cancelling request:', error);\n        console.error('‚ùå Error details:', {\n          status: error.response?.status,\n          statusText: error.response?.statusText,\n          data: error.response?.data,\n          message: error.message\n        });\n\n        // Show more specific error messages\n        if (error.response?.data?.message) {\n          this.$toast?.error(error.response.data.message);\n        } else if (error.message?.includes('cannot be cancelled')) {\n          this.$toast?.error('This request cannot be cancelled at its current stage');\n        } else {\n          this.$toast?.error('Failed to cancel request. Please try again.');\n        }\n      }\n    },\n    async processPayment(requestId) {\n      try {\n        // Find the request to get payment details\n        const request = this.requests.find(r => r.id === requestId);\n        if (!request) {\n          this.showToast('Error', 'Request not found', 'error');\n          console.error('Request not found:', requestId);\n          return;\n        }\n        console.log('Processing payment for request:', request);\n\n        // Check if request has a payment method selected\n        if (!request.payment_method_id) {\n          this.showToast('Error', 'No payment method selected for this request. Please contact support.', 'error');\n          console.error('No payment method ID for request:', request);\n          return;\n        }\n\n        // Check if it's an online payment method\n        if (!request.is_online_payment) {\n          this.showToast('Info', 'This request uses in-person payment. Please pay at the barangay office.', 'info');\n          return;\n        }\n\n        // Show loading state\n        this.showToast('Info', 'Initiating payment...', 'info');\n\n        // Get current user data from unifiedAuthService\n        const currentUser = unifiedAuthService.getCurrentUser();\n        console.log('Current user:', currentUser);\n\n        // Prepare payment data\n        const paymentData = {\n          request_id: requestId,\n          payment_method_id: request.payment_method_id,\n          customer_email: currentUser?.email || request.email\n        };\n        console.log('Payment data:', paymentData);\n\n        // Initiate payment through PayMongo\n        const response = await paymentService.initiatePayment(paymentData);\n        console.log('Payment response:', response);\n        if (response && response.success && response.data && response.data.checkout_url) {\n          // Redirect to PayMongo checkout page\n          this.showToast('Success', 'Redirecting to payment page...', 'success');\n          paymentService.redirectToPayMongo(response.data.checkout_url);\n        } else {\n          console.error('Invalid payment response:', response);\n          throw new Error(response?.message || 'Failed to initiate payment - invalid response');\n        }\n      } catch (error) {\n        console.error('Payment initiation error:', error);\n        console.error('Error details:', {\n          message: error.message,\n          response: error.response?.data,\n          status: error.response?.status,\n          config: error.config\n        });\n        let errorMessage = 'Failed to initiate payment';\n        if (error.response?.data?.message) {\n          errorMessage = error.response.data.message;\n        } else if (error.response?.status === 401) {\n          errorMessage = 'Please log in to make a payment';\n        } else if (error.response?.status === 404) {\n          errorMessage = 'Payment service not found. Please contact support.';\n        } else if (error.response?.status >= 500) {\n          errorMessage = 'Payment service is temporarily unavailable. Please try again later.';\n        } else if (error.message) {\n          errorMessage = error.message;\n        }\n        this.showToast('Error', errorMessage, 'error');\n      }\n    },\n    createNewRequest() {\n      this.$router.push({\n        name: 'NewDocumentRequest'\n      });\n    },\n    goBack() {\n      this.$router.push({\n        name: 'ClientDashboard'\n      });\n    },\n    showToast(title, message, type = 'info') {\n      // Log to console for debugging\n      console.log(`[${type.toUpperCase()}] ${title}: ${message}`);\n\n      // Create a simple toast notification\n      const toast = document.createElement('div');\n      toast.className = `toast-notification toast-${type}`;\n      toast.innerHTML = `\n        <div class=\"toast-header\">\n          <strong>${title}</strong>\n          <button type=\"button\" class=\"toast-close\" onclick=\"this.parentElement.parentElement.remove()\">√ó</button>\n        </div>\n        <div class=\"toast-body\">${message}</div>\n      `;\n\n      // Add toast styles if not already added\n      if (!document.getElementById('toast-styles')) {\n        const styles = document.createElement('style');\n        styles.id = 'toast-styles';\n        styles.textContent = `\n          .toast-notification {\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            min-width: 300px;\n            background: white;\n            border-radius: 8px;\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n            z-index: 9999;\n            animation: slideIn 0.3s ease;\n          }\n          .toast-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            padding: 12px 16px 8px;\n            border-bottom: 1px solid #e9ecef;\n          }\n          .toast-body {\n            padding: 8px 16px 12px;\n            color: #6c757d;\n          }\n          .toast-close {\n            background: none;\n            border: none;\n            font-size: 18px;\n            cursor: pointer;\n            color: #6c757d;\n          }\n          .toast-success { border-left: 4px solid #28a745; }\n          .toast-error { border-left: 4px solid #dc3545; }\n          .toast-info { border-left: 4px solid #17a2b8; }\n          .toast-warning { border-left: 4px solid #ffc107; }\n          @keyframes slideIn {\n            from { transform: translateX(100%); opacity: 0; }\n            to { transform: translateX(0); opacity: 1; }\n          }\n        `;\n        document.head.appendChild(styles);\n      }\n\n      // Add toast to page\n      document.body.appendChild(toast);\n\n      // Auto-remove after 5 seconds\n      setTimeout(() => {\n        if (toast.parentElement) {\n          toast.style.animation = 'slideIn 0.3s ease reverse';\n          setTimeout(() => toast.remove(), 300);\n        }\n      }, 5000);\n    },\n    // Real-time features\n    async initializeRealTimeFeatures() {\n      console.log('Initializing real-time features for MyRequests');\n      try {\n        // Initialize notification service for client\n        await notificationService.init('client');\n\n        // Listen for status change notifications\n        notificationService.on('notification', this.handleRealTimeNotification);\n        notificationService.on('status_change', this.handleStatusChange);\n        notificationService.on('request_update', this.handleRequestUpdate);\n      } catch (error) {\n        console.error('Failed to initialize real-time features:', error);\n      }\n    },\n    cleanupRealTimeFeatures() {\n      console.log('Cleaning up real-time features for MyRequests');\n\n      // Remove notification listeners\n      notificationService.off('notification', this.handleRealTimeNotification);\n      notificationService.off('status_change', this.handleStatusChange);\n      notificationService.off('request_update', this.handleRequestUpdate);\n\n      // Cleanup notification service\n      notificationService.cleanup();\n    },\n    handleRealTimeNotification(notification) {\n      console.log('Real-time notification received:', notification);\n\n      // Handle different notification types\n      switch (notification.type) {\n        case 'status_change':\n          this.handleStatusChange(notification);\n          break;\n        case 'request_update':\n          this.handleRequestUpdate(notification);\n          break;\n        default:\n          console.log('Unhandled notification type:', notification.type);\n      }\n    },\n    handleStatusChange(notification) {\n      console.log('Request status changed:', notification);\n\n      // Find and update the request in the list\n      const requestIndex = this.requests.findIndex(req => req.id === notification.data?.request_id);\n      if (requestIndex !== -1) {\n        // Update the request status\n        this.requests[requestIndex].status = notification.data.new_status;\n\n        // Show notification to user\n        this.showStatusChangeNotification(notification);\n\n        // Refresh the full request data to get updated details\n        this.loadRequests();\n      }\n    },\n    handleRequestUpdate(notification) {\n      console.log('Request updated:', notification);\n\n      // Refresh requests to show updates\n      this.loadRequests();\n    },\n    showStatusChangeNotification(notification) {\n      const {\n        data\n      } = notification;\n      const statusMessages = {\n        'approved': '‚úÖ Your request has been approved!',\n        'rejected': '‚ùå Your request has been rejected.',\n        'processing': '‚öôÔ∏è Your document is being processed.',\n        'ready_for_pickup': 'üìã Your document is ready for pickup!',\n        'completed': 'üéâ Your request has been completed!'\n      };\n      const message = statusMessages[data.new_status] || `Status updated to ${data.new_status}`;\n\n      // Show browser notification if permission granted\n      if ('Notification' in window && Notification.permission === 'granted') {\n        new Notification(`Request ${data.request_number}`, {\n          body: message,\n          icon: '/favicon.ico',\n          tag: `request-${data.request_id}`\n        });\n      }\n\n      // You can also show an in-app toast notification here\n      console.log(`üîî ${message}`);\n    }\n  }\n};","map":{"version":3,"names":["documentRequestService","notificationService","paymentService","unifiedAuthService","name","data","requests","loading","error","searchQuery","statusFilter","typeFilter","sortBy","currentPage","itemsPerPage","searchTimeout","computed","filteredRequests","Array","isArray","filtered","query","toLowerCase","filter","request","document_type","includes","purpose_category","id","toString","status","sort","a","b","Date","created_at","localeCompare","paginatedRequests","start","end","slice","totalPages","Math","ceil","length","visiblePages","pages","max","min","i","push","totalRequests","pendingCount","r","completedCount","totalSpent","reduce","sum","parseFloat","total_fee","mounted","loadRequests","initializeRealTimeFeatures","beforeUnmount","cleanupRealTimeFeatures","methods","response","getMyRequests","console","warn","message","handleSearch","clearTimeout","setTimeout","applyFilters","changePage","page","handleItemsPerPageChange","getShowingStart","getShowingEnd","getDocumentIcon","type","icons","getStatusClass","classes","formatStatus","statusMap","getProgressPercentage","percentages","getProgressText","texts","canCancelRequest","cancellableStatuses","needsPayment","paymentRequiredStatuses","unpaidStatuses","undefined","payment_status","payment_method_id","is_online_payment","formatDate","dateString","toLocaleDateString","year","month","day","formatCurrency","amount","toFixed","viewRequestDetails","requestId","$router","params","cancelRequest","reason","prompt","confirm","currentRequest","find","log","currentStatus","cancellationReason","trim","$toast","success","statusText","processPayment","showToast","currentUser","getCurrentUser","paymentData","request_id","customer_email","email","initiatePayment","checkout_url","redirectToPayMongo","Error","config","errorMessage","createNewRequest","goBack","title","toUpperCase","toast","document","createElement","className","innerHTML","getElementById","styles","textContent","head","appendChild","body","parentElement","style","animation","remove","init","on","handleRealTimeNotification","handleStatusChange","handleRequestUpdate","off","cleanup","notification","requestIndex","findIndex","req","new_status","showStatusChangeNotification","statusMessages","window","Notification","permission","request_number","icon","tag"],"sources":["D:\\brgy_docu_hub\\BOSFDR\\src\\components\\client\\MyRequests.vue"],"sourcesContent":["<template>\n  <div class=\"my-requests-page\">\n    <!-- Header -->\n    <div class=\"page-header\">\n      <div class=\"header-content\">\n        <div class=\"header-main\">\n          <h1 class=\"page-title\">\n            <i class=\"fas fa-file-alt\"></i>\n            My Document Requests\n          </h1>\n          <p class=\"page-description\">\n            Track and manage your document requests\n          </p>\n        </div>\n        <div class=\"header-actions\">\n          <!-- Ill comment this for now  -->\n          <!-- <button class=\"new-request-btn\" @click=\"createNewRequest\">\n            <i class=\"fas fa-plus\"></i>\n            New Request\n          </button> -->\n          <button class=\"back-btn\" @click=\"goBack\">\n            <i class=\"fas fa-arrow-left\"></i>\n            Back to Dashboard\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- Page Content -->\n    <div class=\"page-content\">\n      <!-- Filters and Search -->\n    <div class=\"filters-section\">\n      <div class=\"filters-container\">\n        <div class=\"search-box\">\n          <i class=\"fas fa-search\"></i>\n          <input\n            v-model=\"searchQuery\"\n            type=\"text\"\n            placeholder=\"Search requests...\"\n            @input=\"handleSearch\"\n          />\n        </div>\n        \n        <!-- ill comment this for now maybe gonna need this next month -->\n        <!-- <div class=\"filter-group\">\n          <select v-model=\"statusFilter\" @change=\"applyFilters\">\n            <option value=\"\">All Status</option>\n            <option value=\"pending\">Pending</option>\n            <option value=\"under_review\">Under Review</option>\n            <option value=\"approved\">Approved</option>\n            <option value=\"processing\">Processing</option>\n            <option value=\"ready_for_pickup\">Ready for Pickup</option>\n            <option value=\"completed\">Completed</option>\n            <option value=\"rejected\">Rejected</option>\n          </select>\n        </div> -->\n\n        <div class=\"filter-group\">\n          <select v-model=\"typeFilter\" @change=\"applyFilters\">\n            <option value=\"\">All Types</option>\n            <option value=\"Barangay Clearance\">Barangay Clearance</option>\n            <option value=\"Cedula\">Cedula</option>\n          </select>\n        </div>\n\n        <div class=\"filter-group\">\n          <select v-model=\"sortBy\" @change=\"applyFilters\">\n            <option value=\"created_at_desc\">Newest First</option>\n            <option value=\"created_at_asc\">Oldest First</option>\n            <option value=\"status\">By Status</option>\n            <option value=\"type\">By Type</option>\n          </select>\n        </div>\n      </div>\n    </div>\n\n    <!-- Loading State -->\n    <div v-if=\"loading\" class=\"loading-container\">\n      <div class=\"loading-spinner\">\n        <i class=\"fas fa-spinner fa-spin\"></i>\n      </div>\n      <p>Loading your requests...</p>\n    </div>\n\n    <!-- Error State -->\n    <div v-else-if=\"error\" class=\"error-container\">\n      <div class=\"error-content\">\n        <i class=\"fas fa-exclamation-triangle\"></i>\n        <h3>Unable to Load Requests</h3>\n        <p>{{ error }}</p>\n        <button class=\"retry-btn\" @click=\"loadRequests\">\n          <i class=\"fas fa-redo\"></i>\n          Try Again\n        </button>\n      </div>\n    </div>\n\n    <!-- Empty State -->\n    <div v-else-if=\"filteredRequests.length === 0 && !loading\" class=\"empty-state\">\n      <div class=\"empty-content\">\n        <i class=\"fas fa-inbox\"></i>\n        <h3>{{ searchQuery || statusFilter || typeFilter ? 'No Matching Requests' : 'No Requests Yet' }}</h3>\n        <p>\n          {{ searchQuery || statusFilter || typeFilter \n            ? 'Try adjusting your search or filters' \n            : 'Start by creating your first document request' }}\n        </p>\n        <button v-if=\"!searchQuery && !statusFilter && !typeFilter\" class=\"create-first-btn\" @click=\"createNewRequest\">\n          <i class=\"fas fa-plus\"></i>\n          Create Your First Request\n        </button>\n      </div>\n    </div>\n\n    <!-- Requests List -->\n    <div v-else class=\"requests-container\">\n      <!-- Table Controls -->\n      <div class=\"table-controls\">\n        <div class=\"entries-selector\">\n          <label>Show</label>\n          <select v-model=\"itemsPerPage\" @change=\"handleItemsPerPageChange\">\n            <option value=\"10\">10</option>\n            <option value=\"25\">25</option>\n            <option value=\"50\">50</option>\n          </select>\n          <span>entries</span>\n        </div>\n        <div class=\"table-info\">\n          Showing {{ getShowingStart() }} to {{ getShowingEnd() }} of {{ filteredRequests.length }} entries\n        </div>\n      </div>\n\n      <!-- Requests Table -->\n      <div class=\"table-wrapper\">\n        <table class=\"requests-table\">\n          <thead>\n            <tr>\n              <th class=\"col-id\">Request ID</th>\n              <th class=\"col-type\">Document Type</th>\n              <th class=\"col-purpose\">Purpose</th>\n              <th class=\"col-status\">Status</th>\n              <th class=\"col-date\">Submitted</th>\n              <th class=\"col-amount\">Amount</th>\n              <th class=\"col-progress\">Progress</th>\n              <th class=\"col-actions\">Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr \n              v-for=\"request in paginatedRequests\"\n              :key=\"request.id\"\n              class=\"request-row\"\n              @click=\"viewRequestDetails(request.id)\"\n            >\n              <td class=\"col-id\">\n                <span class=\"request-id\">#{{ request.id.toString().padStart(6, '0') }}</span>\n              </td>\n              <td class=\"col-type\">\n                <div class=\"document-type\">\n                  <i :class=\"getDocumentIcon(request.document_type)\"></i>\n                  <span>{{ request.document_type }}</span>\n                </div>\n              </td>\n              <td class=\"col-purpose\">\n                <span>{{ request.purpose_category || 'Not specified' }}</span>\n              </td>\n              <td class=\"col-status\">\n                <div class=\"status-container\">\n                  <span class=\"status-badge\" :class=\"getStatusClass(request.status)\">\n                    {{ formatStatus(request.status) }}\n                  </span>\n                  <!-- Show rejection reason if rejected -->\n                  <div v-if=\"request.status === 'rejected' && request.rejection_reason\" class=\"rejection-reason\">\n                    <i class=\"fas fa-info-circle text-warning\"></i>\n                    <small class=\"text-muted\">{{ request.rejection_reason }}</small>\n                  </div>\n                </div>\n              </td>\n              <td class=\"col-date\">\n                <span>{{ formatDate(request.created_at) }}</span>\n              </td>\n              <td class=\"col-amount\">\n                <span class=\"amount\">‚Ç±{{ formatCurrency(request.total_fee) }}</span>\n              </td>\n              <td class=\"col-progress\">\n                <div class=\"progress-container\">\n                  <div class=\"progress-bar\">\n                    <div \n                      class=\"progress-fill\" \n                      :style=\"{ width: getProgressPercentage(request.status) + '%' }\"\n                    ></div>\n                  </div>\n                  <div class=\"progress-text\">\n                    {{ getProgressText(request.status) }}\n                  </div>\n                </div>\n              </td>\n              <td class=\"col-actions\">\n                <div class=\"action-buttons\">\n                  <button class=\"action-btn view-btn\" @click.stop=\"viewRequestDetails(request.id)\" title=\"View Details\">\n                    <i class=\"fas fa-eye\"></i>\n                  </button>\n                  \n                  <button \n                    v-if=\"canCancelRequest(request.status)\"\n                    class=\"action-btn cancel-btn\"\n                    @click.stop=\"cancelRequest(request.id)\"\n                    title=\"Cancel Request\"\n                  >\n                    <i class=\"fas fa-times\"></i>\n                  </button>\n\n                  <button \n                    v-if=\"needsPayment(request)\"\n                    class=\"action-btn pay-btn\"\n                    @click.stop=\"processPayment(request.id)\"\n                    title=\"Pay Now\"\n                  >\n                    <i class=\"fas fa-credit-card\"></i>\n                  </button>\n                </div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n\n      <!-- Pagination -->\n      <div v-if=\"totalPages > 1\" class=\"pagination\">\n        <button \n          class=\"page-btn\"\n          :disabled=\"currentPage === 1\"\n          @click=\"changePage(currentPage - 1)\"\n        >\n          <i class=\"fas fa-chevron-left\"></i>\n          Previous\n        </button>\n        \n        <div class=\"page-numbers\">\n          <button\n            v-for=\"page in visiblePages\"\n            :key=\"page\"\n            class=\"page-number\"\n            :class=\"{ active: page === currentPage }\"\n            @click=\"changePage(page)\"\n          >\n            {{ page }}\n          </button>\n        </div>\n        \n        <button \n          class=\"page-btn\"\n          :disabled=\"currentPage === totalPages\"\n          @click=\"changePage(currentPage + 1)\"\n        >\n          Next\n          <i class=\"fas fa-chevron-right\"></i>\n        </button>\n      </div>\n    </div>\n\n    <!-- ill comment the stats for now because its not needed -->\n    <!-- Summary Stats -->\n    <!-- <div class=\"summary-stats\">\n      <div class=\"stats-grid\">\n        <div class=\"stat-card\">\n          <div class=\"stat-icon\">\n            <i class=\"fas fa-file-alt\"></i>\n          </div>\n          <div class=\"stat-content\">\n            <h3>{{ totalRequests }}</h3>\n            <p>Total Requests</p>\n          </div>\n        </div>\n        \n        <div class=\"stat-card\">\n          <div class=\"stat-icon pending\">\n            <i class=\"fas fa-clock\"></i>\n          </div>\n          <div class=\"stat-content\">\n            <h3>{{ pendingCount }}</h3>\n            <p>Pending</p>\n          </div>\n        </div>\n        \n        <div class=\"stat-card\">\n          <div class=\"stat-icon completed\">\n            <i class=\"fas fa-check-circle\"></i>\n          </div>\n          <div class=\"stat-content\">\n            <h3>{{ completedCount }}</h3>\n            <p>Completed</p>\n          </div>\n        </div>\n        \n        <div class=\"stat-card\">\n          <div class=\"stat-icon\">\n            <i class=\"fas fa-peso-sign\"></i>\n          </div>\n          <div class=\"stat-content\">\n            <h3>‚Ç±{{ formatCurrency(totalSpent) }}</h3>\n            <p>Total Spent</p>\n          </div>\n        </div>\n      </div>\n    </div> -->\n    </div> <!-- End page-content -->\n\n  </div>\n</template>\n\n<script>\nimport documentRequestService from '@/services/documentRequestService';\nimport notificationService from '@/services/notificationService';\nimport paymentService from '@/services/paymentService';\nimport unifiedAuthService from '@/services/unifiedAuthService';\n\nexport default {\n  name: 'MyRequests',\n  data() {\n    return {\n      requests: [],\n      loading: true,\n      error: null,\n      \n      // Filters\n      searchQuery: '',\n      statusFilter: '',\n      typeFilter: '',\n      sortBy: 'created_at_desc',\n      \n      // Pagination\n      currentPage: 1,\n      itemsPerPage: 10,\n      \n      // Search debounce\n      searchTimeout: null\n    };\n  },\n  computed: {\n    filteredRequests() {\n      // Ensure requests is always an array\n      if (!Array.isArray(this.requests)) {\n        return [];\n      }\n      let filtered = [...this.requests];\n      \n      // Apply search filter\n      if (this.searchQuery) {\n        const query = this.searchQuery.toLowerCase();\n        filtered = filtered.filter(request => \n          request.document_type.toLowerCase().includes(query) ||\n          request.purpose_category?.toLowerCase().includes(query) ||\n          request.id.toString().includes(query)\n        );\n      }\n      \n      // Apply status filter\n      if (this.statusFilter) {\n        filtered = filtered.filter(request => request.status === this.statusFilter);\n      }\n      \n      // Apply type filter\n      if (this.typeFilter) {\n        filtered = filtered.filter(request => request.document_type === this.typeFilter);\n      }\n      \n      // Apply sorting\n      filtered.sort((a, b) => {\n        switch (this.sortBy) {\n          case 'created_at_desc':\n            return new Date(b.created_at) - new Date(a.created_at);\n          case 'created_at_asc':\n            return new Date(a.created_at) - new Date(b.created_at);\n          case 'status':\n            return a.status.localeCompare(b.status);\n          case 'type':\n            return a.document_type.localeCompare(b.document_type);\n          default:\n            return 0;\n        }\n      });\n      \n      return filtered;\n    },\n    \n    paginatedRequests() {\n      const start = (this.currentPage - 1) * this.itemsPerPage;\n      const end = start + this.itemsPerPage;\n      return this.filteredRequests.slice(start, end);\n    },\n    \n    totalPages() {\n      return Math.ceil(this.filteredRequests.length / this.itemsPerPage);\n    },\n    \n    visiblePages() {\n      const pages = [];\n      const start = Math.max(1, this.currentPage - 2);\n      const end = Math.min(this.totalPages, this.currentPage + 2);\n      \n      for (let i = start; i <= end; i++) {\n        pages.push(i);\n      }\n      \n      return pages;\n    },\n    \n    totalRequests() {\n      return this.requests.length;\n    },\n    \n    pendingCount() {\n      return this.requests.filter(r => ['pending', 'under_review'].includes(r.status)).length;\n    },\n    \n    completedCount() {\n      return this.requests.filter(r => r.status === 'completed').length;\n    },\n    \n    totalSpent() {\n      return this.requests\n        .filter(r => r.status === 'completed')\n        .reduce((sum, r) => sum + parseFloat(r.total_fee || 0), 0);\n    }\n  },\n  async mounted() {\n    await this.loadRequests();\n    await this.initializeRealTimeFeatures();\n  },\n\n  beforeUnmount() {\n    this.cleanupRealTimeFeatures();\n  },\n  methods: {\n    async loadRequests() {\n      try {\n        this.loading = true;\n        this.error = null;\n\n        const response = await documentRequestService.getMyRequests();\n\n        // Handle the nested response structure: response.data.requests\n        if (response && response.data && response.data.requests && Array.isArray(response.data.requests)) {\n          this.requests = response.data.requests;\n        } else if (response && response.data && Array.isArray(response.data)) {\n          this.requests = response.data;\n        } else if (response && Array.isArray(response)) {\n          this.requests = response;\n        } else {\n          this.requests = [];\n          console.warn('API response does not contain array data:', response);\n        }\n\n      } catch (error) {\n        console.error('Error loading requests:', error);\n        this.error = error.response?.data?.message || 'Failed to load requests';\n        this.requests = []; // Ensure requests is always an array even on error\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    handleSearch() {\n      // Debounce search\n      if (this.searchTimeout) {\n        clearTimeout(this.searchTimeout);\n      }\n      \n      this.searchTimeout = setTimeout(() => {\n        this.currentPage = 1; // Reset to first page when searching\n      }, 300);\n    },\n\n    applyFilters() {\n      this.currentPage = 1; // Reset to first page when filtering\n    },\n\n    changePage(page) {\n      if (page >= 1 && page <= this.totalPages) {\n        this.currentPage = page;\n      }\n    },\n\n    handleItemsPerPageChange() {\n      this.currentPage = 1; // Reset to first page when changing items per page\n    },\n\n    getShowingStart() {\n      if (this.filteredRequests.length === 0) return 0;\n      return (this.currentPage - 1) * this.itemsPerPage + 1;\n    },\n\n    getShowingEnd() {\n      const end = this.currentPage * this.itemsPerPage;\n      return Math.min(end, this.filteredRequests.length);\n    },\n\n    getDocumentIcon(type) {\n      const icons = {\n        'Barangay Clearance': 'fas fa-certificate',\n        'Cedula': 'fas fa-id-card'\n      };\n      return icons[type] || 'fas fa-file-alt';\n    },\n\n    getStatusClass(status) {\n      const classes = {\n        'pending': 'status-pending',\n        'under_review': 'status-review',\n        'additional_info_required': 'status-info-required',\n        'approved': 'status-approved',\n        'payment_pending': 'status-payment-pending',\n        'payment_confirmed': 'status-payment-confirmed',\n        'payment_failed': 'status-payment-failed',\n        'processing': 'status-processing',\n        'ready_for_pickup': 'status-ready',\n        'pickup_scheduled': 'status-pickup-scheduled',\n        'completed': 'status-completed',\n        'rejected': 'status-rejected',\n        'cancelled': 'status-cancelled'\n      };\n      return classes[status] || 'status-unknown';\n    },\n\n    formatStatus(status) {\n      const statusMap = {\n        'pending': 'Pending',\n        'under_review': 'Under Review',\n        'additional_info_required': 'Additional Info Required',\n        'approved': 'Approved',\n        'payment_pending': 'Payment Pending',\n        'payment_confirmed': 'Payment Confirmed',\n        'payment_failed': 'Payment Failed',\n        'processing': 'Processing',\n        'ready_for_pickup': 'Ready for Pickup',\n        'pickup_scheduled': 'Pickup Scheduled',\n        'completed': 'Completed',\n        'rejected': 'Rejected',\n        'cancelled': 'Cancelled'\n      };\n      return statusMap[status] || status;\n    },\n\n    getProgressPercentage(status) {\n      const percentages = {\n        'pending': 10,\n        'under_review': 25,\n        'additional_info_required': 20,\n        'approved': 40,\n        'payment_pending': 45,\n        'payment_confirmed': 50,\n        'payment_failed': 45,\n        'processing': 75,\n        'ready_for_pickup': 90,\n        'pickup_scheduled': 95,\n        'completed': 100,\n        'rejected': 0,\n        'cancelled': 0\n      };\n      return percentages[status] || 0;\n    },\n\n    getProgressText(status) {\n      const texts = {\n        'pending': 'Waiting for review',\n        'under_review': 'Being reviewed',\n        'additional_info_required': 'Additional information required',\n        'approved': 'Approved, awaiting payment',\n        'payment_pending': 'Payment required',\n        'payment_confirmed': 'Payment confirmed, processing document',\n        'payment_failed': 'Payment failed, please retry',\n        'processing': 'Document being prepared',\n        'ready_for_pickup': 'Ready for pickup',\n        'pickup_scheduled': 'Pickup scheduled',\n        'completed': 'Request completed',\n        'rejected': 'Request rejected',\n        'cancelled': 'Request cancelled'\n      };\n      return texts[status] || 'Unknown status';\n    },\n\n    canCancelRequest(status) {\n      // Enhanced cancellation rules - allow cancellation until payment is confirmed\n      const cancellableStatuses = [\n        'pending',\n        'under_review',\n        'additional_info_required',\n        'approved',\n        'payment_pending',\n        'payment_failed'\n      ];\n      return cancellableStatuses.includes(status);\n    },\n\n    needsPayment(request) {\n      // Check if request needs payment based on enhanced workflow\n      const paymentRequiredStatuses = ['approved', 'payment_pending', 'payment_failed'];\n      const unpaidStatuses = ['pending', 'failed', null, undefined, ''];\n\n      const needsPayment = paymentRequiredStatuses.includes(request.status) &&\n                          unpaidStatuses.includes(request.payment_status) &&\n                          request.payment_method_id && // Must have a payment method selected\n                          request.is_online_payment; // Only show for online payment methods\n\n      return needsPayment;\n    },\n\n    formatDate(dateString) {\n      if (!dateString) return 'N/A';\n      return new Date(dateString).toLocaleDateString('en-US', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric'\n      });\n    },\n\n    formatCurrency(amount) {\n      return parseFloat(amount || 0).toFixed(2);\n    },\n\n    viewRequestDetails(requestId) {\n      this.$router.push({ name: 'RequestDetails', params: { id: requestId } });\n    },\n\n    async cancelRequest(requestId) {\n      // Enhanced cancellation with reason input\n      const reason = prompt(\n        'Please provide a reason for cancelling this request (optional):',\n        ''\n      );\n\n      // If user clicked cancel on the prompt, don't proceed\n      if (reason === null) return;\n\n      // Confirm cancellation\n      if (!confirm('Are you sure you want to cancel this request?')) return;\n\n      try {\n        // Find the request to get its current status for debugging\n        const currentRequest = this.requests.find(r => r.id === requestId);\n        console.log('üö´ Cancelling request:', {\n          requestId,\n          reason,\n          currentStatus: currentRequest?.status,\n          currentRequest: currentRequest\n        });\n\n        const cancellationReason = reason.trim() || 'Cancelled by user';\n        await documentRequestService.cancelRequest(requestId, cancellationReason);\n\n        this.$toast?.success('Request cancelled successfully. Administrators have been notified.');\n        await this.loadRequests(); // Reload requests\n\n        console.log('‚úÖ Request cancelled successfully');\n      } catch (error) {\n        console.error('‚ùå Error cancelling request:', error);\n        console.error('‚ùå Error details:', {\n          status: error.response?.status,\n          statusText: error.response?.statusText,\n          data: error.response?.data,\n          message: error.message\n        });\n\n        // Show more specific error messages\n        if (error.response?.data?.message) {\n          this.$toast?.error(error.response.data.message);\n        } else if (error.message?.includes('cannot be cancelled')) {\n          this.$toast?.error('This request cannot be cancelled at its current stage');\n        } else {\n          this.$toast?.error('Failed to cancel request. Please try again.');\n        }\n      }\n    },\n\n    async processPayment(requestId) {\n      try {\n        // Find the request to get payment details\n        const request = this.requests.find(r => r.id === requestId);\n        if (!request) {\n          this.showToast('Error', 'Request not found', 'error');\n          console.error('Request not found:', requestId);\n          return;\n        }\n\n        console.log('Processing payment for request:', request);\n\n        // Check if request has a payment method selected\n        if (!request.payment_method_id) {\n          this.showToast('Error', 'No payment method selected for this request. Please contact support.', 'error');\n          console.error('No payment method ID for request:', request);\n          return;\n        }\n\n        // Check if it's an online payment method\n        if (!request.is_online_payment) {\n          this.showToast('Info', 'This request uses in-person payment. Please pay at the barangay office.', 'info');\n          return;\n        }\n\n        // Show loading state\n        this.showToast('Info', 'Initiating payment...', 'info');\n\n        // Get current user data from unifiedAuthService\n        const currentUser = unifiedAuthService.getCurrentUser();\n        console.log('Current user:', currentUser);\n\n        // Prepare payment data\n        const paymentData = {\n          request_id: requestId,\n          payment_method_id: request.payment_method_id,\n          customer_email: currentUser?.email || request.email\n        };\n\n        console.log('Payment data:', paymentData);\n\n        // Initiate payment through PayMongo\n        const response = await paymentService.initiatePayment(paymentData);\n\n        console.log('Payment response:', response);\n\n        if (response && response.success && response.data && response.data.checkout_url) {\n          // Redirect to PayMongo checkout page\n          this.showToast('Success', 'Redirecting to payment page...', 'success');\n          paymentService.redirectToPayMongo(response.data.checkout_url);\n        } else {\n          console.error('Invalid payment response:', response);\n          throw new Error(response?.message || 'Failed to initiate payment - invalid response');\n        }\n\n      } catch (error) {\n        console.error('Payment initiation error:', error);\n        console.error('Error details:', {\n          message: error.message,\n          response: error.response?.data,\n          status: error.response?.status,\n          config: error.config\n        });\n\n        let errorMessage = 'Failed to initiate payment';\n\n        if (error.response?.data?.message) {\n          errorMessage = error.response.data.message;\n        } else if (error.response?.status === 401) {\n          errorMessage = 'Please log in to make a payment';\n        } else if (error.response?.status === 404) {\n          errorMessage = 'Payment service not found. Please contact support.';\n        } else if (error.response?.status >= 500) {\n          errorMessage = 'Payment service is temporarily unavailable. Please try again later.';\n        } else if (error.message) {\n          errorMessage = error.message;\n        }\n\n        this.showToast('Error', errorMessage, 'error');\n      }\n    },\n\n    createNewRequest() {\n      this.$router.push({ name: 'NewDocumentRequest' });\n    },\n\n    goBack() {\n      this.$router.push({ name: 'ClientDashboard' });\n    },\n\n    showToast(title, message, type = 'info') {\n      // Log to console for debugging\n      console.log(`[${type.toUpperCase()}] ${title}: ${message}`);\n\n      // Create a simple toast notification\n      const toast = document.createElement('div');\n      toast.className = `toast-notification toast-${type}`;\n      toast.innerHTML = `\n        <div class=\"toast-header\">\n          <strong>${title}</strong>\n          <button type=\"button\" class=\"toast-close\" onclick=\"this.parentElement.parentElement.remove()\">√ó</button>\n        </div>\n        <div class=\"toast-body\">${message}</div>\n      `;\n\n      // Add toast styles if not already added\n      if (!document.getElementById('toast-styles')) {\n        const styles = document.createElement('style');\n        styles.id = 'toast-styles';\n        styles.textContent = `\n          .toast-notification {\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            min-width: 300px;\n            background: white;\n            border-radius: 8px;\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n            z-index: 9999;\n            animation: slideIn 0.3s ease;\n          }\n          .toast-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            padding: 12px 16px 8px;\n            border-bottom: 1px solid #e9ecef;\n          }\n          .toast-body {\n            padding: 8px 16px 12px;\n            color: #6c757d;\n          }\n          .toast-close {\n            background: none;\n            border: none;\n            font-size: 18px;\n            cursor: pointer;\n            color: #6c757d;\n          }\n          .toast-success { border-left: 4px solid #28a745; }\n          .toast-error { border-left: 4px solid #dc3545; }\n          .toast-info { border-left: 4px solid #17a2b8; }\n          .toast-warning { border-left: 4px solid #ffc107; }\n          @keyframes slideIn {\n            from { transform: translateX(100%); opacity: 0; }\n            to { transform: translateX(0); opacity: 1; }\n          }\n        `;\n        document.head.appendChild(styles);\n      }\n\n      // Add toast to page\n      document.body.appendChild(toast);\n\n      // Auto-remove after 5 seconds\n      setTimeout(() => {\n        if (toast.parentElement) {\n          toast.style.animation = 'slideIn 0.3s ease reverse';\n          setTimeout(() => toast.remove(), 300);\n        }\n      }, 5000);\n    },\n\n    // Real-time features\n    async initializeRealTimeFeatures() {\n      console.log('Initializing real-time features for MyRequests');\n\n      try {\n        // Initialize notification service for client\n        await notificationService.init('client');\n\n        // Listen for status change notifications\n        notificationService.on('notification', this.handleRealTimeNotification);\n        notificationService.on('status_change', this.handleStatusChange);\n        notificationService.on('request_update', this.handleRequestUpdate);\n      } catch (error) {\n        console.error('Failed to initialize real-time features:', error);\n      }\n    },\n\n    cleanupRealTimeFeatures() {\n      console.log('Cleaning up real-time features for MyRequests');\n\n      // Remove notification listeners\n      notificationService.off('notification', this.handleRealTimeNotification);\n      notificationService.off('status_change', this.handleStatusChange);\n      notificationService.off('request_update', this.handleRequestUpdate);\n\n      // Cleanup notification service\n      notificationService.cleanup();\n    },\n\n    handleRealTimeNotification(notification) {\n      console.log('Real-time notification received:', notification);\n\n      // Handle different notification types\n      switch (notification.type) {\n        case 'status_change':\n          this.handleStatusChange(notification);\n          break;\n        case 'request_update':\n          this.handleRequestUpdate(notification);\n          break;\n        default:\n          console.log('Unhandled notification type:', notification.type);\n      }\n    },\n\n    handleStatusChange(notification) {\n      console.log('Request status changed:', notification);\n\n      // Find and update the request in the list\n      const requestIndex = this.requests.findIndex(req => req.id === notification.data?.request_id);\n      if (requestIndex !== -1) {\n        // Update the request status\n        this.requests[requestIndex].status = notification.data.new_status;\n\n        // Show notification to user\n        this.showStatusChangeNotification(notification);\n\n        // Refresh the full request data to get updated details\n        this.loadRequests();\n      }\n    },\n\n    handleRequestUpdate(notification) {\n      console.log('Request updated:', notification);\n\n      // Refresh requests to show updates\n      this.loadRequests();\n    },\n\n    showStatusChangeNotification(notification) {\n      const { data } = notification;\n      const statusMessages = {\n        'approved': '‚úÖ Your request has been approved!',\n        'rejected': '‚ùå Your request has been rejected.',\n        'processing': '‚öôÔ∏è Your document is being processed.',\n        'ready_for_pickup': 'üìã Your document is ready for pickup!',\n        'completed': 'üéâ Your request has been completed!'\n      };\n\n      const message = statusMessages[data.new_status] || `Status updated to ${data.new_status}`;\n\n      // Show browser notification if permission granted\n      if ('Notification' in window && Notification.permission === 'granted') {\n        new Notification(`Request ${data.request_number}`, {\n          body: message,\n          icon: '/favicon.ico',\n          tag: `request-${data.request_id}`\n        });\n      }\n\n      // You can also show an in-app toast notification here\n      console.log(`üîî ${message}`);\n    }\n  }\n};\n</script>\n\n<style scoped>\n.my-requests-page {\n  padding: 0;\n  max-width: none;\n  margin: 0;\n  min-height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.page-header {\n  position: sticky;\n  top: 0;\n  z-index: 1000;\n  background: #f7fafc;\n  margin: 0;\n  padding: 2rem 2rem 1rem 2rem;\n  border-bottom: 1px solid #e2e8f0;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  backdrop-filter: blur(10px);\n  -webkit-backdrop-filter: blur(10px);\n  flex-shrink: 0;\n}\n\n.page-content {\n  flex: 1;\n  padding: 0 2rem 2rem 2rem;\n}\n\n.header-content {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  gap: 2rem;\n}\n\n.page-title {\n  font-size: 1.75rem;\n  font-weight: 700;\n  color: #1a365d;\n  margin-bottom: 0.5rem;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n\n.page-title i {\n  color: #3182ce;\n}\n\n.page-description {\n  font-size: 1rem;\n  color: #4a5568;\n  margin: 0;\n}\n\n.header-actions {\n  display: flex;\n  gap: 1rem;\n}\n\n.new-request-btn,\n.back-btn {\n  padding: 0.75rem 1.5rem;\n  border-radius: 0.5rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  border: none;\n}\n\n.new-request-btn {\n  background: #38a169;\n  color: white;\n}\n\n.new-request-btn:hover {\n  background: #2f855a;\n}\n\n.back-btn {\n  background: #e2e8f0;\n  color: #4a5568;\n}\n\n.back-btn:hover {\n  background: #cbd5e0;\n}\n\n.filters-section {\n  background: white;\n  border-radius: 1rem;\n  padding: 1.5rem;\n  margin-bottom: 2rem;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n}\n\n.filters-container {\n  display: grid;\n  grid-template-columns: 2fr 1fr 1fr 1fr;\n  gap: 1rem;\n  align-items: center;\n}\n\n.search-box {\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n\n.search-box i {\n  position: absolute;\n  left: 1rem;\n  color: #a0aec0;\n  z-index: 1;\n}\n\n.search-box input {\n  width: 100%;\n  padding: 0.75rem 1rem 0.75rem 2.5rem;\n  border: 1px solid #e2e8f0;\n  border-radius: 0.5rem;\n  font-size: 0.875rem;\n  transition: all 0.2s;\n}\n\n.search-box input:focus {\n  outline: none;\n  border-color: #3182ce;\n  box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.1);\n}\n\n.filter-group select {\n  width: 100%;\n  padding: 0.75rem;\n  border: 1px solid #e2e8f0;\n  border-radius: 0.5rem;\n  font-size: 0.875rem;\n  background: white;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.filter-group select:focus {\n  outline: none;\n  border-color: #3182ce;\n  box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.1);\n}\n\n.loading-container,\n.error-container,\n.empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 4rem 2rem;\n  text-align: center;\n}\n\n.loading-spinner i {\n  font-size: 2rem;\n  color: #3182ce;\n  margin-bottom: 1rem;\n}\n\n.error-content,\n.empty-content {\n  max-width: 400px;\n}\n\n.error-content i,\n.empty-content i {\n  font-size: 3rem;\n  color: #a0aec0;\n  margin-bottom: 1rem;\n}\n\n.error-content h3,\n.empty-content h3 {\n  font-size: 1.25rem;\n  font-weight: 600;\n  color: #2d3748;\n  margin-bottom: 0.5rem;\n}\n\n.error-content p,\n.empty-content p {\n  color: #718096;\n  margin-bottom: 1.5rem;\n}\n\n.retry-btn,\n.create-first-btn {\n  background: #3182ce;\n  color: white;\n  border: none;\n  padding: 0.75rem 1.5rem;\n  border-radius: 0.5rem;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  transition: all 0.2s;\n}\n\n.retry-btn:hover,\n.create-first-btn:hover {\n  background: #2c5aa0;\n}\n\n.requests-container {\n  margin-bottom: 3rem;\n}\n\n/* Table Controls */\n.table-controls {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1.5rem;\n  padding: 1rem;\n  background: white;\n  border-radius: 0.5rem;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n}\n\n.entries-selector {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.9rem;\n  color: #4a5568;\n}\n\n.entries-selector select {\n  padding: 0.25rem 0.5rem;\n  border: 1px solid #d1d5db;\n  border-radius: 0.375rem;\n  background: white;\n  color: #374151;\n  font-size: 0.9rem;\n}\n\n.table-info {\n  font-size: 0.9rem;\n  color: #6b7280;\n}\n\n/* Table Wrapper */\n.table-wrapper {\n  background: white;\n  border-radius: 0.75rem;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);\n  overflow: hidden;\n  margin-bottom: 2rem;\n}\n\n/* Requests Table */\n.requests-table {\n  width: 100%;\n  border-collapse: collapse;\n  font-size: 0.9rem;\n}\n\n.requests-table thead {\n  background: #f8fafc;\n  border-bottom: 2px solid #e2e8f0;\n}\n\n.requests-table th {\n  padding: 1rem 0.75rem;\n  text-align: left;\n  font-weight: 600;\n  color: #374151;\n  font-size: 0.875rem;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n}\n\n.requests-table tbody tr {\n  border-bottom: 1px solid #f1f5f9;\n  transition: background-color 0.2s;\n  cursor: pointer;\n}\n\n.requests-table tbody tr:hover {\n  background: #f8fafc;\n}\n\n.requests-table tbody tr:last-child {\n  border-bottom: none;\n}\n\n.requests-table td {\n  padding: 1rem 0.75rem;\n  vertical-align: middle;\n}\n\n/* Column Specific Styles */\n.col-id {\n  width: 10%;\n  min-width: 100px;\n}\n\n.col-type {\n  width: 15%;\n  min-width: 150px;\n}\n\n.col-purpose {\n  width: 15%;\n  min-width: 120px;\n}\n\n.col-status {\n  width: 15%;\n  min-width: 130px;\n}\n\n.col-date {\n  width: 12%;\n  min-width: 110px;\n}\n\n.col-amount {\n  width: 10%;\n  min-width: 90px;\n}\n\n.col-progress {\n  width: 15%;\n  min-width: 120px;\n}\n\n.col-actions {\n  width: 8%;\n  min-width: 100px;\n}\n\n/* Table Cell Content */\n.request-id {\n  font-family: 'Courier New', monospace;\n  font-weight: 600;\n  color: #3182ce;\n  font-size: 0.85rem;\n}\n\n.document-type {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-weight: 500;\n  color: #2d3748;\n}\n\n.document-type i {\n  color: #3182ce;\n  width: 16px;\n}\n\n.status-container {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n}\n\n.amount {\n  font-weight: 600;\n  color: #059669;\n}\n\n.progress-container {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n}\n\n.progress-bar {\n  width: 100%;\n  height: 6px;\n  background: #e2e8f0;\n  border-radius: 3px;\n  overflow: hidden;\n}\n\n.progress-fill {\n  height: 100%;\n  background: #3182ce;\n  transition: width 0.3s ease;\n}\n\n.progress-text {\n  font-size: 0.75rem;\n  color: #6b7280;\n  font-weight: 500;\n}\n\n.action-buttons {\n  display: flex;\n  gap: 0.25rem;\n  justify-content: flex-start;\n}\n\n.action-btn {\n  padding: 0.375rem;\n  border: none;\n  border-radius: 0.375rem;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 2rem;\n  height: 2rem;\n  font-size: 0.8rem;\n}\n\n.view-btn {\n  background: #e6f3ff;\n  color: #3182ce;\n}\n\n.view-btn:hover {\n  background: #3182ce;\n  color: white;\n}\n\n.cancel-btn {\n  background: #fef2f2;\n  color: #dc2626;\n}\n\n.cancel-btn:hover {\n  background: #dc2626;\n  color: white;\n}\n\n.pay-btn {\n  background: #f0fdf4;\n  color: #059669;\n}\n\n.pay-btn:hover {\n  background: #059669;\n  color: white;\n}\n\n.status-badge {\n  padding: 0.25rem 0.75rem;\n  border-radius: 1rem;\n  font-size: 0.75rem;\n  font-weight: 500;\n  text-transform: uppercase;\n  letter-spacing: 0.025em;\n}\n\n.status-pending { background: #fef5e7; color: #d69e2e; }\n.status-review { background: #ebf8ff; color: #3182ce; }\n.status-info-required { background: #fff7ed; color: #ea580c; }\n.status-approved { background: #f0fff4; color: #38a169; }\n.status-payment-pending { background: #fef3c7; color: #d97706; }\n.status-payment-confirmed { background: #ecfdf5; color: #059669; }\n.status-payment-failed { background: #fef2f2; color: #dc2626; }\n.status-processing { background: #e6fffa; color: #319795; }\n.status-ready { background: #f0f9ff; color: #0ea5e9; }\n.status-pickup-scheduled { background: #f3e8ff; color: #9333ea; }\n.status-completed { background: #f0fff4; color: #22c55e; }\n.status-rejected { background: #fef2f2; color: #ef4444; }\n.status-cancelled { background: #f8fafc; color: #64748b; }\n.status-unknown { background: #f1f5f9; color: #475569; }\n\n.rejection-reason {\n  margin-top: 0.25rem;\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n}\n\n.rejection-reason i {\n  font-size: 0.75rem;\n  color: #f59e0b;\n}\n\n.rejection-reason small {\n  font-size: 0.75rem;\n  line-height: 1.4;\n  color: #6b7280;\n}\n\n/* Old card styles removed - now using table layout */\n\n/* Button styles now defined in table section above */\n\n.pagination {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 1rem;\n  margin-top: 2rem;\n}\n\n.page-btn {\n  padding: 0.5rem 1rem;\n  border: 1px solid #e2e8f0;\n  background: white;\n  color: #4a5568;\n  border-radius: 0.375rem;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.page-btn:hover:not(:disabled) {\n  background: #f7fafc;\n  border-color: #cbd5e0;\n}\n\n.page-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.page-numbers {\n  display: flex;\n  gap: 0.25rem;\n}\n\n.page-number {\n  width: 2.5rem;\n  height: 2.5rem;\n  border: 1px solid #e2e8f0;\n  background: white;\n  color: #4a5568;\n  border-radius: 0.375rem;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.page-number:hover {\n  background: #f7fafc;\n  border-color: #cbd5e0;\n}\n\n.page-number.active {\n  background: #3182ce;\n  color: white;\n  border-color: #3182ce;\n}\n\n.summary-stats {\n  background: white;\n  border-radius: 1rem;\n  padding: 2rem;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);\n}\n\n.stats-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 1.5rem;\n}\n\n.stat-card {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  padding: 1rem;\n  background: #f7fafc;\n  border-radius: 0.75rem;\n}\n\n.stat-icon {\n  width: 3rem;\n  height: 3rem;\n  background: #3182ce;\n  color: white;\n  border-radius: 0.75rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.25rem;\n}\n\n.stat-icon.pending {\n  background: #d69e2e;\n}\n\n.stat-icon.completed {\n  background: #38a169;\n}\n\n.stat-content h3 {\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: #1a365d;\n  margin-bottom: 0.25rem;\n}\n\n.stat-content p {\n  color: #718096;\n  font-size: 0.875rem;\n  margin: 0;\n}\n\n@media (max-width: 1024px) {\n  .filters-container {\n    grid-template-columns: 1fr;\n    gap: 1rem;\n  }\n\n  .table-controls {\n    flex-direction: column;\n    align-items: stretch;\n    gap: 1rem;\n  }\n\n  .table-info {\n    text-align: center;\n  }\n\n  .requests-table {\n    font-size: 0.85rem;\n  }\n\n  .requests-table th,\n  .requests-table td {\n    padding: 0.75rem 0.5rem;\n  }\n\n  .col-purpose,\n  .col-progress {\n    display: none;\n  }\n\n  .stats-grid {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n\n@media (max-width: 768px) {\n  .page-header {\n    padding: 1.5rem 1rem 1rem 1rem;\n  }\n\n  .page-content {\n    padding: 0 1rem 1rem 1rem;\n  }\n\n  .page-title {\n    font-size: 1.5rem;\n    line-height: 1.3;\n    text-align: center;\n    margin-bottom: 0.5rem;\n  }\n\n  .page-title i {\n    font-size: 1.25rem;\n    margin-right: 0.5rem;\n    color: #0d6efd;\n  }\n\n  .page-description {\n    font-size: 0.9rem;\n    text-align: center;\n    line-height: 1.4;\n    margin-top: 0.5rem;\n  }\n\n  .header-content {\n    flex-direction: column;\n    align-items: stretch;\n    gap: 1rem;\n  }\n\n  .header-actions {\n    justify-content: flex-start;\n    gap: 0.75rem;\n  }\n\n  .back-btn {\n    padding: 0.75rem 1rem;\n    font-size: 0.9rem;\n    min-height: 44px; /* Touch-friendly size */\n    border-radius: 6px;\n  }\n\n  .filters-section {\n    padding: 1rem 0;\n  }\n\n  .search-input {\n    font-size: 1rem;\n    padding: 0.75rem;\n  }\n\n  .filter-select {\n    font-size: 0.9rem;\n    padding: 0.5rem;\n  }\n\n  .table-wrapper {\n    overflow-x: auto;\n  }\n\n  .requests-table {\n    min-width: 700px;\n  }\n\n  .action-buttons {\n    flex-direction: column;\n    gap: 0.125rem;\n  }\n\n  .action-btn {\n    width: 1.75rem;\n    height: 1.75rem;\n    font-size: 0.75rem;\n  }\n\n  .stats-grid {\n    grid-template-columns: 1fr;\n    gap: 1rem;\n  }\n\n  .stat-card {\n    padding: 1rem;\n  }\n\n  .stat-number {\n    font-size: 1.5rem;\n  }\n\n  .stat-label {\n    font-size: 0.8rem;\n  }\n\n  .pagination {\n    flex-wrap: wrap;\n    gap: 0.5rem;\n    padding: 1rem 0;\n  }\n\n  .page-numbers {\n    order: -1;\n    width: 100%;\n    justify-content: center;\n  }\n\n  .page-btn {\n    padding: 0.4rem 0.8rem;\n    font-size: 0.9rem;\n  }\n}\n\n@media (max-width: 480px) {\n  .page-header {\n    padding: 1rem 0.75rem 0.75rem 0.75rem;\n  }\n\n  .page-content {\n    padding: 0 0.75rem 0.75rem 0.75rem;\n  }\n\n  .page-title {\n    font-size: 1.3rem;\n    line-height: 1.2;\n    text-align: center;\n    margin-bottom: 0.75rem;\n    word-wrap: break-word;\n  }\n\n  .page-title i {\n    font-size: 1.1rem;\n    margin-right: 0.5rem;\n    color: #0d6efd;\n  }\n\n  .page-description {\n    font-size: 0.85rem;\n    text-align: center;\n    line-height: 1.4;\n    padding: 0 0.5rem;\n    margin-top: 0.5rem;\n  }\n\n  .header-actions {\n    flex-direction: column;\n    gap: 0.5rem;\n  }\n\n  .back-btn {\n    width: 100%;\n    justify-content: center;\n    min-height: 48px; /* Larger touch target for phones */\n    padding: 0.875rem 1rem;\n    font-size: 1rem;\n    border-radius: 8px;\n  }\n\n  .back-btn i {\n    font-size: 1.1rem;\n    margin-right: 0.5rem;\n  }\n\n  .filters-container {\n    gap: 0.75rem;\n  }\n\n  .search-input {\n    font-size: 16px; /* Prevents zoom on iOS */\n  }\n\n  .table-controls {\n    padding: 0.75rem;\n    font-size: 0.85rem;\n  }\n\n  .entries-selector select {\n    font-size: 0.85rem;\n  }\n\n  .requests-table {\n    font-size: 0.8rem;\n    min-width: 600px;\n  }\n\n  .requests-table th,\n  .requests-table td {\n    padding: 0.5rem 0.375rem;\n  }\n\n  .col-date {\n    display: none;\n  }\n\n  .request-id {\n    font-size: 0.75rem;\n  }\n\n  .document-type span {\n    display: none;\n  }\n\n  .document-type i {\n    font-size: 1rem;\n  }\n\n  .status-badge {\n    font-size: 0.65rem;\n    padding: 0.125rem 0.5rem;\n  }\n\n  .action-btn {\n    width: 1.5rem;\n    height: 1.5rem;\n    font-size: 0.7rem;\n  }\n\n  .stat-card {\n    padding: 0.75rem;\n  }\n\n  .stat-number {\n    font-size: 1.3rem;\n  }\n\n  .stat-label {\n    font-size: 0.75rem;\n  }\n}\n\n/* Touch device optimizations */\n@media (hover: none) and (pointer: coarse) {\n  .back-btn,\n  .btn-primary,\n  .btn-outline-primary,\n  .btn-outline-secondary {\n    min-height: 48px;\n    padding: 0.875rem 1rem;\n    border-radius: 8px;\n    transition: all 0.2s ease;\n  }\n\n  .back-btn:active,\n  .btn:active {\n    transform: scale(0.95);\n    background-color: rgba(0, 123, 255, 0.1);\n  }\n\n  .request-card {\n    transition: transform 0.2s ease;\n  }\n\n  .request-card:active {\n    transform: scale(0.98);\n  }\n}\n\n/* Prevent zoom on input focus (iOS Safari) */\n@media (max-width: 768px) {\n  input[type=\"text\"],\n  input[type=\"email\"],\n  input[type=\"search\"],\n  select {\n    font-size: 16px !important; /* Prevents zoom on iOS */\n  }\n\n  .search-input {\n    font-size: 16px !important;\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}