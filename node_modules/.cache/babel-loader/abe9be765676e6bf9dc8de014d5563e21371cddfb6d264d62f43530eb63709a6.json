{"ast":null,"code":"// https://www.w3.org/TR/PNG/#5PNG-file-signature\nconst pngSignature = Uint8Array.of(137, 80, 78, 71, 13, 10, 26, 10);\nexport function writeSignature(buffer) {\n  buffer.writeBytes(pngSignature);\n}\nexport function checkSignature(buffer) {\n  if (!hasPngSignature(buffer.readBytes(pngSignature.length))) {\n    throw new Error('wrong PNG signature');\n  }\n}\nexport function hasPngSignature(array) {\n  if (array.length < pngSignature.length) {\n    return false;\n  }\n  for (let i = 0; i < pngSignature.length; i++) {\n    if (array[i] !== pngSignature[i]) {\n      return false;\n    }\n  }\n  return true;\n}","map":{"version":3,"names":["pngSignature","Uint8Array","of","writeSignature","buffer","writeBytes","checkSignature","hasPngSignature","readBytes","length","Error","array","i"],"sources":["../../src/helpers/signature.ts"],"sourcesContent":[null],"mappings":"AAEA;AAEA,MAAMA,YAAY,GAAGC,UAAU,CAACC,EAAE,CAAC,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;AAEnE,OAAM,SAAUC,cAAcA,CAACC,MAAgB;EAC7CA,MAAM,CAACC,UAAU,CAACL,YAAY,CAAC;AACjC;AAEA,OAAM,SAAUM,cAAcA,CAACF,MAAgB;EAC7C,IAAI,CAACG,eAAe,CAACH,MAAM,CAACI,SAAS,CAACR,YAAY,CAACS,MAAM,CAAC,CAAC,EAAE;IAC3D,MAAM,IAAIC,KAAK,CAAC,qBAAqB,CAAC;EACxC;AACF;AAEA,OAAM,SAAUH,eAAeA,CAACI,KAAwB;EACtD,IAAIA,KAAK,CAACF,MAAM,GAAGT,YAAY,CAACS,MAAM,EAAE;IACtC,OAAO,KAAK;EACd;EACA,KAAK,IAAIG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGZ,YAAY,CAACS,MAAM,EAAEG,CAAC,EAAE,EAAE;IAC5C,IAAID,KAAK,CAACC,CAAC,CAAC,KAAKZ,YAAY,CAACY,CAAC,CAAC,EAAE;MAChC,OAAO,KAAK;IACd;EACF;EACA,OAAO,IAAI;AACb","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}