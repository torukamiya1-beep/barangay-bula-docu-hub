"use strict";(self["webpackChunkbosfdr"]=self["webpackChunkbosfdr"]||[]).push([[669],{1669:function(t,a,e){e.r(a),e.d(a,{default:function(){return Bt}});var n=e(6768),s=e(5130),i=e(4232);const l={class:"transactions-page"},o={class:"page-header"},c={class:"container"},r={class:"header-content"},d={class:"header-text"},u={class:"container"},p={class:"search-section"},m={class:"search-container"},k={class:"search-input-group"},h={class:"transactions-section"},L={class:"section-header"},g={class:"section-actions"},v={key:0,class:"results-count"},y={key:0,class:"loading-state"},b={key:1,class:"error-state"},f={key:2,class:"empty-state"},_={key:3,class:"transactions-container"},T={class:"table-responsive desktop-table"},C={class:"table transactions-table"},w={class:"receipt-number"},F={class:"client-name"},P={class:"document-type"},x={class:"amount"},D={class:"payment-method"},S={class:"date"},R={class:"action-buttons"},E=["onClick"],A=["onClick","disabled"],N={class:"mobile-cards"},M={class:"card-header"},X={class:"receipt-info"},$={class:"receipt-number"},I={class:"amount"},Q={class:"card-body"},z={class:"transaction-info"},q={class:"info-row"},W={class:"value"},B={class:"info-row"},O={class:"value"},V={class:"info-row"},K={class:"value"},U={class:"info-row"},G={class:"value"},Y={class:"card-footer"},H=["onClick"],J=["onClick","disabled"],j={key:4,class:"pagination-section"},Z={"aria-label":"Transactions pagination"},tt={class:"pagination"},at=["disabled"],et=["onClick"],nt=["disabled"],st={class:"modal-header"},it={key:0,class:"modal-body"},lt={class:"transaction-details"},ot={class:"detail-section"},ct={class:"detail-grid"},rt={class:"detail-item"},dt={class:"receipt-number"},ut={class:"detail-item"},pt={class:"detail-item"},mt={class:"detail-section"},kt={class:"detail-grid"},ht={class:"detail-item"},Lt={class:"detail-item"},gt={class:"detail-item"},vt={class:"detail-section"},yt={class:"detail-grid"},bt={class:"detail-item"},ft={class:"detail-item"},_t={class:"detail-section"},Tt={class:"detail-grid"},Ct={class:"detail-item"},wt={class:"detail-item"},Ft={class:"amount"},Pt={key:0,class:"detail-section"},xt={class:"detail-grid"},Dt={key:0,class:"detail-item"},St={class:"transaction-id"},Rt={key:1,class:"detail-item"},Et={class:"transaction-id"},At={key:1,class:"detail-section"},Nt={class:"description"},Mt={class:"modal-footer"},Xt=["disabled"];function $t(t,a,e,$t,It,Qt){const zt=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",l,[(0,n.Lk)("div",o,[(0,n.Lk)("div",c,[(0,n.Lk)("div",r,[(0,n.Lk)("div",d,[(0,n.Lk)("button",{class:"btn btn-outline-secondary back-button",onClick:a[0]||(a[0]=(...t)=>Qt.goBack&&Qt.goBack(...t)),title:"Go back to previous page"},a[12]||(a[12]=[(0,n.Lk)("i",{class:"fas fa-arrow-left"},null,-1),(0,n.eW)(" Back ")])),a[13]||(a[13]=(0,n.Lk)("div",{class:"title-section"},[(0,n.Lk)("h1",{class:"page-title"},"Online Transactions"),(0,n.Lk)("p",{class:"page-description"},"View your payment receipts and transaction history")],-1))])])])]),(0,n.Lk)("div",u,[(0,n.Lk)("div",p,[(0,n.Lk)("div",m,[(0,n.Lk)("div",k,[a[15]||(a[15]=(0,n.Lk)("i",{class:"fas fa-search search-icon"},null,-1)),(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=t=>It.searchQuery=t),onInput:a[2]||(a[2]=(...t)=>Qt.handleSearch&&Qt.handleSearch(...t)),placeholder:"Search transactions by receipt number, amount, or status...",class:"search-input"},null,544),[[s.Jo,It.searchQuery]]),It.searchQuery?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:a[3]||(a[3]=(...t)=>Qt.clearSearch&&Qt.clearSearch(...t)),class:"clear-search-btn",type:"button"},a[14]||(a[14]=[(0,n.Lk)("i",{class:"fas fa-times"},null,-1)]))):(0,n.Q3)("",!0)])])]),(0,n.Lk)("div",h,[(0,n.Lk)("div",L,[a[16]||(a[16]=(0,n.Lk)("h2",null,"Payment Receipts",-1)),(0,n.Lk)("div",g,[It.pagination.total?((0,n.uX)(),(0,n.CE)("span",v," Showing "+(0,i.v_)((It.pagination.page-1)*It.pagination.limit+1)+" - "+(0,i.v_)(Math.min(It.pagination.page*It.pagination.limit,It.pagination.total))+" of "+(0,i.v_)(It.pagination.total)+" receipts ",1)):(0,n.Q3)("",!0)])]),It.loading?((0,n.uX)(),(0,n.CE)("div",y,a[17]||(a[17]=[(0,n.Lk)("div",{class:"loading-spinner"},[(0,n.Lk)("i",{class:"fas fa-spinner fa-spin"})],-1),(0,n.Lk)("p",null,"Loading transactions...",-1)]))):It.error?((0,n.uX)(),(0,n.CE)("div",b,[a[19]||(a[19]=(0,n.Lk)("div",{class:"error-icon"},[(0,n.Lk)("i",{class:"fas fa-exclamation-triangle"})],-1)),a[20]||(a[20]=(0,n.Lk)("h3",null,"Error Loading Transactions",-1)),(0,n.Lk)("p",null,(0,i.v_)(It.error),1),(0,n.Lk)("button",{class:"btn btn-primary",onClick:a[4]||(a[4]=(...t)=>Qt.loadTransactions&&Qt.loadTransactions(...t))},a[18]||(a[18]=[(0,n.Lk)("i",{class:"fas fa-retry"},null,-1),(0,n.eW)(" Try Again ")]))])):It.transactions.length?((0,n.uX)(),(0,n.CE)("div",_,[(0,n.Lk)("div",T,[(0,n.Lk)("table",C,[a[27]||(a[27]=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Receipt #"),(0,n.Lk)("th",null,"Client Name"),(0,n.Lk)("th",null,"Document Type"),(0,n.Lk)("th",null,"Amount"),(0,n.Lk)("th",null,"Payment Method"),(0,n.Lk)("th",null,"Date"),(0,n.Lk)("th",null,"Status"),(0,n.Lk)("th",null,"Actions")])],-1)),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(It.transactions,(t=>((0,n.uX)(),(0,n.CE)("tr",{key:t.id,class:"transaction-row"},[(0,n.Lk)("td",null,[(0,n.Lk)("span",w,(0,i.v_)(t.receipt_number),1)]),(0,n.Lk)("td",null,[(0,n.Lk)("span",F,(0,i.v_)(t.client_name),1)]),(0,n.Lk)("td",null,[(0,n.Lk)("span",P,(0,i.v_)(t.document_type),1)]),(0,n.Lk)("td",null,[(0,n.Lk)("span",x,"₱"+(0,i.v_)(Qt.formatAmount(t.amount)),1)]),(0,n.Lk)("td",null,[(0,n.Lk)("span",D,(0,i.v_)(t.payment_method),1)]),(0,n.Lk)("td",null,[(0,n.Lk)("span",S,(0,i.v_)(Qt.formatDate(t.receipt_date)),1)]),(0,n.Lk)("td",null,[(0,n.Lk)("span",{class:(0,i.C4)(["status-badge",`status-${t.payment_status}`])},(0,i.v_)(Qt.formatStatus(t.payment_status)),3)]),(0,n.Lk)("td",null,[(0,n.Lk)("div",R,[(0,n.Lk)("button",{class:"btn btn-sm btn-primary",onClick:a=>Qt.viewTransaction(t),title:"View Details"},a[25]||(a[25]=[(0,n.Lk)("i",{class:"fas fa-eye"},null,-1),(0,n.eW)(" View ")]),8,E),(0,n.Lk)("button",{class:"btn btn-sm btn-success",onClick:a=>Qt.downloadReceiptDirect(t),disabled:It.downloadingReceipt===t.id,title:"Download Receipt"},[(0,n.Lk)("i",{class:(0,i.C4)(["fas fa-download",{"fa-spin":It.downloadingReceipt===t.id}])},null,2),a[26]||(a[26]=(0,n.Lk)("span",{class:"btn-text"},"PDF",-1))],8,A)])])])))),128))])])]),(0,n.Lk)("div",N,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(It.transactions,(t=>((0,n.uX)(),(0,n.CE)("div",{key:t.id,class:"transaction-card"},[(0,n.Lk)("div",M,[(0,n.Lk)("div",X,[(0,n.Lk)("span",$,(0,i.v_)(t.receipt_number),1),(0,n.Lk)("span",{class:(0,i.C4)(["status-badge",`status-${t.payment_status}`])},(0,i.v_)(Qt.formatStatus(t.payment_status)),3)]),(0,n.Lk)("div",I,"₱"+(0,i.v_)(Qt.formatAmount(t.amount)),1)]),(0,n.Lk)("div",Q,[(0,n.Lk)("div",z,[(0,n.Lk)("div",q,[a[28]||(a[28]=(0,n.Lk)("span",{class:"label"},"Client:",-1)),(0,n.Lk)("span",W,(0,i.v_)(t.client_name),1)]),(0,n.Lk)("div",B,[a[29]||(a[29]=(0,n.Lk)("span",{class:"label"},"Document:",-1)),(0,n.Lk)("span",O,(0,i.v_)(t.document_type),1)]),(0,n.Lk)("div",V,[a[30]||(a[30]=(0,n.Lk)("span",{class:"label"},"Payment Method:",-1)),(0,n.Lk)("span",K,(0,i.v_)(t.payment_method),1)]),(0,n.Lk)("div",U,[a[31]||(a[31]=(0,n.Lk)("span",{class:"label"},"Date:",-1)),(0,n.Lk)("span",G,(0,i.v_)(Qt.formatDate(t.receipt_date)),1)])])]),(0,n.Lk)("div",Y,[(0,n.Lk)("button",{class:"btn btn-sm btn-primary",onClick:a=>Qt.viewTransaction(t)},a[32]||(a[32]=[(0,n.Lk)("i",{class:"fas fa-eye"},null,-1),(0,n.eW)(" View Details ")]),8,H),(0,n.Lk)("button",{class:"btn btn-sm btn-success",onClick:a=>Qt.downloadReceiptDirect(t),disabled:It.downloadingReceipt===t.id},[(0,n.Lk)("i",{class:(0,i.C4)(["fas fa-download",{"fa-spin":It.downloadingReceipt===t.id}])},null,2),a[33]||(a[33]=(0,n.eW)(" Download PDF "))],8,J)])])))),128))])])):((0,n.uX)(),(0,n.CE)("div",f,[a[22]||(a[22]=(0,n.Lk)("div",{class:"empty-icon"},[(0,n.Lk)("i",{class:"fas fa-receipt"})],-1)),a[23]||(a[23]=(0,n.Lk)("h3",null,"No Transactions Found",-1)),a[24]||(a[24]=(0,n.Lk)("p",null,"You haven't made any online payments yet.",-1)),(0,n.bF)(zt,{to:"/client/home",class:"btn btn-primary"},{default:(0,n.k6)((()=>a[21]||(a[21]=[(0,n.Lk)("i",{class:"fas fa-plus"},null,-1),(0,n.eW)(" Make a Request ")]))),_:1,__:[21]})])),It.pagination.totalPages>1?((0,n.uX)(),(0,n.CE)("div",j,[(0,n.Lk)("nav",Z,[(0,n.Lk)("ul",tt,[(0,n.Lk)("li",{class:(0,i.C4)(["page-item",{disabled:!It.pagination.hasPrev}])},[(0,n.Lk)("button",{class:"page-link",onClick:a[5]||(a[5]=t=>Qt.changePage(It.pagination.page-1)),disabled:!It.pagination.hasPrev},a[34]||(a[34]=[(0,n.Lk)("i",{class:"fas fa-chevron-left"},null,-1),(0,n.eW)(" Previous ")]),8,at)],2),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(Qt.visiblePages,(t=>((0,n.uX)(),(0,n.CE)("li",{key:t,class:(0,i.C4)(["page-item",{active:t===It.pagination.page}])},[(0,n.Lk)("button",{class:"page-link",onClick:a=>Qt.changePage(t)},(0,i.v_)(t),9,et)],2)))),128)),(0,n.Lk)("li",{class:(0,i.C4)(["page-item",{disabled:!It.pagination.hasNext}])},[(0,n.Lk)("button",{class:"page-link",onClick:a[6]||(a[6]=t=>Qt.changePage(It.pagination.page+1)),disabled:!It.pagination.hasNext},a[35]||(a[35]=[(0,n.eW)(" Next "),(0,n.Lk)("i",{class:"fas fa-chevron-right"},null,-1)]),8,nt)],2)])])])):(0,n.Q3)("",!0)])]),It.showTransactionModal?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"modal-overlay",onClick:a[11]||(a[11]=(...t)=>Qt.closeTransactionModal&&Qt.closeTransactionModal(...t))},[(0,n.Lk)("div",{class:"modal-content transaction-modal",onClick:a[10]||(a[10]=(0,s.D$)((()=>{}),["stop"]))},[(0,n.Lk)("div",st,[a[37]||(a[37]=(0,n.Lk)("h3",null,"Transaction Details",-1)),(0,n.Lk)("button",{class:"modal-close",onClick:a[7]||(a[7]=(...t)=>Qt.closeTransactionModal&&Qt.closeTransactionModal(...t))},a[36]||(a[36]=[(0,n.Lk)("i",{class:"fas fa-times"},null,-1)]))]),It.selectedTransaction?((0,n.uX)(),(0,n.CE)("div",it,[(0,n.Lk)("div",lt,[(0,n.Lk)("div",ot,[a[41]||(a[41]=(0,n.Lk)("h4",null,"Receipt Information",-1)),(0,n.Lk)("div",ct,[(0,n.Lk)("div",rt,[a[38]||(a[38]=(0,n.Lk)("label",null,"Receipt Number",-1)),(0,n.Lk)("span",dt,(0,i.v_)(It.selectedTransaction.receipt_number),1)]),(0,n.Lk)("div",ut,[a[39]||(a[39]=(0,n.Lk)("label",null,"Receipt Date",-1)),(0,n.Lk)("span",null,(0,i.v_)(Qt.formatDateTime(It.selectedTransaction.receipt_date)),1)]),(0,n.Lk)("div",pt,[a[40]||(a[40]=(0,n.Lk)("label",null,"Payment Date",-1)),(0,n.Lk)("span",null,(0,i.v_)(Qt.formatDateTime(It.selectedTransaction.payment_date)),1)])])]),(0,n.Lk)("div",mt,[a[45]||(a[45]=(0,n.Lk)("h4",null,"Client Information",-1)),(0,n.Lk)("div",kt,[(0,n.Lk)("div",ht,[a[42]||(a[42]=(0,n.Lk)("label",null,"Full Name",-1)),(0,n.Lk)("span",null,(0,i.v_)(It.selectedTransaction.client_name),1)]),(0,n.Lk)("div",Lt,[a[43]||(a[43]=(0,n.Lk)("label",null,"Email",-1)),(0,n.Lk)("span",null,(0,i.v_)(It.selectedTransaction.client_email),1)]),(0,n.Lk)("div",gt,[a[44]||(a[44]=(0,n.Lk)("label",null,"Phone",-1)),(0,n.Lk)("span",null,(0,i.v_)(It.selectedTransaction.client_phone),1)])])]),(0,n.Lk)("div",vt,[a[48]||(a[48]=(0,n.Lk)("h4",null,"Request Information",-1)),(0,n.Lk)("div",yt,[(0,n.Lk)("div",bt,[a[46]||(a[46]=(0,n.Lk)("label",null,"Request Number",-1)),(0,n.Lk)("span",null,(0,i.v_)(It.selectedTransaction.request_number),1)]),(0,n.Lk)("div",ft,[a[47]||(a[47]=(0,n.Lk)("label",null,"Document Type",-1)),(0,n.Lk)("span",null,(0,i.v_)(It.selectedTransaction.document_type),1)])])]),(0,n.Lk)("div",_t,[a[51]||(a[51]=(0,n.Lk)("h4",null,"Payment Information",-1)),(0,n.Lk)("div",Tt,[(0,n.Lk)("div",Ct,[a[49]||(a[49]=(0,n.Lk)("label",null,"Payment Method",-1)),(0,n.Lk)("span",null,(0,i.v_)(It.selectedTransaction.payment_method),1)]),(0,n.Lk)("div",wt,[a[50]||(a[50]=(0,n.Lk)("label",null,"Amount",-1)),(0,n.Lk)("span",Ft,"₱"+(0,i.v_)(Qt.formatAmount(It.selectedTransaction.amount)),1)])])]),It.selectedTransaction.external_transaction_id?((0,n.uX)(),(0,n.CE)("div",Pt,[a[54]||(a[54]=(0,n.Lk)("h4",null,"Transaction References",-1)),(0,n.Lk)("div",xt,[It.selectedTransaction.external_transaction_id?((0,n.uX)(),(0,n.CE)("div",Dt,[a[52]||(a[52]=(0,n.Lk)("label",null,"External Transaction ID",-1)),(0,n.Lk)("span",St,(0,i.v_)(It.selectedTransaction.external_transaction_id),1)])):(0,n.Q3)("",!0),It.selectedTransaction.paymongo_payment_intent_id?((0,n.uX)(),(0,n.CE)("div",Rt,[a[53]||(a[53]=(0,n.Lk)("label",null,"PayMongo Payment Intent",-1)),(0,n.Lk)("span",Et,(0,i.v_)(It.selectedTransaction.paymongo_payment_intent_id),1)])):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0),It.selectedTransaction.description?((0,n.uX)(),(0,n.CE)("div",At,[a[55]||(a[55]=(0,n.Lk)("h4",null,"Description",-1)),(0,n.Lk)("p",Nt,(0,i.v_)(It.selectedTransaction.description),1)])):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0),(0,n.Lk)("div",Mt,[(0,n.Lk)("button",{class:"btn btn-outline-primary",onClick:a[8]||(a[8]=(...t)=>Qt.downloadReceipt&&Qt.downloadReceipt(...t)),disabled:It.downloadingReceipt},[(0,n.Lk)("i",{class:(0,i.C4)(["fas fa-download",{"fa-spin":It.downloadingReceipt}])},null,2),(0,n.eW)(" "+(0,i.v_)(It.downloadingReceipt?"Preparing...":"Download Receipt"),1)],8,Xt),(0,n.Lk)("button",{class:"btn btn-secondary",onClick:a[9]||(a[9]=(...t)=>Qt.closeTransactionModal&&Qt.closeTransactionModal(...t))}," Close ")])])])):(0,n.Q3)("",!0)])}e(4114),e(8111),e(2489);var It=e(4300),Qt=e(6830),zt={name:"ClientTransactions",data(){return{transactions:[],allTransactions:[],statistics:null,loading:!1,error:null,showTransactionModal:!1,selectedTransaction:null,downloadingReceipt:!1,searchQuery:"",searchTimeout:null,pagination:{page:1,limit:10,total:0,totalPages:0,hasNext:!1,hasPrev:!1}}},computed:{visiblePages(){const t=this.pagination.page,a=this.pagination.totalPages,e=1,n=[],s=t-e,i=t+e;let l;for(let o=1;o<=a;o++)(1===o||o===a||o>=s&&o<=i)&&(l&&o-l>1&&n.push("..."),n.push(o),l=o);return n}},async mounted(){await this.loadTransactions(),await this.loadStatistics()},methods:{async loadTransactions(){try{this.loading=!0,this.error=null;const t={page:this.pagination.page,limit:this.pagination.limit,sortBy:"receipt_date",sortOrder:"DESC"},a=await It["default"].get("/client/receipts",{params:t});if(!a.data.success)throw new Error(a.data.message||"Failed to load transactions");this.allTransactions=a.data.data.receipts||[],this.applySearchAndPagination()}catch(t){console.error("Failed to load transactions:",t),this.error=t.response?.data?.message||t.message||"Failed to load transactions",this.transactions=[],this.allTransactions=[]}finally{this.loading=!1}},async loadStatistics(){try{const t=await It["default"].get("/client/receipts/statistics");t.data.success&&(this.statistics=t.data.data)}catch(t){console.error("Failed to load statistics:",t)}},goBack(){this.$router.go(-1)},applySearchAndPagination(){let t=this.allTransactions;if(this.searchQuery.trim()){const a=this.searchQuery.toLowerCase().trim();t=this.allTransactions.filter((t=>t.receipt_number?.toLowerCase().includes(a)||t.amount?.toString().includes(a)||t.status?.toLowerCase().includes(a)||t.payment_method?.toLowerCase().includes(a)||t.document_type?.toLowerCase().includes(a)))}const a=t.length,e=Math.ceil(a/this.pagination.limit),n=(this.pagination.page-1)*this.pagination.limit,s=n+this.pagination.limit;if(this.pagination.total=a,this.pagination.totalPages=e,this.pagination.page>e&&e>0)return this.pagination.page=e,void this.applySearchAndPagination();this.transactions=t.slice(n,s)},handleSearch(){this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((()=>{this.pagination.page=1,this.applySearchAndPagination()}),300)},clearSearch(){this.searchQuery="",this.pagination.page=1,this.applySearchAndPagination()},changePage(t){t>=1&&t<=this.pagination.totalPages&&t!==this.pagination.page&&(this.pagination.page=t,this.applySearchAndPagination())},async viewTransaction(t){try{this.loading=!0;const a=await It["default"].get(`/client/receipts/${t.id}`);if(!a.data.success)throw new Error(a.data.message||"Failed to load transaction details");this.selectedTransaction=a.data.data,this.showTransactionModal=!0}catch(a){console.error("Failed to load transaction details:",a),this.$toast.error(a.response?.data?.message||"Failed to load transaction details")}finally{this.loading=!1}},closeTransactionModal(){this.showTransactionModal=!1,this.selectedTransaction=null},async downloadReceipt(){this.selectedTransaction&&await this.generatePDF(this.selectedTransaction)},async downloadReceiptDirect(t){await this.generatePDF(t)},async generatePDF(t){try{this.downloadingReceipt=t.id;let a=t;if(!t.client_email){const e=await It["default"].get(`/client/receipts/${t.id}`);e.data.success&&(a=e.data.data)}const e=new Qt.Ay,n=[45,55,72],s=[102,126,234],i=[74,85,104];e.setFillColor(...n),e.rect(0,0,210,40,"F"),e.setTextColor(255,255,255),e.setFontSize(24),e.setFont("helvetica","bold"),e.text("PAYMENT RECEIPT",105,20,{align:"center"}),e.setFontSize(12),e.setFont("helvetica","normal"),e.text("Barangay Online Services for Document Requests",105,30,{align:"center"}),e.setTextColor(...i);let l=60;e.setFontSize(16),e.setFont("helvetica","bold"),e.setTextColor(...s),e.text("Receipt Information",20,l),l+=15,e.setFontSize(11),e.setFont("helvetica","normal"),e.setTextColor(...i);const o=[["Receipt Number:",a.receipt_number||"N/A"],["Receipt Date:",this.formatDate(a.receipt_date)],["Payment Date:",this.formatDate(a.payment_date||a.receipt_date)],["Status:",this.formatStatus(a.payment_status)]];o.forEach((([t,a])=>{e.setFont("helvetica","bold"),e.text(t,20,l),e.setFont("helvetica","normal"),e.text(a,80,l),l+=8})),l+=10,e.setFontSize(16),e.setFont("helvetica","bold"),e.setTextColor(...s),e.text("Client Information",20,l),l+=15,e.setFontSize(11),e.setFont("helvetica","normal"),e.setTextColor(...i);const c=[["Client Name:",a.client_name||"N/A"],["Email:",a.client_email||"N/A"],["Phone:",a.client_phone||"N/A"]];c.forEach((([t,a])=>{e.setFont("helvetica","bold"),e.text(t,20,l),e.setFont("helvetica","normal"),e.text(a,80,l),l+=8})),l+=10,e.setFontSize(16),e.setFont("helvetica","bold"),e.setTextColor(...s),e.text("Document Information",20,l),l+=15,e.setFontSize(11),e.setFont("helvetica","normal"),e.setTextColor(...i);const r=[["Request Number:",a.request_number||"N/A"],["Document Type:",a.document_type||"N/A"],["Description:",a.description||"Payment for document request"]];r.forEach((([t,a])=>{e.setFont("helvetica","bold"),e.text(t,20,l),e.setFont("helvetica","normal");const n=e.splitTextToSize(a,110);e.text(n,80,l),l+=6*n.length})),l+=10,e.setFontSize(16),e.setFont("helvetica","bold"),e.setTextColor(...s),e.text("Payment Information",20,l),l+=15,e.setFontSize(11),e.setFont("helvetica","normal"),e.setTextColor(...i);const d=[["Payment Method:",a.payment_method||"Online Payment"],["Amount:",`₱${this.formatAmount(a.amount)}`],["Processing Fee:",`₱${this.formatAmount(a.processing_fee||0)}`],["Net Amount:",`₱${this.formatAmount(a.net_amount||a.amount)}`],["Currency:",a.currency||"PHP"]];d.forEach((([t,a])=>{e.setFont("helvetica","bold"),e.text(t,20,l),e.setFont("helvetica","normal"),e.text(a,80,l),l+=8})),l+=5,e.setFillColor(248,250,252),e.rect(15,l-5,180,15,"F"),e.setFontSize(14),e.setFont("helvetica","bold"),e.setTextColor(...n),e.text("Total Amount Paid:",20,l+5),e.setTextColor(...s),e.text(`₱${this.formatAmount(a.net_amount||a.amount)}`,120,l+5),l+=25,l<270&&(l=270),e.setFontSize(10),e.setFont("helvetica","normal"),e.setTextColor(128,128,128),e.text("This is a computer-generated receipt. No signature required.",105,l,{align:"center"}),e.text(`Generated on: ${(new Date).toLocaleString()}`,105,l+8,{align:"center"}),a.external_transaction_id&&e.text(`Transaction ID: ${a.external_transaction_id}`,105,l+16,{align:"center"});const u=`Receipt_${a.receipt_number||a.id}_${(new Date).toISOString().split("T")[0]}.pdf`;e.save(u),this.$toast&&this.$toast.success("Receipt downloaded successfully!")}catch(a){console.error("Failed to generate PDF:",a),this.$toast&&this.$toast.error("Failed to generate PDF receipt")}finally{this.downloadingReceipt=!1}},formatAmount(t){return t?parseFloat(t).toFixed(2):"0.00"},formatDate(t){if(!t)return"N/A";const a=new Date(t);return a.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},formatDateTime(t){if(!t)return"N/A";const a=new Date(t);return a.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},formatStatus(t){const a={succeeded:"Successful",pending:"Pending",processing:"Processing",failed:"Failed",cancelled:"Cancelled",refunded:"Refunded"};return a[t]||t}}},qt=e(1241);const Wt=(0,qt.A)(zt,[["render",$t],["__scopeId","data-v-52d09d44"]]);var Bt=Wt}}]);