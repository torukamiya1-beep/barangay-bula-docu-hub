"use strict";(self["webpackChunkbosfdr"]=self["webpackChunkbosfdr"]||[]).push([[444],{662:function(e,a,i){i.d(a,{TL:function(){return s},m_:function(){return t},y$:function(){return r}});i(8111),i(7588);const r={required:(e,a="Field")=>!e||"string"===typeof e&&""===e.trim()?`${a} is required`:null,email:e=>{if(!e)return null;const a=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return a.test(e)?null:"Please enter a valid email address"},username:e=>e?e.length<3||e.length>50?"Username must be between 3 and 50 characters":/^[a-zA-Z0-9_]+$/.test(e)?null:"Username can only contain letters, numbers, and underscores":null,password:e=>e?e.length<8?"Password must be at least 8 characters long":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(e)?null:"Password must contain at least one uppercase letter, one lowercase letter, and one number":null,confirmPassword:(e,a)=>e&&e!==a?"Passwords do not match":null,phoneNumber:e=>{if(!e)return null;const a=e.replace(/\s/g,""),i=/^09\d{9}$/;return i.test(a)?null:"Please enter a valid Philippine phone number (09XXXXXXXXX - 11 digits starting with 09)"},name:(e,a="Name")=>e?e.length<1||e.length>100?`${a} must be between 1 and 100 characters`:/^[a-zA-Z\s\-.]+$/.test(e)?null:`${a} can only contain letters, spaces, hyphens, and periods`:null,date:(e,a="Date")=>{if(!e)return null;const i=new Date(e);return isNaN(i.getTime())?`Please enter a valid ${a.toLowerCase()}`:null},birthDate:e=>{if(!e)return null;const a=new Date(e),i=new Date;if(isNaN(a.getTime()))return"Please enter a valid birth date";if(a>=i)return"Birth date must be in the past";const r=i.getFullYear()-a.getFullYear();return r>150?"Please enter a valid birth date":r<13?"You must be at least 13 years old to register":null},otp:e=>e?/^\d{4,10}$/.test(e)?null:"OTP must be a 4-10 digit number":null,address:(e,a="Address")=>e&&(e.length<1||e.length>100)?`${a} must be between 1 and 100 characters`:null,postalCode:e=>e?/^\d{4}$/.test(e)?null:"Postal code must be 4 digits":null,minLength:(e,a,i="Field")=>e&&e.length<a?`${i} must be at least ${a} characters`:null,maxLength:(e,a,i="Field")=>e&&e.length>a?`${i} must be less than ${a} characters`:null,exactLength:(e,a,i="Field")=>e&&e.length!==a?`${i} must be exactly ${a} characters`:null,passwordMatch:(e,a)=>e&&e!==a?"Passwords do not match":null,phone:e=>r.phoneNumber(e)},s=e=>{if(!Array.isArray(e))return{};const a={};return e.forEach((e=>{e.path&&(a[e.path]=e.msg||e.message)})),a},t=(e,a)=>{const i={...e};return delete i[a],i}},1137:function(e,a,i){i(4114),i(8111),i(2489),i(116);class r{constructor(){this.baseUrl="/api/address",this.cache={regions:null,provinces:null,cities:null,barangays:null}}async getRegions(){if(this.cache.regions)return this.cache.regions;try{const e=await fetch(`${this.baseUrl}/regions`);if(!e.ok)throw new Error(`Failed to fetch regions: ${e.status} ${e.statusText}`);const a=await e.json(),i=a.success?a.data:a;if(!Array.isArray(i))throw new Error("Invalid regions data format");return this.cache.regions=i,i}catch(e){throw console.error("Error fetching regions:",e),e}}async getProvincesByRegion(e){try{if(!this.cache.provinces){const e=await fetch(`${this.baseUrl}/provinces`);if(!e.ok)throw new Error("Failed to fetch provinces");const a=await e.json(),i=a.success?a.data:a;if(!Array.isArray(i))throw new Error("Invalid provinces data format");this.cache.provinces=i}return this.cache.provinces.filter((a=>a.region_code===e)).sort(((e,a)=>e.province_name.localeCompare(a.province_name)))}catch(a){throw console.error("Error fetching provinces:",a),a}}async getCitiesByProvince(e){try{if(!this.cache.cities){const e=await fetch(`${this.baseUrl}/cities`);if(!e.ok)throw new Error("Failed to fetch cities");const a=await e.json(),i=a.success?a.data:a;if(!Array.isArray(i))throw new Error("Invalid cities data format");this.cache.cities=i}return this.cache.cities.filter((a=>a.province_code===e)).sort(((e,a)=>e.city_name.localeCompare(a.city_name)))}catch(a){throw console.error("Error fetching cities:",a),a}}async getBarangaysByCity(e){try{if(!this.cache.barangays){const e=await fetch(`${this.baseUrl}/barangays`);if(!e.ok)throw new Error("Failed to fetch barangays");const a=await e.json(),i=a.success?a.data:a;if(!Array.isArray(i))throw new Error("Invalid barangays data format");this.cache.barangays=i}return this.cache.barangays.filter((a=>a.city_code===e)).sort(((e,a)=>e.brgy_name.localeCompare(a.brgy_name)))}catch(a){throw console.error("Error fetching barangays:",a),a}}async findBarangayBula(){try{if(!this.cache.barangays){const e=await fetch(`${this.baseUrl}/barangays`);if(!e.ok)throw new Error("Failed to fetch barangays");this.cache.barangays=await e.json()}const a=this.cache.barangays.filter((e=>e.brgy_name.toLowerCase().includes("bula"))),i=[];for(const r of a)try{const e=this.cache.cities?.find((e=>e.city_code===r.city_code)),a=this.cache.provinces?.find((e=>e.province_code===r.province_code)),s=this.cache.regions?.find((e=>e.region_code===r.region_code));i.push({...r,city_name:e?.city_name||"Unknown City",province_name:a?.province_name||"Unknown Province",region_name:s?.region_name||"Unknown Region"})}catch(e){console.warn("Error getting details for barangay:",r.brgy_name,e),i.push(r)}return i}catch(e){throw console.error("Error finding Barangay Bula:",e),e}}async getCompleteAddress(e){try{this.cache.barangays||await this.getBarangaysByCity("");const a=this.cache.barangays.find((a=>a.brgy_code===e));if(!a)throw new Error("Barangay not found");const i=this.cache.cities?.find((e=>e.city_code===a.city_code)),r=this.cache.provinces?.find((e=>e.province_code===a.province_code)),s=this.cache.regions?.find((e=>e.region_code===a.region_code));return{barangay:a.brgy_name,city:i?.city_name||"Unknown City",province:r?.province_name||"Unknown Province",region:s?.region_name||"Unknown Region",codes:{barangay:e,city:a.city_code,province:a.province_code,region:a.region_code}}}catch(a){throw console.error("Error getting complete address:",a),a}}clearCache(){this.cache={regions:null,provinces:null,cities:null,barangays:null}}async preloadAddressData(){try{await Promise.all([this.getRegions(),this.getProvincesByRegion("01"),this.getCitiesByProvince("0128"),this.getBarangaysByCity("012801")]),console.log("Address data preloaded successfully")}catch(e){console.warn("Failed to preload address data:",e)}}async validateAddress(e,a,i,r){try{const s=await this.getRegions(),t=s.find((a=>a.region_code===e));if(!t)return{valid:!1,error:"Invalid region"};const o=await this.getProvincesByRegion(e),n=o.find((e=>e.province_code===a));if(!n)return{valid:!1,error:"Invalid province for selected region"};const l=await this.getCitiesByProvince(a),c=l.find((e=>e.city_code===i));if(!c)return{valid:!1,error:"Invalid city for selected province"};const d=await this.getBarangaysByCity(i),u=d.find((e=>e.brgy_code===r));return u?{valid:!0}:{valid:!1,error:"Invalid barangay for selected city"}}catch(s){return{valid:!1,error:s.message}}}}const s=new r;a.A=s},1444:function(e,a,i){i.r(a),i.d(a,{default:function(){return Ua}});var r=i(6768),s=i(4232),t=i(5130);const o={class:"client-registration"},n={class:"container-fluid min-vh-100 d-flex align-items-center justify-content-center bg-light"},l={class:"row w-100 justify-content-center"},c={class:"col-12 col-md-10 col-lg-8 col-xl-7 col-xxl-6"},d={class:"card shadow-lg border-0"},u={class:"card-body p-4"},m={class:"row mb-4"},p={class:"col-12"},h={class:"d-flex justify-content-between align-items-center"},g={key:0,class:"step-content"},y={class:"mb-3"},f={key:0,class:"invalid-feedback"},v={class:"mb-3"},b={key:0,class:"invalid-feedback"},k={class:"mb-3"},_={class:"input-group"},L=["type"],C={key:0,class:"invalid-feedback d-block"},w={class:"mb-4"},F={key:0,class:"invalid-feedback"},E={class:"d-grid gap-2"},P=["disabled"],S={key:0,class:"spinner-border spinner-border-sm me-2"},B={key:1,class:"step-content"},x={class:"row"},I={class:"col-md-6 mb-3"},X={key:0,class:"invalid-feedback"},A={class:"col-md-6 mb-3"},R={key:0,class:"invalid-feedback"},$={class:"row"},M={class:"col-md-6 mb-3"},U={class:"col-md-6 mb-3"},D={key:0,class:"invalid-feedback"},V={class:"row"},q={class:"col-md-6 mb-3"},O={key:0,class:"invalid-feedback"},Q={class:"col-md-6 mb-3"},j={key:0,class:"invalid-feedback"},N={class:"row"},W={class:"col-md-6 mb-3"},T={key:0,class:"invalid-feedback"},J={key:0,class:"col-md-6 mb-3"},G={class:"address-section mt-4"},K={class:"address-selector-wrapper mb-4"},Y={class:"row"},z={class:"col-md-6 mb-3"},Z={class:"col-md-6 mb-3"},H={class:"row"},ee={class:"col-md-6 mb-3",style:{display:"none"}},ae={class:"col-md-6 mb-3"},ie={class:"residency-section mt-4"},re={class:"row"},se={class:"col-md-6 mb-3"},te={key:0,class:"invalid-feedback"},oe={class:"row"},ne={class:"col-md-6 mb-3"},le={class:"col-md-6 mb-3"},ce={class:"d-grid gap-2 d-md-flex justify-content-md-between"},de=["disabled"],ue={key:0,class:"spinner-border spinner-border-sm me-2"},me={key:2,class:"step-content"},pe={class:"mb-4"},he={class:"mb-3"},ge={key:0,class:"mt-2"},ye={class:"text-truncate"},fe=["onClick"],ve={class:"mb-3"},be={key:0,class:"mt-2"},ke={class:"text-truncate"},_e=["onClick"],Le={class:"mb-3"},Ce={key:0,class:"mt-2"},we={class:"text-truncate"},Fe=["onClick"],Ee={class:"mb-3"},Pe={key:0,class:"mt-2"},Se={class:"text-truncate"},Be=["onClick"],xe={class:"mb-3"},Ie={key:0,class:"mt-2"},Xe={class:"text-truncate"},Ae=["onClick"],Re={class:"d-grid gap-2 d-md-flex justify-content-md-between"},$e=["disabled"],Me={key:0,class:"spinner-border spinner-border-sm me-2"},Ue={key:3,class:"step-content"},De={class:"text-center"},Ve={class:"text-muted mb-4"},qe={class:"mb-3"},Oe={key:0,class:"invalid-feedback"},Qe={class:"d-grid gap-2 mb-3"},je=["disabled"],Ne={class:"text-center"},We=["disabled"],Te={key:0,class:"spinner-border spinner-border-sm me-2"},Je={key:4,class:"step-content text-center"},Ge={class:"d-grid gap-2"},Ke={key:5,class:"alert alert-danger mt-3",role:"alert"},Ye={key:6,class:"alert alert-success mt-3",role:"alert"},ze={class:"card-footer text-center py-3"},Ze={class:"mb-0 text-muted"};function He(e,a,i,He,ea,aa){const ia=(0,r.g2)("AddressSelector"),ra=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",o,[(0,r.Lk)("div",n,[(0,r.Lk)("div",l,[(0,r.Lk)("div",c,[(0,r.Lk)("div",d,[a[122]||(a[122]=(0,r.Lk)("div",{class:"card-header bg-primary text-white text-center py-4"},[(0,r.Lk)("h3",{class:"mb-0"}," Barangay Bula Document Hub "),(0,r.Lk)("p",{class:"mb-0 mt-2"},[(0,r.Lk)("i",{class:"fas fa-user-plus me-2"}),(0,r.eW)(" Create an account ")])],-1)),(0,r.Lk)("div",u,[(0,r.Lk)("div",m,[(0,r.Lk)("div",p,[(0,r.Lk)("div",h,[(0,r.Lk)("div",{class:(0,s.C4)(["step-indicator",{active:e.currentStep>=1,completed:e.currentStep>1}])},a[55]||(a[55]=[(0,r.Lk)("div",{class:"step-number"},"1",-1),(0,r.Lk)("div",{class:"step-label"},"Account",-1)]),2),(0,r.Lk)("div",{class:(0,s.C4)(["step-line",{active:e.currentStep>1}])},null,2),(0,r.Lk)("div",{class:(0,s.C4)(["step-indicator",{active:e.currentStep>=2,completed:e.currentStep>2}])},a[56]||(a[56]=[(0,r.Lk)("div",{class:"step-number"},"2",-1),(0,r.Lk)("div",{class:"step-label"},"Profile",-1)]),2),(0,r.Lk)("div",{class:(0,s.C4)(["step-line",{active:e.currentStep>2}])},null,2),(0,r.Lk)("div",{class:(0,s.C4)(["step-indicator",{active:e.currentStep>=3,completed:e.currentStep>3}])},a[57]||(a[57]=[(0,r.Lk)("div",{class:"step-number"},"3",-1),(0,r.Lk)("div",{class:"step-label"},"Documents",-1)]),2),(0,r.Lk)("div",{class:(0,s.C4)(["step-line",{active:e.currentStep>3}])},null,2),(0,r.Lk)("div",{class:(0,s.C4)(["step-indicator",{active:e.currentStep>=4,completed:e.currentStep>4}])},a[58]||(a[58]=[(0,r.Lk)("div",{class:"step-number"},"4",-1),(0,r.Lk)("div",{class:"step-label"},"Verify",-1)]),2)])])]),1===e.currentStep?((0,r.uX)(),(0,r.CE)("div",g,[a[64]||(a[64]=(0,r.Lk)("h5",{class:"mb-3"},"Create Your Account",-1)),(0,r.Lk)("form",{onSubmit:a[13]||(a[13]=(0,t.D$)(((...a)=>e.submitAccountForm&&e.submitAccountForm(...a)),["prevent"]))},[(0,r.Lk)("div",y,[a[59]||(a[59]=(0,r.Lk)("label",{for:"username",class:"form-label"},"Username",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:(0,s.C4)(["form-control",{"is-invalid":e.errors.username}]),id:"username","onUpdate:modelValue":a[0]||(a[0]=a=>e.accountForm.username=a),onBlur:a[1]||(a[1]=a=>e.validateField("username")),onInput:a[2]||(a[2]=a=>e.clearFieldError("username")),placeholder:"Enter your username",required:""},null,34),[[t.Jo,e.accountForm.username]]),e.errors.username?((0,r.uX)(),(0,r.CE)("div",f,(0,s.v_)(e.errors.username),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",v,[a[60]||(a[60]=(0,r.Lk)("label",{for:"email",class:"form-label"},"Email Address",-1)),(0,r.bo)((0,r.Lk)("input",{type:"email",class:(0,s.C4)(["form-control",{"is-invalid":e.errors.email}]),id:"email","onUpdate:modelValue":a[3]||(a[3]=a=>e.accountForm.email=a),onBlur:a[4]||(a[4]=a=>e.validateField("email")),onInput:a[5]||(a[5]=a=>e.clearFieldError("email")),placeholder:"Enter your email address",required:""},null,34),[[t.Jo,e.accountForm.email]]),e.errors.email?((0,r.uX)(),(0,r.CE)("div",b,(0,s.v_)(e.errors.email),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",k,[a[61]||(a[61]=(0,r.Lk)("label",{for:"password",class:"form-label"},"Password",-1)),(0,r.Lk)("div",_,[(0,r.bo)((0,r.Lk)("input",{type:e.showPassword?"text":"password",class:(0,s.C4)(["form-control",{"is-invalid":e.errors.password}]),id:"password","onUpdate:modelValue":a[6]||(a[6]=a=>e.accountForm.password=a),onBlur:a[7]||(a[7]=a=>e.validateField("password")),onInput:a[8]||(a[8]=a=>e.clearFieldError("password")),placeholder:"Enter your password",required:""},null,42,L),[[t.hp,e.accountForm.password]]),(0,r.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:a[9]||(a[9]=a=>e.showPassword=!e.showPassword)},[(0,r.Lk)("i",{class:(0,s.C4)(e.showPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])]),e.errors.password?((0,r.uX)(),(0,r.CE)("div",C,(0,s.v_)(e.errors.password),1)):(0,r.Q3)("",!0),a[62]||(a[62]=(0,r.Lk)("div",{class:"form-text"}," Password must be at least 8 characters with uppercase, lowercase, and number. ",-1))]),(0,r.Lk)("div",w,[a[63]||(a[63]=(0,r.Lk)("label",{for:"confirmPassword",class:"form-label"},"Confirm Password",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",class:(0,s.C4)(["form-control",{"is-invalid":e.errors.confirmPassword}]),id:"confirmPassword","onUpdate:modelValue":a[10]||(a[10]=a=>e.accountForm.confirmPassword=a),onBlur:a[11]||(a[11]=a=>e.validateField("confirmPassword")),onInput:a[12]||(a[12]=a=>e.clearFieldError("confirmPassword")),placeholder:"Confirm your password",required:""},null,34),[[t.Jo,e.accountForm.confirmPassword]]),e.errors.confirmPassword?((0,r.uX)(),(0,r.CE)("div",F,(0,s.v_)(e.errors.confirmPassword),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",E,[(0,r.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:e.loading},[e.loading?((0,r.uX)(),(0,r.CE)("span",S)):(0,r.Q3)("",!0),(0,r.eW)(" "+(0,s.v_)(e.loading?"Creating Account...":"Create Account"),1)],8,P)])],32)])):(0,r.Q3)("",!0),2===e.currentStep?((0,r.uX)(),(0,r.CE)("div",B,[a[86]||(a[86]=(0,r.Lk)("h5",{class:"mb-3"},"Complete Your Profile",-1)),(0,r.Lk)("form",{onSubmit:a[42]||(a[42]=(0,t.D$)(((...a)=>e.submitProfileForm&&e.submitProfileForm(...a)),["prevent"]))},[(0,r.Lk)("div",x,[(0,r.Lk)("div",I,[a[65]||(a[65]=(0,r.Lk)("label",{for:"firstName",class:"form-label"},"First Name",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:(0,s.C4)(["form-control",{"is-invalid":e.errors.first_name}]),id:"firstName","onUpdate:modelValue":a[14]||(a[14]=a=>e.profileForm.first_name=a),onBlur:a[15]||(a[15]=a=>e.validateField("first_name")),onInput:a[16]||(a[16]=a=>e.clearFieldError("first_name")),required:""},null,34),[[t.Jo,e.profileForm.first_name]]),e.errors.first_name?((0,r.uX)(),(0,r.CE)("div",X,(0,s.v_)(e.errors.first_name),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",A,[a[66]||(a[66]=(0,r.Lk)("label",{for:"lastName",class:"form-label"},"Last Name",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:(0,s.C4)(["form-control",{"is-invalid":e.errors.last_name}]),id:"lastName","onUpdate:modelValue":a[17]||(a[17]=a=>e.profileForm.last_name=a),onBlur:a[18]||(a[18]=a=>e.validateField("last_name")),onInput:a[19]||(a[19]=a=>e.clearFieldError("last_name")),required:""},null,34),[[t.Jo,e.profileForm.last_name]]),e.errors.last_name?((0,r.uX)(),(0,r.CE)("div",R,(0,s.v_)(e.errors.last_name),1)):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",$,[(0,r.Lk)("div",M,[a[67]||(a[67]=(0,r.Lk)("label",{for:"middleName",class:"form-label"},"Middle Name (Optional)",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control",id:"middleName","onUpdate:modelValue":a[20]||(a[20]=a=>e.profileForm.middle_name=a)},null,512),[[t.Jo,e.profileForm.middle_name]])]),(0,r.Lk)("div",U,[a[68]||(a[68]=(0,r.Lk)("label",{for:"birthDate",class:"form-label"},"Birth Date",-1)),(0,r.bo)((0,r.Lk)("input",{type:"date",class:(0,s.C4)(["form-control",{"is-invalid":e.errors.birth_date}]),id:"birthDate","onUpdate:modelValue":a[21]||(a[21]=a=>e.profileForm.birth_date=a),onBlur:a[22]||(a[22]=a=>e.validateField("birth_date")),onInput:a[23]||(a[23]=a=>e.clearFieldError("birth_date")),required:""},null,34),[[t.Jo,e.profileForm.birth_date]]),e.errors.birth_date?((0,r.uX)(),(0,r.CE)("div",D,(0,s.v_)(e.errors.birth_date),1)):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",V,[(0,r.Lk)("div",q,[a[70]||(a[70]=(0,r.Lk)("label",{for:"civilStatus",class:"form-label"},"Civil Status",-1)),(0,r.bo)((0,r.Lk)("select",{class:(0,s.C4)(["form-select",{"is-invalid":e.errors.civil_status_id}]),id:"civilStatus","onUpdate:modelValue":a[24]||(a[24]=a=>e.profileForm.civil_status_id=a),onChange:a[25]||(a[25]=a=>e.clearFieldError("civil_status_id")),required:""},a[69]||(a[69]=[(0,r.Fv)('<option value="" data-v-35766b8d>Select Civil Status</option><option value="1" data-v-35766b8d>Single</option><option value="2" data-v-35766b8d>Married</option><option value="3" data-v-35766b8d>Divorced</option><option value="4" data-v-35766b8d>Widowed</option><option value="5" data-v-35766b8d>Separated</option>',6)]),34),[[t.u1,e.profileForm.civil_status_id]]),e.errors.civil_status_id?((0,r.uX)(),(0,r.CE)("div",O,(0,s.v_)(e.errors.civil_status_id),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Q,[a[72]||(a[72]=(0,r.Lk)("label",{for:"gender",class:"form-label"},"Gender",-1)),(0,r.bo)((0,r.Lk)("select",{class:(0,s.C4)(["form-select",{"is-invalid":e.errors.gender}]),id:"gender","onUpdate:modelValue":a[26]||(a[26]=a=>e.profileForm.gender=a),onChange:a[27]||(a[27]=(...a)=>e.handleGenderChange&&e.handleGenderChange(...a)),required:""},a[71]||(a[71]=[(0,r.Lk)("option",{value:""},"Select Gender",-1),(0,r.Lk)("option",{value:"male"},"Male",-1),(0,r.Lk)("option",{value:"female"},"Female",-1)]),34),[[t.u1,e.profileForm.gender]]),e.errors.gender?((0,r.uX)(),(0,r.CE)("div",j,(0,s.v_)(e.errors.gender),1)):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",N,[(0,r.Lk)("div",W,[a[73]||(a[73]=(0,r.Lk)("label",{for:"phoneNumber",class:"form-label"},"Phone Number",-1)),(0,r.bo)((0,r.Lk)("input",{type:"tel",class:(0,s.C4)(["form-control",{"is-invalid":e.errors.phone_number}]),id:"phoneNumber","onUpdate:modelValue":a[28]||(a[28]=a=>e.profileForm.phone_number=a),onBlur:a[29]||(a[29]=a=>e.validateField("phone_number")),onInput:a[30]||(a[30]=(...a)=>e.handlePhoneInput&&e.handlePhoneInput(...a)),placeholder:"09123456789",maxlength:"11",pattern:"[0-9]*",required:""},null,34),[[t.Jo,e.profileForm.phone_number]]),e.errors.phone_number?((0,r.uX)(),(0,r.CE)("div",T,(0,s.v_)(e.errors.phone_number),1)):(0,r.Q3)("",!0)]),"male"===e.profileForm.gender?((0,r.uX)(),(0,r.CE)("div",J,[a[75]||(a[75]=(0,r.Lk)("label",{for:"suffix",class:"form-label"},"Suffix (Optional)",-1)),(0,r.bo)((0,r.Lk)("select",{class:"form-select",id:"suffix","onUpdate:modelValue":a[31]||(a[31]=a=>e.profileForm.suffix=a)},a[74]||(a[74]=[(0,r.Fv)('<option value="" data-v-35766b8d>Select Suffix (Optional)</option><option value="JR." data-v-35766b8d>JR.</option><option value="SR." data-v-35766b8d>SR.</option><option value="II" data-v-35766b8d>II</option><option value="III" data-v-35766b8d>III</option><option value="IV" data-v-35766b8d>IV</option><option value="V" data-v-35766b8d>V</option><option value="VI" data-v-35766b8d>VI</option><option value="VII" data-v-35766b8d>VII</option><option value="VIII" data-v-35766b8d>VIII</option><option value="IX" data-v-35766b8d>IX</option><option value="X" data-v-35766b8d>X</option>',12)]),512),[[t.u1,e.profileForm.suffix]])])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",G,[a[78]||(a[78]=(0,r.Lk)("h6",{class:"mb-4"},[(0,r.Lk)("i",{class:"fas fa-map-marker-alt me-2 text-primary"}),(0,r.eW)(" Address Information ")],-1)),(0,r.Lk)("div",K,[(0,r.bF)(ia,{ref:"addressSelector","validation-errors":e.addressErrors,onAddressChange:e.onAddressChange},null,8,["validation-errors","onAddressChange"])]),(0,r.Lk)("div",Y,[(0,r.Lk)("div",z,[a[76]||(a[76]=(0,r.Lk)("label",{for:"houseNumber",class:"form-label"},"House Number (Optional)",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control",id:"houseNumber","onUpdate:modelValue":a[32]||(a[32]=a=>e.profileForm.house_number=a),placeholder:"e.g., 123, Blk 5 Lot 10"},null,512),[[t.Jo,e.profileForm.house_number]])]),(0,r.Lk)("div",Z,[a[77]||(a[77]=(0,r.Lk)("label",{for:"street",class:"form-label"},"Street (Optional)",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control",id:"street","onUpdate:modelValue":a[33]||(a[33]=a=>e.profileForm.street=a),placeholder:"e.g., Main Street, Rizal Avenue"},null,512),[[t.Jo,e.profileForm.street]])])])]),(0,r.Lk)("div",H,[(0,r.Lk)("div",ee,[a[79]||(a[79]=(0,r.Lk)("label",{for:"subdivision",class:"form-label"},"Subdivision (Optional)",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control",id:"subdivision","onUpdate:modelValue":a[34]||(a[34]=a=>e.profileForm.subdivision=a),placeholder:"e.g., Green Valley, Sunrise Village"},null,512),[[t.Jo,e.profileForm.subdivision]])]),(0,r.Lk)("div",ae,[a[80]||(a[80]=(0,r.Lk)("label",{for:"postalCode",class:"form-label"},"Postal Code (Optional)",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control",id:"postalCode","onUpdate:modelValue":a[35]||(a[35]=a=>e.profileForm.postal_code=a),placeholder:"e.g., 4027",maxlength:"10"},null,512),[[t.Jo,e.profileForm.postal_code]])])]),(0,r.Lk)("div",ie,[a[82]||(a[82]=(0,r.Lk)("h6",{class:"mb-3"},[(0,r.Lk)("i",{class:"fas fa-clock me-2 text-primary"}),(0,r.eW)(" Residency Information ")],-1)),(0,r.Lk)("div",re,[(0,r.Lk)("div",se,[a[81]||(a[81]=(0,r.Lk)("label",{for:"nationality",class:"form-label"},"Nationality",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:(0,s.C4)(["form-control",{"is-invalid":e.errors.nationality}]),id:"nationality","onUpdate:modelValue":a[36]||(a[36]=a=>e.profileForm.nationality=a),onBlur:a[37]||(a[37]=a=>e.validateField("nationality")),onInput:a[38]||(a[38]=a=>e.clearFieldError("nationality")),required:""},null,34),[[t.Jo,e.profileForm.nationality]]),e.errors.nationality?((0,r.uX)(),(0,r.CE)("div",te,(0,s.v_)(e.errors.nationality),1)):(0,r.Q3)("",!0)])])]),(0,r.Lk)("div",oe,[(0,r.Lk)("div",ne,[a[83]||(a[83]=(0,r.Lk)("label",{for:"yearsOfResidency",class:"form-label"},"Years of Residency (Optional)",-1)),(0,r.bo)((0,r.Lk)("input",{type:"number",class:"form-control",id:"yearsOfResidency","onUpdate:modelValue":a[39]||(a[39]=a=>e.profileForm.years_of_residency=a),placeholder:"e.g., 5",min:"0",max:"100"},null,512),[[t.Jo,e.profileForm.years_of_residency,void 0,{number:!0}]])]),(0,r.Lk)("div",le,[a[84]||(a[84]=(0,r.Lk)("label",{for:"monthsOfResidency",class:"form-label"},"Additional Months (Optional)",-1)),(0,r.bo)((0,r.Lk)("input",{type:"number",class:"form-control",id:"monthsOfResidency","onUpdate:modelValue":a[40]||(a[40]=a=>e.profileForm.months_of_residency=a),placeholder:"e.g., 6",min:"0",max:"11"},null,512),[[t.Jo,e.profileForm.months_of_residency,void 0,{number:!0}]])])]),(0,r.Lk)("div",ce,[(0,r.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:a[41]||(a[41]=(...a)=>e.goToPreviousStep&&e.goToPreviousStep(...a))},a[85]||(a[85]=[(0,r.Lk)("i",{class:"fas fa-arrow-left me-2"},null,-1),(0,r.eW)(" Back ")])),(0,r.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:e.loading},[e.loading?((0,r.uX)(),(0,r.CE)("span",ue)):(0,r.Q3)("",!0),(0,r.eW)(" "+(0,s.v_)(e.loading?"Saving Profile...":"Complete Registration"),1)],8,de)])],32)])):(0,r.Q3)("",!0),3===e.currentStep?((0,r.uX)(),(0,r.CE)("div",me,[a[104]||(a[104]=(0,r.Lk)("h5",{class:"mb-3"},"Proof of Residency",-1)),a[105]||(a[105]=(0,r.Lk)("div",{class:"alert alert-info mb-4"},[(0,r.Lk)("i",{class:"fas fa-info-circle me-2"}),(0,r.Lk)("strong",null,"Required:"),(0,r.eW)(" Please upload at least one document that proves you are a resident of Barangay Bula. ")],-1)),(0,r.Lk)("form",{onSubmit:a[49]||(a[49]=(0,t.D$)(((...a)=>e.submitDocumentForm&&e.submitDocumentForm(...a)),["prevent"]))},[(0,r.Lk)("div",pe,[a[102]||(a[102]=(0,r.Lk)("h6",{class:"mb-3"},"Upload Proof of Residency Documents",-1)),(0,r.Lk)("div",he,[a[88]||(a[88]=(0,r.Lk)("label",{class:"form-label"},[(0,r.Lk)("i",{class:"fas fa-file-invoice me-2"}),(0,r.eW)(" Utility Bill (Electricity, Water, Internet) ")],-1)),(0,r.Lk)("input",{type:"file",class:"form-control",onChange:a[43]||(a[43]=a=>e.handleFileUpload(a,"utility_bill")),accept:".jpg,.jpeg,.png,.pdf,.webp",multiple:""},null,32),a[89]||(a[89]=(0,r.Lk)("small",{class:"form-text text-muted"}," Upload recent utility bills showing your name and Barangay Bula address ",-1)),e.uploadedFiles.utility_bill&&e.uploadedFiles.utility_bill.length>0?((0,r.uX)(),(0,r.CE)("div",ge,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.uploadedFiles.utility_bill,((i,t)=>((0,r.uX)(),(0,r.CE)("div",{key:t,class:"d-flex align-items-center justify-content-between bg-light p-2 rounded mb-1"},[(0,r.Lk)("span",ye,(0,s.v_)(i.name),1),(0,r.Lk)("button",{type:"button",class:"btn btn-sm btn-outline-danger",onClick:a=>e.removeFile("utility_bill",t)},a[87]||(a[87]=[(0,r.Lk)("i",{class:"fas fa-times"},null,-1)]),8,fe)])))),128))])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",ve,[a[91]||(a[91]=(0,r.Lk)("label",{class:"form-label"},[(0,r.Lk)("i",{class:"fas fa-certificate me-2"}),(0,r.eW)(" Barangay Certificate of Residency ")],-1)),(0,r.Lk)("input",{type:"file",class:"form-control",onChange:a[44]||(a[44]=a=>e.handleFileUpload(a,"barangay_certificate")),accept:".jpg,.jpeg,.png,.pdf,.webp"},null,32),a[92]||(a[92]=(0,r.Lk)("small",{class:"form-text text-muted"}," Official certificate from Barangay Bula confirming your residency ",-1)),e.uploadedFiles.barangay_certificate&&e.uploadedFiles.barangay_certificate.length>0?((0,r.uX)(),(0,r.CE)("div",be,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.uploadedFiles.barangay_certificate,((i,t)=>((0,r.uX)(),(0,r.CE)("div",{key:t,class:"d-flex align-items-center justify-content-between bg-light p-2 rounded mb-1"},[(0,r.Lk)("span",ke,(0,s.v_)(i.name),1),(0,r.Lk)("button",{type:"button",class:"btn btn-sm btn-outline-danger",onClick:a=>e.removeFile("barangay_certificate",t)},a[90]||(a[90]=[(0,r.Lk)("i",{class:"fas fa-times"},null,-1)]),8,_e)])))),128))])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Le,[a[94]||(a[94]=(0,r.Lk)("label",{class:"form-label"},[(0,r.Lk)("i",{class:"fas fa-id-card me-2"}),(0,r.eW)(" Valid ID with Barangay Bula Address ")],-1)),(0,r.Lk)("input",{type:"file",class:"form-control",onChange:a[45]||(a[45]=a=>e.handleFileUpload(a,"valid_id")),accept:".jpg,.jpeg,.png,.pdf,.webp",multiple:""},null,32),a[95]||(a[95]=(0,r.Lk)("small",{class:"form-text text-muted"}," Government-issued ID showing your address in Barangay Bula ",-1)),e.uploadedFiles.valid_id&&e.uploadedFiles.valid_id.length>0?((0,r.uX)(),(0,r.CE)("div",Ce,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.uploadedFiles.valid_id,((i,t)=>((0,r.uX)(),(0,r.CE)("div",{key:t,class:"d-flex align-items-center justify-content-between bg-light p-2 rounded mb-1"},[(0,r.Lk)("span",we,(0,s.v_)(i.name),1),(0,r.Lk)("button",{type:"button",class:"btn btn-sm btn-outline-danger",onClick:a=>e.removeFile("valid_id",t)},a[93]||(a[93]=[(0,r.Lk)("i",{class:"fas fa-times"},null,-1)]),8,Fe)])))),128))])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Ee,[a[97]||(a[97]=(0,r.Lk)("label",{class:"form-label"},[(0,r.Lk)("i",{class:"fas fa-file-contract me-2"}),(0,r.eW)(" Lease Contract or Property Documents ")],-1)),(0,r.Lk)("input",{type:"file",class:"form-control",onChange:a[46]||(a[46]=a=>e.handleFileUpload(a,"lease_contract")),accept:".jpg,.jpeg,.png,.pdf,.webp"},null,32),a[98]||(a[98]=(0,r.Lk)("small",{class:"form-text text-muted"}," Rental agreement or property ownership documents for Barangay Bula ",-1)),e.uploadedFiles.lease_contract&&e.uploadedFiles.lease_contract.length>0?((0,r.uX)(),(0,r.CE)("div",Pe,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.uploadedFiles.lease_contract,((i,t)=>((0,r.uX)(),(0,r.CE)("div",{key:t,class:"d-flex align-items-center justify-content-between bg-light p-2 rounded mb-1"},[(0,r.Lk)("span",Se,(0,s.v_)(i.name),1),(0,r.Lk)("button",{type:"button",class:"btn btn-sm btn-outline-danger",onClick:a=>e.removeFile("lease_contract",t)},a[96]||(a[96]=[(0,r.Lk)("i",{class:"fas fa-times"},null,-1)]),8,Be)])))),128))])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",xe,[a[100]||(a[100]=(0,r.Lk)("label",{class:"form-label"},[(0,r.Lk)("i",{class:"fas fa-file-alt me-2"}),(0,r.eW)(" Other Supporting Documents ")],-1)),(0,r.Lk)("input",{type:"file",class:"form-control",onChange:a[47]||(a[47]=a=>e.handleFileUpload(a,"other")),accept:".jpg,.jpeg,.png,.pdf,.webp",multiple:""},null,32),a[101]||(a[101]=(0,r.Lk)("small",{class:"form-text text-muted"}," Any other documents that can prove your residency in Barangay Bula ",-1)),e.uploadedFiles.other&&e.uploadedFiles.other.length>0?((0,r.uX)(),(0,r.CE)("div",Ie,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.uploadedFiles.other,((i,t)=>((0,r.uX)(),(0,r.CE)("div",{key:t,class:"d-flex align-items-center justify-content-between bg-light p-2 rounded mb-1"},[(0,r.Lk)("span",Xe,(0,s.v_)(i.name),1),(0,r.Lk)("button",{type:"button",class:"btn btn-sm btn-outline-danger",onClick:a=>e.removeFile("other",t)},a[99]||(a[99]=[(0,r.Lk)("i",{class:"fas fa-times"},null,-1)]),8,Ae)])))),128))])):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",Re,[(0,r.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:a[48]||(a[48]=(...a)=>e.goToPreviousStep&&e.goToPreviousStep(...a))},a[103]||(a[103]=[(0,r.Lk)("i",{class:"fas fa-arrow-left me-2"},null,-1),(0,r.eW)(" Back ")])),(0,r.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:e.loading||!e.hasUploadedFiles},[e.loading?((0,r.uX)(),(0,r.CE)("span",Me)):(0,r.Q3)("",!0),(0,r.eW)(" "+(0,s.v_)(e.loading?"Uploading Documents...":"Upload Documents"),1)],8,$e)])],32)])):(0,r.Q3)("",!0),4===e.currentStep&&e.verificationMethodSelected&&e.profileForm?((0,r.uX)(),(0,r.CE)("div",Ue,[(0,r.Lk)("div",De,[a[112]||(a[112]=(0,r.Lk)("div",{class:"mb-4"},[(0,r.Lk)("i",{class:"fas fa-shield-alt text-primary",style:{"font-size":"3rem"}})],-1)),a[113]||(a[113]=(0,r.Lk)("h5",{class:"mb-3"},"Verify Your Account",-1)),(0,r.Lk)("p",Ve,[a[106]||(a[106]=(0,r.eW)(" We've sent the ")),a[107]||(a[107]=(0,r.Lk)("strong",null,"verification code",-1)),a[108]||(a[108]=(0,r.eW)(" to your email ")),(0,r.Lk)("strong",null,(0,s.v_)(e.accountForm?.email),1),a[109]||(a[109]=(0,r.eW)(". ")),a[110]||(a[110]=(0,r.Lk)("br",null,null,-1)),a[111]||(a[111]=(0,r.eW)("Enter the verification code you received. "))])]),(0,r.Lk)("form",{onSubmit:a[53]||(a[53]=(0,t.D$)(((...a)=>e.submitVerificationForm&&e.submitVerificationForm(...a)),["prevent"]))},[(0,r.Lk)("div",qe,[a[114]||(a[114]=(0,r.Lk)("label",{for:"otp",class:"form-label"},"Verification Code",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:(0,s.C4)(["form-control text-center",{"is-invalid":e.errors.otp}]),id:"otp","onUpdate:modelValue":a[50]||(a[50]=a=>e.verificationForm.otp=a),onInput:a[51]||(a[51]=a=>e.clearFieldError("otp")),placeholder:"Enter 6-digit code",maxlength:"6",required:""},null,34),[[t.Jo,e.verificationForm.otp]]),e.errors.otp?((0,r.uX)(),(0,r.CE)("div",Oe,(0,s.v_)(e.errors.otp),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Qe,[(0,r.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:e.loading}," Send ",8,je)]),(0,r.Lk)("div",Ne,[a[115]||(a[115]=(0,r.Lk)("p",{class:"text-muted mb-2"},"Didn't receive the code?",-1)),(0,r.Lk)("button",{type:"button",class:"btn btn-link p-0",onClick:a[52]||(a[52]=(...a)=>e.resendVerificationCode&&e.resendVerificationCode(...a)),disabled:e.resendLoading||e.resendCooldown>0},[e.resendLoading?((0,r.uX)(),(0,r.CE)("span",Te)):(0,r.Q3)("",!0),(0,r.eW)(" "+(0,s.v_)(e.resendCooldown>0?`Resend in ${e.resendCooldown}s`:"Resend Code"),1)],8,We)])],32)])):(0,r.Q3)("",!0),5===e.currentStep?((0,r.uX)(),(0,r.CE)("div",Je,[a[117]||(a[117]=(0,r.Fv)('<div class="mb-4" data-v-35766b8d><i class="fas fa-check-circle text-success" style="font-size:4rem;" data-v-35766b8d></i></div><h4 class="text-success mb-3" data-v-35766b8d>Registration Complete!</h4><div class="alert alert-success mb-4" data-v-35766b8d><i class="fas fa-check-circle me-2" data-v-35766b8d></i><strong data-v-35766b8d>Account Status:</strong> Active </div><p class="text-muted mb-4" data-v-35766b8d> Your account has been created successfully! You can now log in to access the system. To request barangay documents, you&#39;ll need to upload residency verification documents for admin review. </p>',4)),(0,r.Lk)("div",Ge,[(0,r.Lk)("button",{type:"button",class:"btn btn-primary",onClick:a[54]||(a[54]=(...a)=>e.goToLogin&&e.goToLogin(...a))},a[116]||(a[116]=[(0,r.Lk)("i",{class:"fas fa-sign-in-alt me-2"},null,-1),(0,r.eW)(" Go to Login ")]))])])):(0,r.Q3)("",!0),e.errorMessage?((0,r.uX)(),(0,r.CE)("div",Ke,[a[118]||(a[118]=(0,r.Lk)("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),(0,r.eW)(" "+(0,s.v_)(e.errorMessage),1)])):(0,r.Q3)("",!0),e.successMessage?((0,r.uX)(),(0,r.CE)("div",Ye,[a[119]||(a[119]=(0,r.Lk)("i",{class:"fas fa-check-circle me-2"},null,-1)),(0,r.eW)(" "+(0,s.v_)(e.successMessage),1)])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",ze,[(0,r.Lk)("p",Ze,[a[121]||(a[121]=(0,r.eW)(" Already have an account? ")),(0,r.bF)(ra,{to:"/client/login",class:"text-decoration-none"},{default:(0,r.k6)((()=>a[120]||(a[120]=[(0,r.eW)(" Sign in here ")]))),_:1,__:[120]})])])])])])])])}i(4114),i(8111),i(2489),i(7588),i(3579);var ea=i(6212),aa=i(662);const ia={class:"address-selector"},ra={class:"mb-3"},sa=["for"],ta=["id","disabled"],oa={value:""},na=["value"],la={key:0,class:"invalid-feedback"},ca={class:"mb-3"},da=["for"],ua=["id","disabled"],ma={value:""},pa=["value"],ha={key:0,class:"invalid-feedback"},ga={class:"mb-3"},ya=["for"],fa=["id","disabled"],va={value:""},ba=["value"],ka={key:0,class:"invalid-feedback"},_a={class:"mb-3"},La=["for"],Ca=["id","disabled"],wa={value:""},Fa=["value"],Ea={key:0,class:"invalid-feedback"},Pa={key:4,class:"address-display"},Sa={key:5,class:"alert alert-danger"};function Ba(e,a,i,o,n,l){return(0,r.uX)(),(0,r.CE)("div",ia,[(0,r.bo)((0,r.Lk)("div",ra,[(0,r.Lk)("label",{for:l.regionId,class:"form-label"},a[12]||(a[12]=[(0,r.eW)(" Region "),(0,r.Lk)("span",{class:"text-danger"},"*",-1)]),8,sa),(0,r.bo)((0,r.Lk)("select",{id:l.regionId,class:(0,s.C4)(["form-select",{"is-invalid":n.errors.region}]),"onUpdate:modelValue":a[0]||(a[0]=e=>n.selectedRegion=e),onChange:a[1]||(a[1]=(...e)=>l.onRegionChange&&l.onRegionChange(...e)),disabled:n.loading.regions,required:""},[(0,r.Lk)("option",oa,(0,s.v_)(n.loading.regions?"Loading regions...":"Select Region"),1),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.regions,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.region_code,value:e.region_code},(0,s.v_)(e.region_name),9,na)))),128))],42,ta),[[t.u1,n.selectedRegion]]),n.errors.region?((0,r.uX)(),(0,r.CE)("div",la,(0,s.v_)(n.errors.region),1)):(0,r.Q3)("",!0)],512),[[t.aG,!n.hideDropdowns]]),n.hideDropdowns?(0,r.bo)(((0,r.uX)(),(0,r.CE)("input",{key:0,type:"hidden","onUpdate:modelValue":a[2]||(a[2]=e=>n.selectedRegion=e)},null,512)),[[t.Jo,n.selectedRegion]]):(0,r.Q3)("",!0),(0,r.bo)((0,r.Lk)("div",ca,[(0,r.Lk)("label",{for:l.provinceId,class:"form-label"},a[13]||(a[13]=[(0,r.eW)(" Province "),(0,r.Lk)("span",{class:"text-danger"},"*",-1)]),8,da),(0,r.bo)((0,r.Lk)("select",{id:l.provinceId,class:(0,s.C4)(["form-select",{"is-invalid":n.errors.province}]),"onUpdate:modelValue":a[3]||(a[3]=e=>n.selectedProvince=e),onChange:a[4]||(a[4]=(...e)=>l.onProvinceChange&&l.onProvinceChange(...e)),disabled:!n.selectedRegion||n.loading.provinces,required:""},[(0,r.Lk)("option",ma,(0,s.v_)(l.getProvinceOptionText()),1),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.provinces,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.province_code,value:e.province_code},(0,s.v_)(e.province_name),9,pa)))),128))],42,ua),[[t.u1,n.selectedProvince]]),n.errors.province?((0,r.uX)(),(0,r.CE)("div",ha,(0,s.v_)(n.errors.province),1)):(0,r.Q3)("",!0)],512),[[t.aG,!n.hideDropdowns]]),n.hideDropdowns?(0,r.bo)(((0,r.uX)(),(0,r.CE)("input",{key:1,type:"hidden","onUpdate:modelValue":a[5]||(a[5]=e=>n.selectedProvince=e)},null,512)),[[t.Jo,n.selectedProvince]]):(0,r.Q3)("",!0),(0,r.bo)((0,r.Lk)("div",ga,[(0,r.Lk)("label",{for:l.cityId,class:"form-label"},a[14]||(a[14]=[(0,r.eW)(" City/Municipality "),(0,r.Lk)("span",{class:"text-danger"},"*",-1)]),8,ya),(0,r.bo)((0,r.Lk)("select",{id:l.cityId,class:(0,s.C4)(["form-select",{"is-invalid":n.errors.city}]),"onUpdate:modelValue":a[6]||(a[6]=e=>n.selectedCity=e),onChange:a[7]||(a[7]=(...e)=>l.onCityChange&&l.onCityChange(...e)),disabled:!n.selectedProvince||n.loading.cities,required:""},[(0,r.Lk)("option",va,(0,s.v_)(l.getCityOptionText()),1),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.cities,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.city_code,value:e.city_code},(0,s.v_)(e.city_name),9,ba)))),128))],42,fa),[[t.u1,n.selectedCity]]),n.errors.city?((0,r.uX)(),(0,r.CE)("div",ka,(0,s.v_)(n.errors.city),1)):(0,r.Q3)("",!0)],512),[[t.aG,!n.hideDropdowns]]),n.hideDropdowns?(0,r.bo)(((0,r.uX)(),(0,r.CE)("input",{key:2,type:"hidden","onUpdate:modelValue":a[8]||(a[8]=e=>n.selectedCity=e)},null,512)),[[t.Jo,n.selectedCity]]):(0,r.Q3)("",!0),(0,r.bo)((0,r.Lk)("div",_a,[(0,r.Lk)("label",{for:l.barangayId,class:"form-label"},a[15]||(a[15]=[(0,r.eW)(" Barangay "),(0,r.Lk)("span",{class:"text-danger"},"*",-1)]),8,La),(0,r.bo)((0,r.Lk)("select",{id:l.barangayId,class:(0,s.C4)(["form-select",{"is-invalid":n.errors.barangay}]),"onUpdate:modelValue":a[9]||(a[9]=e=>n.selectedBarangay=e),onChange:a[10]||(a[10]=(...e)=>l.onBarangayChange&&l.onBarangayChange(...e)),disabled:!n.selectedCity||n.loading.barangays,required:""},[(0,r.Lk)("option",wa,(0,s.v_)(l.getBarangayOptionText()),1),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.barangays,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.brgy_code,value:e.brgy_code},(0,s.v_)(e.brgy_name),9,Fa)))),128))],42,Ca),[[t.u1,n.selectedBarangay]]),n.errors.barangay?((0,r.uX)(),(0,r.CE)("div",Ea,(0,s.v_)(n.errors.barangay),1)):(0,r.Q3)("",!0)],512),[[t.aG,!n.hideDropdowns]]),n.hideDropdowns?(0,r.bo)(((0,r.uX)(),(0,r.CE)("input",{key:3,type:"hidden","onUpdate:modelValue":a[11]||(a[11]=e=>n.selectedBarangay=e)},null,512)),[[t.Jo,n.selectedBarangay]]):(0,r.Q3)("",!0),n.hideDropdowns?((0,r.uX)(),(0,r.CE)("div",Pa,a[16]||(a[16]=[(0,r.Fv)('<div class="alert alert-info" data-v-4d076548><h6 data-v-4d076548><i class="fas fa-map-marker-alt me-2" data-v-4d076548></i>Address Information</h6><p class="mb-0" data-v-4d076548><strong data-v-4d076548>Region:</strong> Region XII (SOCCSKSARGEN)<br data-v-4d076548><strong data-v-4d076548>Province:</strong> South Cotabato<br data-v-4d076548><strong data-v-4d076548>City/Municipality:</strong> General Santos City (Dadiangas)<br data-v-4d076548><strong data-v-4d076548>Barangay:</strong> Bula </p></div>',1)]))):(0,r.Q3)("",!0),n.generalError?((0,r.uX)(),(0,r.CE)("div",Sa,[a[17]||(a[17]=(0,r.Lk)("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),(0,r.eW)(" "+(0,s.v_)(n.generalError),1)])):(0,r.Q3)("",!0)])}i(116);var xa=i(1137),Ia={name:"AddressSelector",props:{initialRegion:{type:String,default:""},initialProvince:{type:String,default:""},initialCity:{type:String,default:""},initialBarangay:{type:String,default:""},validationErrors:{type:Object,default:()=>({})}},data(){return{selectedRegion:this.initialRegion||"12",selectedProvince:this.initialProvince||"1263",selectedCity:this.initialCity||"126303",selectedBarangay:this.initialBarangay||"126303005",regions:[],provinces:[],cities:[],barangays:[],loading:{regions:!1,provinces:!1,cities:!1,barangays:!1},errors:{},generalError:"",hideDropdowns:!0}},computed:{regionId(){return`region-${this._uid}`},provinceId(){return`province-${this._uid}`},cityId(){return`city-${this._uid}`},barangayId(){return`barangay-${this._uid}`}},watch:{validationErrors:{handler(e){this.errors={...e}},deep:!0}},async mounted(){await this.loadRegions(),this.hideDropdowns?(await this.loadProvinces("12"),await this.loadCities("1263"),await this.loadBarangays("126303"),this.emitChange()):this.initialRegion&&(await this.loadProvinces(this.initialRegion),this.initialProvince&&(await this.loadCities(this.initialProvince),this.initialCity&&await this.loadBarangays(this.initialCity)))},methods:{async loadRegions(){this.loading.regions=!0,this.generalError="";try{const e=await xa.A.getRegions();this.regions=Array.isArray(e)?e:e.data||[],console.log("Loaded regions:",this.regions.length,"items")}catch(e){this.generalError="Failed to load regions. Please try again.",console.error("Error loading regions:",e),this.regions=[]}finally{this.loading.regions=!1}},async loadProvinces(e){this.loading.provinces=!0,this.provinces=[],this.cities=[],this.barangays=[];try{const a=await xa.A.getProvincesByRegion(e);this.provinces=Array.isArray(a)?a:a.data||[],console.log("Loaded provinces:",this.provinces.length,"items for region",e)}catch(a){this.generalError="Failed to load provinces. Please try again.",console.error("Error loading provinces:",a),this.provinces=[]}finally{this.loading.provinces=!1}},async loadCities(e){this.loading.cities=!0,this.cities=[],this.barangays=[];try{const a=await xa.A.getCitiesByProvince(e);this.cities=Array.isArray(a)?a:a.data||[],console.log("Loaded cities:",this.cities.length,"items for province",e)}catch(a){this.generalError="Failed to load cities. Please try again.",console.error("Error loading cities:",a),this.cities=[]}finally{this.loading.cities=!1}},async loadBarangays(e){this.loading.barangays=!0,this.barangays=[];try{const a=await xa.A.getBarangaysByCity(e);this.barangays=Array.isArray(a)?a:a.data||[],console.log("Loaded barangays:",this.barangays.length,"items for city",e)}catch(a){this.generalError="Failed to load barangays. Please try again.",console.error("Error loading barangays:",a),this.barangays=[]}finally{this.loading.barangays=!1}},async onRegionChange(){this.clearError("region"),this.selectedProvince="",this.selectedCity="",this.selectedBarangay="",this.selectedRegion&&await this.loadProvinces(this.selectedRegion),this.emitChange()},async onProvinceChange(){this.clearError("province"),this.selectedCity="",this.selectedBarangay="",this.selectedProvince&&await this.loadCities(this.selectedProvince),this.emitChange()},async onCityChange(){this.clearError("city"),this.selectedBarangay="",this.selectedCity&&await this.loadBarangays(this.selectedCity),this.emitChange()},onBarangayChange(){this.clearError("barangay"),this.emitChange()},getProvinceOptionText(){return this.selectedRegion?this.loading.provinces?"Loading provinces...":"Select Province":"Select region first"},getCityOptionText(){return this.selectedProvince?this.loading.cities?"Loading cities...":"Select City/Municipality":"Select province first"},getBarangayOptionText(){return this.selectedCity?this.loading.barangays?"Loading barangays...":"Select Barangay":"Select city first"},emitChange(){const e={region:{code:this.selectedRegion,name:Array.isArray(this.regions)&&this.regions.find((e=>e.region_code===this.selectedRegion))?.region_name||""},province:{code:this.selectedProvince,name:Array.isArray(this.provinces)&&this.provinces.find((e=>e.province_code===this.selectedProvince))?.province_name||""},city:{code:this.selectedCity,name:Array.isArray(this.cities)&&this.cities.find((e=>e.city_code===this.selectedCity))?.city_name||""},barangay:{code:this.selectedBarangay,name:Array.isArray(this.barangays)&&this.barangays.find((e=>e.brgy_code===this.selectedBarangay))?.brgy_name||""}};this.$emit("address-change",e)},clearError(e){this.errors[e]&&(this.errors={...this.errors},delete this.errors[e])},validate(){const e={};return this.selectedRegion||(e.region="Region is required"),this.selectedProvince||(e.province="Province is required"),this.selectedCity||(e.city="City/Municipality is required"),this.selectedBarangay||(e.barangay="Barangay is required"),this.errors=e,0===Object.keys(e).length},getAddressData(){return{region_code:this.selectedRegion,province_code:this.selectedProvince,city_code:this.selectedCity,barangay_code:this.selectedBarangay,region_name:this.regions.find((e=>e.region_code===this.selectedRegion))?.region_name||"",province_name:this.provinces.find((e=>e.province_code===this.selectedProvince))?.province_name||"",city_name:this.cities.find((e=>e.city_code===this.selectedCity))?.city_name||"",barangay_name:this.barangays.find((e=>e.brgy_code===this.selectedBarangay))?.brgy_name||""}},reset(){this.selectedRegion="",this.selectedProvince="",this.selectedCity="",this.selectedBarangay="",this.provinces=[],this.cities=[],this.barangays=[],this.errors={},this.generalError=""}}},Xa=i(1241);const Aa=(0,Xa.A)(Ia,[["render",Ba],["__scopeId","data-v-4d076548"]]);var Ra=Aa,$a={name:"ClientRegistration",components:{AddressSelector:Ra},data(){return{currentStep:1,loading:!1,resendLoading:!1,resendCooldown:0,showPassword:!1,errorMessage:"",successMessage:"",accountId:null,verificationMethodSelected:!1,accountForm:{username:"",email:"",password:"",confirmPassword:""},profileForm:{first_name:"",middle_name:"",last_name:"",suffix:"",birth_date:"",gender:"",civil_status_id:"",nationality:"Filipino",phone_number:"",email:"",house_number:"",street:"",subdivision:"",barangay:"",city_municipality:"",province:"",region:"",region_code:"",province_code:"",city_code:"",barangay_code:"",postal_code:"",years_of_residency:null,months_of_residency:null},uploadedFiles:{utility_bill:[],barangay_certificate:[],valid_id:[],lease_contract:[],other:[]},verificationForm:{otp:""},addressData:{region_code:"",province_code:"",city_code:"",barangay_code:"",region_name:"",province_name:"",city_name:"",barangay_name:""},errors:{},addressErrors:{}}},computed:{hasUploadedFiles(){return Object.values(this.uploadedFiles).some((e=>e.length>0))}},mounted(){this.profileForm||(this.profileForm={first_name:"",middle_name:"",last_name:"",suffix:"",birth_date:"",gender:"",civil_status_id:"",nationality:"Filipino",phone_number:"",email:"",house_number:"",street:"",subdivision:"",barangay:"",city_municipality:"",province:"",region:"",region_code:"",province_code:"",city_code:"",barangay_code:"",postal_code:"",years_of_residency:null,months_of_residency:null})},methods:{validateField(e){let a=null;const i=this.getFieldValue(e);switch(e){case"username":a=aa.y$.required(i,"Username")||aa.y$.username(i);break;case"email":a=aa.y$.required(i,"Email")||aa.y$.email(i);break;case"password":a=aa.y$.required(i,"Password")||aa.y$.password(i);break;case"confirmPassword":a=aa.y$.required(i,"Confirm Password")||aa.y$.confirmPassword(i,this.accountForm.password);break;case"first_name":a=aa.y$.required(i,"First Name")||aa.y$.name(i,"First Name");break;case"last_name":a=aa.y$.required(i,"Last Name")||aa.y$.name(i,"Last Name");break;case"birth_date":a=aa.y$.required(i,"Birth Date")||aa.y$.birthDate(i);break;case"gender":a=aa.y$.required(i,"Gender");break;case"civil_status_id":a=aa.y$.required(i,"Civil Status");break;case"nationality":a=aa.y$.required(i,"Nationality")||aa.y$.name(i,"Nationality");break;case"phone_number":a=aa.y$.required(i,"Phone Number")||aa.y$.phoneNumber(i);break;case"barangay":a=aa.y$.required(i,"Barangay")||aa.y$.address(i,"Barangay");break;case"city_municipality":a=aa.y$.required(i,"City/Municipality")||aa.y$.address(i,"City/Municipality");break;case"province":a=aa.y$.required(i,"Province")||aa.y$.address(i,"Province");break;case"otp":a=aa.y$.required(i,"Verification Code")||aa.y$.otp(i);break}return a?this.errors={...this.errors,[e]:a}:this.clearFieldError(e),!a},getFieldValue(e){return Object.prototype.hasOwnProperty.call(this.accountForm,e)?this.accountForm[e]:Object.prototype.hasOwnProperty.call(this.profileForm,e)?this.profileForm[e]:Object.prototype.hasOwnProperty.call(this.verificationForm,e)?this.verificationForm[e]:""},clearFieldError(e){this.errors=(0,aa.m_)(this.errors,e)},handleGenderChange(){this.clearFieldError("gender"),"female"===this.profileForm.gender&&(this.profileForm.suffix="")},handlePhoneInput(e){const a=e.target.value,i=a.replace(/\D/g,""),r=i.substring(0,11);this.profileForm.phone_number=r,this.clearFieldError("phone_number")},clearMessages(){this.errorMessage="",this.successMessage=""},async submitAccountForm(){this.clearMessages();const e=["username","email","password","confirmPassword"];let a=!0;if(e.forEach((e=>{this.validateField(e)||(a=!1)})),a){this.loading=!0;try{const e=await ea["default"].registerAccount({username:this.accountForm.username,email:this.accountForm.email,password:this.accountForm.password,confirmPassword:this.accountForm.confirmPassword});e.success&&(this.accountId=e.data.accountId,this.profileForm.email=this.accountForm.email,this.successMessage=e.message,this.currentStep=2)}catch(i){const e=ea["default"].parseError(i);this.errorMessage=e.message,e.errors&&e.errors.length>0&&(this.errors={...this.errors,...(0,aa.TL)(e.errors)})}finally{this.loading=!1}}else this.errorMessage="Please fix the errors above"},async submitProfileForm(){if(this.clearMessages(),!this.validateAddressSelection())return void(this.errorMessage="Please select a complete address (Region, Province, City, and Barangay)");const e=["first_name","last_name","birth_date","gender","civil_status_id","nationality","phone_number","barangay","city_municipality","province","region"];let a=!0;if(e.forEach((e=>{this.validateField(e)||(a=!1)})),a){this.loading=!0;try{const e=await ea["default"].completeRegistration(this.accountId,{...this.profileForm,civil_status_id:parseInt(this.profileForm.civil_status_id)});e.success&&(this.successMessage=e.message,this.currentStep=3,this.startResendCooldown())}catch(i){const e=ea["default"].parseError(i);this.errorMessage=e.message,e.errors&&e.errors.length>0&&(this.errors={...this.errors,...(0,aa.TL)(e.errors)})}finally{this.loading=!1}}else this.errorMessage="Please fix the errors above"},onAddressChange(e){this.addressData={region_code:e.region.code,province_code:e.province.code,city_code:e.city.code,barangay_code:e.barangay.code,region_name:e.region.name,province_name:e.province.name,city_name:e.city.name,barangay_name:e.barangay.name},this.profileForm.barangay=e.barangay.name,this.profileForm.city_municipality=e.city.name,this.profileForm.province=e.province.name,this.profileForm.region=e.region.name,this.profileForm.region_code=e.region.code,this.profileForm.province_code=e.province.code,this.profileForm.city_code=e.city.code,this.profileForm.barangay_code=e.barangay.code,this.addressErrors={}},handleFileUpload(e,a){const i=Array.from(e.target.files),r=["image/jpeg","image/jpg","image/png","application/pdf","image/webp"],s=5242880,t=i.filter((e=>r.includes(e.type)?!(e.size>s)||(this.errorMessage=`File too large: ${e.name}. Maximum size is 5MB.`,!1):(this.errorMessage=`Invalid file type: ${e.name}. Only JPG, PNG, PDF, and WebP files are allowed.`,!1)));t.length>0&&(["barangay_certificate","lease_contract"].includes(a)?this.uploadedFiles[a]=t.slice(0,1):this.uploadedFiles[a]=[...this.uploadedFiles[a],...t],this.clearMessages()),e.target.value=""},removeFile(e,a){this.uploadedFiles[e].splice(a,1)},async submitDocumentForm(){if(this.clearMessages(),this.hasUploadedFiles){this.loading=!0;try{const e=new FormData;e.append("account_id",this.accountId),Object.keys(this.uploadedFiles).forEach((a=>{this.uploadedFiles[a].forEach((i=>{e.append(a,i)}))}));const a=await this.uploadResidencyDocuments(e);a.success&&(this.successMessage=a.message,this.currentStep=4,await this.sendBothOTPs())}catch(e){const a=ea["default"].parseError(e);this.errorMessage=a.message}finally{this.loading=!1}}else this.errorMessage="Please upload at least one proof of residency document"},async uploadResidencyDocuments(e){const a="https://brgybulabackend-production.up.railway.app/api",i=await fetch(`${a}/residency/upload-registration`,{method:"POST",body:e}),r=await i.json();if(!i.ok)throw new Error(r.message||"Failed to upload documents");return r},async submitVerificationForm(){if(this.clearMessages(),this.validateField("otp")){this.loading=!0;try{let i,r=!1;try{i=await ea["default"].verifyEmail(this.accountForm.email,this.verificationForm.otp),i.success&&(r=!0,this.successMessage=i.message+" (verified via email)")}catch(e){if(this.profileForm.phone_number)try{i=await ea["default"].verifySMSOTP(this.profileForm.phone_number,this.verificationForm.otp),i.success&&(r=!0,this.successMessage=i.message+" (verified via SMS)")}catch(a){this.errorMessage="Invalid verification code. Please check your email or SMS for the correct code."}else{const a=ea["default"].parseError(e);this.errorMessage=a.message}}r&&(this.currentStep=5)}catch(i){const e=ea["default"].parseError(i);this.errorMessage=e.message}finally{this.loading=!1}}else this.errorMessage="Please enter a valid verification code"},async resendVerificationCode(){if(!(this.resendCooldown>0)){this.resendLoading=!0,this.clearMessages();try{const e=await ea["default"].resendUnifiedOTP(this.accountForm.email,this.profileForm.phone_number,"email_verification",this.profileForm.first_name);if(e.success){let a=[];e.data.emailSent&&a.push("Email verification code resent"),e.data.smsSent&&a.push("SMS verification code resent"),a.length>0?(this.successMessage=`${a.join(" and ")}! The same verification code has been resent to both channels - you can use it from either your email or SMS.`,this.startResendCooldown()):this.errorMessage="Failed to resend verification codes. Please try again."}else this.errorMessage=e.message||"Failed to resend verification codes. Please try again."}catch(e){console.error("Failed to resend verification codes:",e);const a=ea["default"].parseError(e);this.errorMessage=a.message||"Failed to resend verification codes. Please try again."}finally{this.resendLoading=!1}}},startResendCooldown(){this.resendCooldown=60;const e=setInterval((()=>{this.resendCooldown--,this.resendCooldown<=0&&clearInterval(e)}),1e3)},validateAddressSelection(){const e={};return this.addressData.region_code||(e.region="Region is required"),this.addressData.province_code||(e.province="Province is required"),this.addressData.city_code||(e.city="City/Municipality is required"),this.addressData.barangay_code||(e.barangay="Barangay is required"),this.addressErrors=e,0===Object.keys(e).length},goToPreviousStep(){this.currentStep>1&&(this.currentStep--,this.clearMessages())},goToLogin(){this.$router.push("/client/login")},async sendBothOTPs(){this.verificationMethodSelected=!0;try{this.loading=!0,this.errorMessage="";const e=await ea["default"].sendUnifiedOTP(this.accountForm.email,this.profileForm.phone_number,"email_verification",this.profileForm.first_name);if(e.success){let a=[];e.data.emailSent&&a.push("Email verification code sent"),e.data.smsSent&&a.push("SMS verification code sent"),a.length>0?(this.successMessage="Email verification code sent! Please check your Gmail to retrieve the code.",this.startResendCooldown()):this.errorMessage="Failed to send verification codes. Please try again."}else this.errorMessage=e.message||"Failed to send verification codes. Please try again."}catch(e){console.error("Failed to send verification codes:",e);const a=ea["default"].parseError(e);this.errorMessage=a.message||"Failed to send verification codes. Please try again."}finally{this.loading=!1}}}};const Ma=(0,Xa.A)($a,[["render",He],["__scopeId","data-v-35766b8d"]]);var Ua=Ma}}]);