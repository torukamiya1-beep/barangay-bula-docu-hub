"use strict";(self["webpackChunkbosfdr"]=self["webpackChunkbosfdr"]||[]).push([[300],{2167:function(e,t,s){s.r(t),s.d(t,{default:function(){return ln}});var a=s(6768),i=s(4232),o=s(5130);const l={class:"request-history"},r={class:"dashboard-container"},n={key:0,class:"d-flex justify-content-center align-items-center",style:{"min-height":"400px"}},c={key:1,class:"container-fluid py-4"},d={key:0,class:"alert alert-danger alert-dismissible fade show",role:"alert"},u={key:1,class:"card shadow mb-4"},m={class:"card-body"},p={class:"row"},h={class:"col-md-3 mb-3"},f={class:"col-md-2 mb-3"},g=["value"],k={class:"col-md-2 mb-3"},b=["max"],v={class:"col-md-2 mb-3"},y=["max"],_={class:"col-md-1 mb-3 d-flex align-items-end"},L={class:"d-flex gap-1 w-100"},q={class:"row mt-3 pt-3 border-top"},w={class:"col-md-3 mb-3"},R={key:0,class:"col-md-3 mb-3"},C=["max"],F={key:1,class:"col-md-3 mb-3"},D=["max"],x={key:2,class:"col-md-3 mb-3"},E=["max"],S={class:"col-md-3 mb-3 d-flex align-items-end"},A=["disabled"],P={class:"d-flex justify-content-between align-items-center mb-4"},T={class:"d-flex align-items-center gap-3"},I={class:"d-flex align-items-center gap-2"},M={class:"text-muted small"},X={class:"d-flex gap-2 align-items-center"},N={key:2,class:"requests-grid"},j={key:0,class:"empty-state text-center py-5"},U={key:1,class:"row g-4"},W={class:"request-card-header"},$={class:"d-flex justify-content-between align-items-start"},z={class:"d-flex align-items-center gap-2"},V={class:"request-number"},Q={class:"badge bg-success"},B={key:0,class:"cancelled-indicator"},O={class:"request-actions-simple"},H=["onClick"],G={class:"request-card-body"},Y={class:"client-info mb-3"},K={class:"d-flex align-items-center gap-2 mb-2"},J={class:"flex-grow-1"},Z={key:0},ee={class:"mb-0 fw-bold text-success"},te={class:"text-muted"},se={class:"mt-1"},ae={class:"text-muted"},ie={key:1},oe={class:"mb-0 fw-bold"},le={class:"text-muted"},re={class:"request-type-badge"},ne={key:0,class:"badge bg-info"},ce={key:1,class:"badge bg-secondary"},de={class:"client-details-grid mt-2"},ue={class:"row g-1"},me={key:0,class:"col-6"},pe={class:"fw-medium"},he={key:1,class:"col-6"},fe={class:"fw-medium"},ge={key:2,class:"col-6"},ke={class:"fw-medium"},be={key:3,class:"col-6"},ve={class:"fw-medium"},ye={key:4,class:"col-12"},_e={class:"fw-medium"},Le={key:0,class:"third-party-indicator mb-3"},qe={class:"alert alert-info py-2 px-3 mb-0"},we={class:"d-flex align-items-center"},Re={class:"flex-grow-1"},Ce={class:"small text-muted"},Fe={class:"fw-medium"},De={key:0},xe={key:1,class:"verification-status mb-3"},Ee={class:"card border-0 bg-light"},Se={class:"card-body py-2 px-3"},Ae={class:"d-flex align-items-center justify-content-between"},Pe={class:"d-flex align-items-center gap-2"},Te=["onClick"],Ie={key:2,class:"pickup-indicator mb-3"},Me={class:"card border-0 bg-warning-subtle"},Xe={class:"card-body py-2 px-3"},Ne={class:"d-flex align-items-center justify-content-between mb-2"},je={class:"small text-muted mb-2"},Ue={class:"fw-medium"},We={class:"d-flex gap-2"},$e=["onClick"],ze=["onClick"],Ve=["onClick"],Qe={class:"document-type mb-3"},Be={class:"d-flex align-items-center gap-2"},Oe={class:"badge bg-info-subtle text-info-emphasis px-3 py-2"},He={class:"request-meta mb-3"},Ge={class:"row g-2"},Ye={class:"col-6"},Ke={class:"meta-item"},Je={class:"col-6"},Ze={class:"meta-item"},et={key:0},tt={class:"fee-breakdown"},st={class:"base-fee"},at={class:"fw-bold text-primary"},it={class:"convenience-fee"},ot={class:"fw-bold text-warning"},lt=["title"],rt={class:"total-fee border-top pt-1"},nt={class:"fw-bold text-success"},ct={key:1},dt={class:"fw-bold text-success"},ut={class:"request-date"},mt={class:"text-muted"},pt={class:"request-card-footer"},ht={class:"d-grid"},ft=["onClick"],gt={key:3,class:"modern-table-container"},kt={key:0,class:"modern-table-empty"},bt={key:1,class:"compact-table-wrapper"},vt={class:"compact-table-body"},yt={class:"row-cell request-id-cell"},_t={class:"request-id-content"},Lt={class:"request-number"},qt={class:"row-cell client-cell"},wt={class:"client-compact"},Rt={class:"client-info-compact"},Ct={class:"client-name-compact"},Ft={class:"row-cell document-cell"},Dt={class:"document-badge"},xt={class:"row-cell status-cell"},Et={class:"row-cell amount-cell"},St={key:0,class:"amount-breakdown"},At={class:"amount-compact"},Pt={class:"text-muted d-block"},Tt={key:1},It={class:"amount-compact"},Mt={class:"row-cell date-cell"},Xt={class:"date-compact"},Nt={class:"date-main"},jt={class:"time-small"},Ut={class:"row-cell actions-cell"},Wt={class:"actions-simple"},$t=["onClick"],zt={key:4,class:"pagination-container"},Vt={"aria-label":"Requests pagination"},Qt={class:"pagination pagination-sm justify-content-center mb-0"},Bt=["onClick"],Ot={key:2,class:"modal fade show d-block",tabindex:"-1",style:{"background-color":"rgba(0,0,0,0.5)"}},Ht={class:"modal-dialog modal-xl modal-dialog-scrollable"},Gt={class:"modal-content"},Yt={class:"modal-header"},Kt={class:"modal-title"},Jt={class:"modal-body"},Zt={class:"row"},es={class:"col-12"},ts={class:"card mb-4"},ss={class:"card-body"},as={class:"row"},is={class:"col-md-6"},os={class:"mb-3"},ls={class:"mb-0"},rs={class:"mb-3"},ns={class:"mb-0"},cs={class:"badge bg-info"},ds={class:"mb-3"},us={class:"mb-0"},ms={class:"mb-3"},ps={class:"mb-0"},hs={class:"col-md-6"},fs={class:"mb-3"},gs={class:"mb-0"},ks={class:"mb-3"},bs={class:"mb-0"},vs={key:0,class:"alert alert-info mb-4"},ys={class:"card mb-4"},_s={class:"card-header"},Ls={class:"mb-0"},qs={class:"text-muted ms-2"},ws={class:"card-body"},Rs={class:"row"},Cs={class:"col-md-6"},Fs={class:"mb-3"},Ds={key:0},xs={key:1,class:"not-provided"},Es={class:"mb-3"},Ss=["href"],As={key:1,class:"not-provided"},Ps={class:"mb-3"},Ts=["href"],Is={key:1,class:"not-provided"},Ms={class:"col-md-6"},Xs={class:"mb-3"},Ns={key:0},js={key:1,class:"not-provided"},Us={class:"mb-3"},Ws={key:0},$s={key:1,class:"not-provided"},zs={class:"mb-3"},Vs={key:0},Qs={key:1,class:"not-provided"},Bs={class:"row"},Os={class:"col-12"},Hs={class:"mb-3"},Gs={key:0},Ys={key:1,class:"not-provided"},Ks={class:"row"},Js={class:"col-md-6"},Zs={class:"mb-3"},ea={key:0},ta={key:1,class:"not-provided"},sa={class:"col-md-6"},aa={class:"mb-3"},ia={key:0},oa={key:1,class:"not-provided"},la={key:1,class:"card mb-4"},ra={class:"card-body"},na={class:"row"},ca={class:"col-md-6"},da={class:"mb-3"},ua={class:"mb-0"},ma={class:"mb-3"},pa=["href"],ha={key:1,class:"not-provided"},fa={class:"mb-3"},ga=["href"],ka={key:1,class:"not-provided"},ba={class:"col-md-6"},va={class:"mb-3"},ya={key:0},_a={key:1,class:"not-provided"},La={class:"mb-3"},qa={key:0},wa={key:1,class:"not-provided"},Ra={class:"mb-3"},Ca={key:0},Fa={key:1,class:"not-provided"},Da={class:"row"},xa={class:"col-12"},Ea={class:"mb-3"},Sa={key:0},Aa={key:1,class:"not-provided"},Pa={class:"row"},Ta={class:"col-md-6"},Ia={class:"mb-3"},Ma={class:"mb-0"},Xa={class:"badge bg-info-subtle text-info-emphasis px-2 py-1"},Na={class:"col-md-6"},ja={class:"mb-3"},Ua={key:0},Wa={key:1,class:"not-provided"},$a={key:0,class:"row"},za={class:"col-12"},Va={class:"mb-3"},Qa={class:"d-flex align-items-center gap-3"},Ba={key:2,class:"card mb-4"},Oa={class:"card-body"},Ha={class:"row"},Ga={class:"col-md-6"},Ya={class:"mb-3"},Ka={class:"mb-0"},Ja={class:"mb-3"},Za=["href"],ei={key:1,class:"not-provided"},ti={class:"mb-3"},si={class:"form-label fw-bold"},ai={class:"mb-0"},ii={class:"badge bg-secondary-subtle text-secondary-emphasis px-2 py-1"},oi={class:"col-md-6"},li={class:"mb-3"},ri={class:"d-flex flex-column gap-2"},ni={key:0,class:"document-actions"},ci={class:"mt-2 small text-muted"},di={key:0,class:"d-flex align-items-center mb-1"},ui={key:1,class:"d-flex align-items-center"},mi={key:1,class:"text-muted small"},pi={key:0,class:"row"},hi={class:"col-12"},fi={class:"d-flex gap-2"},gi={key:3,class:"card mb-4"},ki={class:"card-header"},bi={class:"mb-0"},vi={class:"card-body"},yi={key:0,class:"cedula-details"},_i={class:"row mb-4"},Li={class:"col-12"},qi={class:"row"},wi={class:"col-md-6"},Ri={class:"mb-3"},Ci={class:"mb-0"},Fi={class:"mb-3"},Di={class:"mb-0"},xi={class:"col-md-6"},Ei={class:"mb-3"},Si={class:"mb-0"},Ai={key:0,class:"mb-3"},Pi={class:"mb-0"},Ti={key:0,class:"row mb-4"},Ii={class:"col-12"},Mi={class:"row"},Xi={class:"col-md-6"},Ni={class:"mb-3"},ji={class:"mb-0"},Ui={class:"col-md-6"},Wi={key:0,class:"mb-3"},$i={class:"mb-0"},zi={key:1,class:"row mb-4"},Vi={class:"col-12"},Qi={class:"row"},Bi={class:"col-md-6"},Oi={class:"mb-3"},Hi={class:"mb-0"},Gi={key:2,class:"row mb-4"},Yi={class:"col-12"},Ki={class:"row"},Ji={class:"col-md-6"},Zi={key:0,class:"mb-3"},eo={class:"mb-0"},to={key:1,class:"mb-3"},so={class:"mb-0"},ao={class:"col-md-6"},io={class:"mb-3"},oo={class:"mb-0"},lo={key:0,class:"mb-3"},ro={class:"mb-0"},no={class:"row"},co={class:"col-12"},uo={class:"row"},mo={class:"col-md-6"},po={class:"mb-3"},ho={class:"mb-0"},fo={class:"col-md-6"},go={class:"mb-3"},ko={class:"mb-0 text-success fw-bold"},bo={key:1,class:"barangay-clearance-details"},vo={class:"row mb-4"},yo={class:"col-12"},_o={class:"row"},Lo={class:"col-md-6"},qo={class:"mb-3"},wo={class:"mb-0"},Ro={key:0,class:"mb-3"},Co={class:"alert alert-warning"},Fo={class:"col-md-6"},Do={key:0,class:"mb-3"},xo={class:"mb-0"},Eo={key:1,class:"mb-3"},So={class:"mb-0"},Ao={key:0,class:"row"},Po={class:"col-12"},To={class:"row"},Io={class:"col-md-6"},Mo={class:"mb-3"},Xo={class:"mb-0"},No={key:0,class:"mb-3"},jo={class:"mb-0"},Uo={class:"col-md-6"},Wo={key:0,class:"mb-3"},$o={class:"mb-0"},zo=["href"],Vo={key:1,class:"mb-3"},Qo={class:"mb-0"},Bo={class:"card mb-4"},Oo={class:"card-body"},Ho={key:0},Go={class:"row g-3"},Yo={class:"document-preview-card"},Ko={class:"document-preview-header"},Jo={class:"document-type-badge"},Zo={class:"document-preview-content"},el=["onClick","onMouseenter"],tl=["src","alt"],sl={key:1,class:"loading-placeholder"},al=["onClick"],il={key:3,class:"loading-placeholder"},ol={key:1,class:"pdf-preview"},ll={class:"pdf-info"},rl={class:"mb-1 fw-bold"},nl={class:"text-muted"},cl=["onClick"],dl={key:2,class:"file-preview"},ul={class:"file-info"},ml={class:"mb-1 fw-bold"},pl={class:"text-muted"},hl=["onClick"],fl={class:"document-preview-footer"},gl={class:"text-muted"},kl={key:1,class:"no-documents"},bl={class:"text-center py-4"},vl={class:"text-muted mb-0"},yl={key:0},_l={key:1},Ll={class:"card"},ql={class:"card-body"},wl={key:0,class:"timeline"},Rl={class:"timeline-content"},Cl={class:"timeline-header"},Fl={class:"text-muted ms-2"},Dl={class:"timeline-body"},xl={class:"mb-1"},El={key:0,class:"mb-1"},Sl={key:1,class:"text-center text-muted py-3"},Al={class:"modal-footer"},Pl={key:3,class:"modal fade show d-block",tabindex:"-1",style:{"background-color":"rgba(0,0,0,0.5)"}},Tl={class:"modal-dialog"},Il={class:"modal-content"},Ml={class:"modal-header"},Xl={class:"modal-body"},Nl={class:"mb-3"},jl={class:"list-unstyled mt-2"},Ul={class:"modal-footer"},Wl=["disabled"],$l=["disabled"],zl={key:0},Vl={key:1},Ql={key:4,class:"modal fade show d-block",tabindex:"-1",style:{"background-color":"rgba(0,0,0,0.5)"}},Bl={class:"modal-dialog"},Ol={class:"modal-content"},Hl={class:"modal-header"},Gl={class:"modal-body"},Yl={class:"mb-3"},Kl={class:"list-unstyled mt-2"},Jl={key:0,class:"alert alert-danger"},Zl={class:"modal-footer"},er=["disabled"],tr=["disabled"],sr={key:0},ar={key:1},ir={class:"modal-dialog modal-xl modal-dialog-centered"},or={class:"modal-content"},lr={class:"modal-header sticky-header"},rr={class:"modal-title"},nr={class:"header-controls"},cr=["disabled"],dr={class:"modal-body text-center p-0"},ur={class:"image-modal-container"},mr=["src","alt"],pr={key:1,class:"loading-placeholder modal-loading"},hr={key:2,class:"error-placeholder modal-error"},fr=["disabled"],gr={key:3,class:"loading-placeholder modal-loading"},kr={class:"modal-footer"},br={class:"d-flex justify-content-between align-items-center w-100"},vr={class:"image-info"},yr={class:"badge bg-info me-2"},_r={class:"text-muted"},Lr={class:"image-actions"},qr=["disabled"],wr={class:"modal fade",id:"verificationModal",tabindex:"-1","aria-labelledby":"verificationModalLabel","aria-hidden":"true"},Rr={class:"modal-dialog modal-lg"},Cr={class:"modal-content"},Fr={class:"modal-body"},Dr={key:0},xr={class:"card mb-3"},Er={class:"card-body"},Sr={class:"row"},Ar={class:"col-md-6"},Pr={class:"col-md-6"},Tr={class:"card mb-3"},Ir={class:"card-body text-center"},Mr=["src"],Xr={key:1,class:"text-muted"},Nr={class:"card"},jr={class:"card-body"},Ur={class:"row"},Wr={class:"col-md-6"},$r={class:"col-md-6"},zr={class:"modal-footer"},Vr=["disabled"];function Qr(e,t,s,Qr,Br,Or){const Hr=(0,a.g2)("AdminHeader"),Gr=(0,a.g2)("AdminSidebar"),Yr=(0,a.g2)("AuthorizedPickupDocumentsModal");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",l,[(0,a.bF)(Hr,{userName:Br.adminData?.first_name||"Admin",showUserDropdown:Br.showUserDropdown,sidebarCollapsed:Br.sidebarCollapsed,activeMenu:Or.activeMenu,onSidebarToggle:Or.handleSidebarToggle,onUserDropdownToggle:Or.handleUserDropdownToggle,onMenuAction:Or.handleMenuAction,onOpenRequestModal:Or.handleOpenRequestModal,onLogout:Or.handleLogout},null,8,["userName","showUserDropdown","sidebarCollapsed","activeMenu","onSidebarToggle","onUserDropdownToggle","onMenuAction","onOpenRequestModal","onLogout"]),(0,a.Lk)("div",{class:(0,i.C4)(["mobile-overlay",{active:!Br.sidebarCollapsed&&Br.isMobile}]),onClick:t[0]||(t[0]=(...e)=>Or.closeMobileSidebar&&Or.closeMobileSidebar(...e))},null,2),(0,a.Lk)("div",r,[(0,a.bF)(Gr,{collapsed:Br.sidebarCollapsed,activeMenu:Or.activeMenu,onMenuChange:Or.handleMenuChange,onLogout:Or.handleLogout,onToggleSidebar:Or.handleSidebarToggle},null,8,["collapsed","activeMenu","onMenuChange","onLogout","onToggleSidebar"]),(0,a.Lk)("main",{class:(0,i.C4)(["main-content",{"sidebar-collapsed":Br.sidebarCollapsed}])},[Br.loading?((0,a.uX)(),(0,a.CE)("div",n,t[46]||(t[46]=[(0,a.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,a.Lk)("span",{class:"visually-hidden"},"Loading...")],-1)]))):((0,a.uX)(),(0,a.CE)("div",c,[Br.errorMessage?((0,a.uX)(),(0,a.CE)("div",d,[t[47]||(t[47]=(0,a.Lk)("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),(0,a.eW)(" "+(0,i.v_)(Br.errorMessage)+" ",1),(0,a.Lk)("button",{type:"button",class:"btn-close",onClick:t[1]||(t[1]=e=>Br.errorMessage=""),"aria-label":"Close"})])):(0,a.Q3)("",!0),Br.showFilters?((0,a.uX)(),(0,a.CE)("div",u,[(0,a.Lk)("div",m,[(0,a.Lk)("div",p,[(0,a.Lk)("div",h,[t[48]||(t[48]=(0,a.Lk)("label",{class:"form-label"},"Search",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>Br.filters.search=e),placeholder:"Search by request number",onInput:t[3]||(t[3]=(...e)=>Or.debouncedSearch&&Or.debouncedSearch(...e)),onKeyup:t[4]||(t[4]=(0,o.jR)(((...e)=>Or.applyFilters&&Or.applyFilters(...e)),["enter"]))},null,544),[[o.Jo,Br.filters.search]])]),(0,a.Lk)("div",f,[t[50]||(t[50]=(0,a.Lk)("label",{class:"form-label"},"Document Type",-1)),(0,a.bo)((0,a.Lk)("select",{class:"form-select","onUpdate:modelValue":t[5]||(t[5]=e=>Br.filters.document_type=e),onChange:t[6]||(t[6]=(...e)=>Or.applyFilters&&Or.applyFilters(...e))},[t[49]||(t[49]=(0,a.Lk)("option",{value:""},"All Types",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(Br.documentTypes,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:e.type_name},(0,i.v_)(e.type_name),9,g)))),128))],544),[[o.u1,Br.filters.document_type]])]),(0,a.Lk)("div",k,[t[51]||(t[51]=(0,a.Lk)("label",{class:"form-label"},"Date From",-1)),(0,a.bo)((0,a.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=e=>Br.filters.date_from=e),max:Or.getCurrentDate()},null,8,b),[[o.Jo,Br.filters.date_from]])]),(0,a.Lk)("div",v,[t[52]||(t[52]=(0,a.Lk)("label",{class:"form-label"},"Date To",-1)),(0,a.bo)((0,a.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":t[8]||(t[8]=e=>Br.filters.date_to=e),max:Or.getCurrentDate()},null,8,y),[[o.Jo,Br.filters.date_to]])]),(0,a.Lk)("div",_,[(0,a.Lk)("div",L,[(0,a.Lk)("button",{class:"btn btn-primary btn-sm",onClick:t[9]||(t[9]=(...e)=>Or.applyFilters&&Or.applyFilters(...e))},t[53]||(t[53]=[(0,a.Lk)("i",{class:"fas fa-search"},null,-1)])),(0,a.Lk)("button",{class:"btn btn-outline-secondary btn-sm",onClick:t[10]||(t[10]=(...e)=>Or.clearFilters&&Or.clearFilters(...e))},t[54]||(t[54]=[(0,a.Lk)("i",{class:"fas fa-times"},null,-1)]))])])]),(0,a.Lk)("div",q,[t[60]||(t[60]=(0,a.Lk)("div",{class:"col-12"},[(0,a.Lk)("h6",{class:"mb-3"},[(0,a.Lk)("i",{class:"fas fa-file-pdf text-danger me-2"}),(0,a.eW)(" PDF Export ")])],-1)),(0,a.Lk)("div",w,[t[56]||(t[56]=(0,a.Lk)("label",{class:"form-label"},"Report Type",-1)),(0,a.bo)((0,a.Lk)("select",{class:"form-select","onUpdate:modelValue":t[11]||(t[11]=e=>Br.pdfExportForm.reportType=e)},t[55]||(t[55]=[(0,a.Lk)("option",{value:"daily"},"Daily Report",-1),(0,a.Lk)("option",{value:"weekly"},"Weekly Report",-1),(0,a.Lk)("option",{value:"monthly"},"Monthly Report",-1)]),512),[[o.u1,Br.pdfExportForm.reportType]])]),"daily"===Br.pdfExportForm.reportType?((0,a.uX)(),(0,a.CE)("div",R,[t[57]||(t[57]=(0,a.Lk)("label",{class:"form-label"},"Select Date",-1)),(0,a.bo)((0,a.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":t[12]||(t[12]=e=>Br.pdfExportForm.selectedDate=e),max:Or.getCurrentDate()},null,8,C),[[o.Jo,Br.pdfExportForm.selectedDate]])])):(0,a.Q3)("",!0),"weekly"===Br.pdfExportForm.reportType?((0,a.uX)(),(0,a.CE)("div",F,[t[58]||(t[58]=(0,a.Lk)("label",{class:"form-label"},"Select Week",-1)),(0,a.bo)((0,a.Lk)("input",{type:"week",class:"form-control","onUpdate:modelValue":t[13]||(t[13]=e=>Br.pdfExportForm.selectedWeek=e),max:Or.getCurrentWeek()},null,8,D),[[o.Jo,Br.pdfExportForm.selectedWeek]])])):(0,a.Q3)("",!0),"monthly"===Br.pdfExportForm.reportType?((0,a.uX)(),(0,a.CE)("div",x,[t[59]||(t[59]=(0,a.Lk)("label",{class:"form-label"},"Select Month",-1)),(0,a.bo)((0,a.Lk)("input",{type:"month",class:"form-control","onUpdate:modelValue":t[14]||(t[14]=e=>Br.pdfExportForm.selectedMonth=e),max:Or.getCurrentMonth()},null,8,E),[[o.Jo,Br.pdfExportForm.selectedMonth]])])):(0,a.Q3)("",!0),(0,a.Lk)("div",S,[(0,a.Lk)("button",{class:"btn btn-danger",onClick:t[15]||(t[15]=(...e)=>Or.exportToPDF&&Or.exportToPDF(...e)),disabled:!Or.isPDFExportValid()||Br.pdfExportForm.loading},[(0,a.Lk)("i",{class:(0,i.C4)(["fas fa-file-pdf me-1",{"fa-spin":Br.pdfExportForm.loading}])},null,2),(0,a.eW)(" "+(0,i.v_)(Br.pdfExportForm.loading?"Generating...":"Export PDF"),1)],8,A)])])])])):(0,a.Q3)("",!0),(0,a.Lk)("div",P,[(0,a.Lk)("div",T,[(0,a.Lk)("div",I,[(0,a.Lk)("span",M," Showing "+(0,i.v_)((Br.pagination.currentPage-1)*Br.pagination.itemsPerPage+1)+" - "+(0,i.v_)(Math.min(Br.pagination.currentPage*Br.pagination.itemsPerPage,Br.pagination.totalItems))+" of "+(0,i.v_)(Br.pagination.totalItems)+" requests ",1),(0,a.bo)((0,a.Lk)("select",{class:"form-select form-select-sm",style:{width:"auto"},"onUpdate:modelValue":t[16]||(t[16]=e=>Br.pagination.itemsPerPage=e),onChange:t[17]||(t[17]=e=>Or.changeItemsPerPage(Br.pagination.itemsPerPage))},t[61]||(t[61]=[(0,a.Lk)("option",{value:"10"},"10 per page",-1),(0,a.Lk)("option",{value:"25"},"25 per page",-1),(0,a.Lk)("option",{value:"50"},"50 per page",-1),(0,a.Lk)("option",{value:"100"},"100 per page",-1)]),544),[[o.u1,Br.pagination.itemsPerPage]])]),(0,a.Lk)("div",X,[(0,a.Lk)("button",{class:"btn btn-outline-primary btn-sm",onClick:t[18]||(t[18]=e=>Br.showFilters=!Br.showFilters)},[t[62]||(t[62]=(0,a.Lk)("i",{class:"fas fa-filter me-1"},null,-1)),(0,a.eW)(" "+(0,i.v_)(Br.showFilters?"Hide":"Show")+" Filters ",1)])])])]),"card"===Br.viewMode?((0,a.uX)(),(0,a.CE)("div",N,[0===Br.requests.length?((0,a.uX)(),(0,a.CE)("div",j,t[63]||(t[63]=[(0,a.Lk)("div",{class:"empty-state-icon mb-3"},[(0,a.Lk)("i",{class:"fas fa-inbox fa-4x text-muted"})],-1),(0,a.Lk)("h5",{class:"text-muted mb-2"},"No Historical Requests Found",-1),(0,a.Lk)("p",{class:"text-muted"},"There are no completed or cancelled document requests matching your current filters.",-1)]))):((0,a.uX)(),(0,a.CE)("div",U,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(Br.requests,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"col-xl-4 col-lg-6 col-md-6"},[(0,a.Lk)("div",{class:(0,i.C4)(["request-card",{"cancelled-request":"cancelled"===e.status_name.toLowerCase()}])},[(0,a.Lk)("div",W,[(0,a.Lk)("div",$,[(0,a.Lk)("div",z,[(0,a.Lk)("div",V,[(0,a.Lk)("span",Q,(0,i.v_)(e.request_number),1)]),"cancelled"===e.status_name.toLowerCase()?((0,a.uX)(),(0,a.CE)("div",B,t[64]||(t[64]=[(0,a.Lk)("span",{class:"badge bg-danger"},[(0,a.Lk)("i",{class:"fas fa-times-circle me-1"}),(0,a.eW)("CANCELLED ")],-1)]))):(0,a.Q3)("",!0)]),(0,a.Lk)("div",O,[(0,a.Lk)("button",{class:"btn btn-sm btn-primary",onClick:t=>Or.viewRequestDetails(e.id),title:"View & Manage Request"},t[65]||(t[65]=[(0,a.Lk)("i",{class:"fas fa-edit me-1"},null,-1),(0,a.eW)("Manage ")]),8,H)])])]),(0,a.Lk)("div",G,[(0,a.Lk)("div",Y,[(0,a.Lk)("div",K,[t[69]||(t[69]=(0,a.Lk)("div",{class:"client-avatar"},[(0,a.Lk)("i",{class:"fas fa-user-circle fa-2x text-primary"})],-1)),(0,a.Lk)("div",J,[e.is_third_party_request&&e.beneficiary_name?((0,a.uX)(),(0,a.CE)("div",Z,[(0,a.Lk)("h6",ee,[t[66]||(t[66]=(0,a.Lk)("i",{class:"fas fa-user-friends me-1"},null,-1)),(0,a.eW)(" "+(0,i.v_)(e.beneficiary_name),1)]),(0,a.Lk)("small",te," Document for: "+(0,i.v_)(e.beneficiary_relationship||"Family Member"),1),(0,a.Lk)("div",se,[(0,a.Lk)("small",ae,"Requested by: "+(0,i.v_)(e.client_name),1)])])):((0,a.uX)(),(0,a.CE)("div",ie,[(0,a.Lk)("h6",oe,(0,i.v_)(e.client_name),1),(0,a.Lk)("small",le,(0,i.v_)(e.client_email),1)]))]),(0,a.Lk)("div",re,[e.is_third_party_request?((0,a.uX)(),(0,a.CE)("span",ne,t[67]||(t[67]=[(0,a.Lk)("i",{class:"fas fa-users me-1"},null,-1),(0,a.eW)("Family ")]))):((0,a.uX)(),(0,a.CE)("span",ce,t[68]||(t[68]=[(0,a.Lk)("i",{class:"fas fa-user me-1"},null,-1),(0,a.eW)("Self ")])))])]),(0,a.Lk)("div",de,[(0,a.Lk)("div",ue,[e.client_birth_date?((0,a.uX)(),(0,a.CE)("div",me,[t[70]||(t[70]=(0,a.Lk)("small",{class:"text-muted d-block"},"Date of Birth",-1)),(0,a.Lk)("small",pe,(0,i.v_)(Or.formatDate(e.client_birth_date)),1)])):(0,a.Q3)("",!0),e.client_gender?((0,a.uX)(),(0,a.CE)("div",he,[t[71]||(t[71]=(0,a.Lk)("small",{class:"text-muted d-block"},"Gender",-1)),(0,a.Lk)("small",fe,(0,i.v_)(Or.formatGender(e.client_gender)),1)])):(0,a.Q3)("",!0),Or.getCivilStatusName(e.client_civil_status_id)?((0,a.uX)(),(0,a.CE)("div",ge,[t[72]||(t[72]=(0,a.Lk)("small",{class:"text-muted d-block"},"Civil Status",-1)),(0,a.Lk)("small",ke,(0,i.v_)(Or.getCivilStatusName(e.client_civil_status_id)),1)])):(0,a.Q3)("",!0),e.client_nationality?((0,a.uX)(),(0,a.CE)("div",be,[t[73]||(t[73]=(0,a.Lk)("small",{class:"text-muted d-block"},"Nationality",-1)),(0,a.Lk)("small",ve,(0,i.v_)(e.client_nationality),1)])):(0,a.Q3)("",!0),Or.getResidencyDisplay(e)?((0,a.uX)(),(0,a.CE)("div",ye,[t[74]||(t[74]=(0,a.Lk)("small",{class:"text-muted d-block"},"Years of Residency",-1)),(0,a.Lk)("small",_e,(0,i.v_)(Or.getResidencyDisplay(e)),1)])):(0,a.Q3)("",!0)])])]),e.is_third_party_request?((0,a.uX)(),(0,a.CE)("div",Le,[(0,a.Lk)("div",qe,[(0,a.Lk)("div",we,[t[77]||(t[77]=(0,a.Lk)("i",{class:"fas fa-users me-2"},null,-1)),(0,a.Lk)("div",Re,[t[76]||(t[76]=(0,a.Lk)("small",{class:"fw-bold"},"Third-Party Request",-1)),(0,a.Lk)("div",Ce,[t[75]||(t[75]=(0,a.eW)(" Document for: ")),(0,a.Lk)("span",Fe,(0,i.v_)(e.beneficiary_name||"Another person"),1),e.relationship_to_requestor&&"self"!==e.relationship_to_requestor?((0,a.uX)(),(0,a.CE)("span",De," ("+(0,i.v_)(Or.formatRelationship(e.relationship_to_requestor))+") ",1)):(0,a.Q3)("",!0)])])])])])):(0,a.Q3)("",!0),e.is_third_party_request?((0,a.uX)(),(0,a.CE)("div",xe,[(0,a.Lk)("div",Ee,[(0,a.Lk)("div",Se,[(0,a.Lk)("div",Ae,[t[79]||(t[79]=(0,a.Lk)("div",{class:"d-flex align-items-center gap-2"},[(0,a.Lk)("i",{class:"fas fa-id-card text-primary"}),(0,a.Lk)("small",{class:"fw-bold"},"Family Verification")],-1)),(0,a.Lk)("div",Pe,[(0,a.Lk)("span",{class:(0,i.C4)(["badge",Or.getBeneficiaryVerificationStatusClass(e.beneficiary_verification_status)])},(0,i.v_)(Or.getBeneficiaryVerificationStatusText(e.beneficiary_verification_status)),3),e.beneficiary_verification_image?((0,a.uX)(),(0,a.CE)("button",{key:0,class:"btn btn-sm btn-outline-primary",onClick:t=>Or.openVerificationModal(e),title:"Manage verification"},t[78]||(t[78]=[(0,a.Lk)("i",{class:"fas fa-eye me-1"},null,-1),(0,a.eW)("Review ")]),8,Te)):(0,a.Q3)("",!0)])])])])])):(0,a.Q3)("",!0),e.pickup_person_name?((0,a.uX)(),(0,a.CE)("div",Ie,[(0,a.Lk)("div",Me,[(0,a.Lk)("div",Xe,[(0,a.Lk)("div",Ne,[t[80]||(t[80]=(0,a.Lk)("div",{class:"d-flex align-items-center gap-2"},[(0,a.Lk)("i",{class:"fas fa-hand-paper text-warning"}),(0,a.Lk)("small",{class:"fw-bold"},"Authorized Pickup")],-1)),(0,a.Lk)("span",{class:(0,i.C4)(["badge",Or.getAuthorizationStatusClass(e.pickup_authorization_verified?"verified":"pending")])},(0,i.v_)(e.pickup_authorization_verified?"Verified":"Pending"),3)]),(0,a.Lk)("div",je,[t[81]||(t[81]=(0,a.eW)(" Pickup by: ")),(0,a.Lk)("span",Ue,(0,i.v_)(e.pickup_person_name),1)]),(0,a.Lk)("div",We,[e.pickup_id_image?((0,a.uX)(),(0,a.CE)("button",{key:0,class:"btn btn-sm btn-outline-secondary",onClick:t=>Or.viewVerificationImage(e.id,"pickup-id"),title:"View pickup person's ID"},t[82]||(t[82]=[(0,a.Lk)("i",{class:"fas fa-id-card me-1"},null,-1),(0,a.eW)("ID ")]),8,$e)):(0,a.Q3)("",!0),e.pickup_authorization_letter?((0,a.uX)(),(0,a.CE)("button",{key:1,class:"btn btn-sm btn-outline-secondary",onClick:t=>Or.viewVerificationImage(e.id,"pickup-auth"),title:"View authorization letter"},t[83]||(t[83]=[(0,a.Lk)("i",{class:"fas fa-file-signature me-1"},null,-1),(0,a.eW)("Letter ")]),8,ze)):(0,a.Q3)("",!0),e.pickup_id_image||e.pickup_authorization_letter?((0,a.uX)(),(0,a.CE)("button",{key:2,class:"btn btn-sm btn-primary",onClick:t=>Or.viewPickupDocuments(e),title:"View all pickup documents"},t[84]||(t[84]=[(0,a.Lk)("i",{class:"fas fa-images me-1"},null,-1),(0,a.eW)("View All ")]),8,Ve)):(0,a.Q3)("",!0)])])])])):(0,a.Q3)("",!0),(0,a.Lk)("div",Qe,[(0,a.Lk)("div",Be,[t[85]||(t[85]=(0,a.Lk)("i",{class:"fas fa-file-alt text-info"},null,-1)),(0,a.Lk)("span",Oe,(0,i.v_)(e.document_type),1)])]),(0,a.Lk)("div",He,[(0,a.Lk)("div",Ge,[(0,a.Lk)("div",Ye,[(0,a.Lk)("div",Ke,[t[86]||(t[86]=(0,a.Lk)("small",{class:"text-muted d-block"},"Status",-1)),(0,a.Lk)("span",{class:(0,i.C4)(["badge",`bg-${Or.getStatusColor(e.status_name)}`])},(0,i.v_)(Or.formatStatus(e.status_name)),3)])]),(0,a.Lk)("div",Je,[(0,a.Lk)("div",Ze,[t[90]||(t[90]=(0,a.Lk)("small",{class:"text-muted d-block"},"Amount",-1)),Or.hasConvenienceFee(e)?((0,a.uX)(),(0,a.CE)("div",et,[(0,a.Lk)("div",tt,[(0,a.Lk)("div",st,[t[87]||(t[87]=(0,a.Lk)("small",{class:"text-muted"},"Document Fee:",-1)),(0,a.Lk)("span",at,(0,i.v_)(Or.formatCurrency(Or.getBaseFee(e))),1)]),(0,a.Lk)("div",it,[t[88]||(t[88]=(0,a.Lk)("small",{class:"text-muted"},"Convenience Fee:",-1)),(0,a.Lk)("span",ot,(0,i.v_)(Or.formatCurrency(Or.getConvenienceFee(e))),1),(0,a.Lk)("i",{class:"fas fa-info-circle text-muted ms-1",title:Or.getConvenienceFeeExplanation(e)},null,8,lt)]),(0,a.Lk)("div",rt,[t[89]||(t[89]=(0,a.Lk)("small",{class:"text-muted"},"Total Payment:",-1)),(0,a.Lk)("span",nt,(0,i.v_)(Or.formatCurrency(Or.getDisplayFee(e))),1)])])])):((0,a.uX)(),(0,a.CE)("div",ct,[(0,a.Lk)("span",dt,(0,i.v_)(Or.formatCurrency(Or.getDisplayFee(e))),1)]))])])])]),(0,a.Lk)("div",ut,[(0,a.Lk)("small",mt,[t[91]||(t[91]=(0,a.Lk)("i",{class:"fas fa-calendar-alt me-1"},null,-1)),(0,a.eW)(" Submitted "+(0,i.v_)(Or.formatDate(e.requested_at)),1)])])]),(0,a.Lk)("div",pt,[(0,a.Lk)("div",ht,[(0,a.Lk)("button",{class:"btn btn-sm btn-primary",onClick:t=>Or.viewRequestDetails(e.id)},t[92]||(t[92]=[(0,a.Lk)("i",{class:"fas fa-edit me-1"},null,-1),(0,a.eW)("Manage Request ")]),8,ft)])])],2)])))),128))]))])):((0,a.uX)(),(0,a.CE)("div",gt,[0===Br.requests.length?((0,a.uX)(),(0,a.CE)("div",kt,t[93]||(t[93]=[(0,a.Fv)('<div class="empty-content" data-v-31566372><div class="empty-icon" data-v-31566372><i class="fas fa-inbox" data-v-31566372></i></div><h6 class="empty-title" data-v-31566372>No Historical Requests Found</h6><p class="empty-text" data-v-31566372>There are no completed or cancelled document requests matching your current filters.</p></div>',1)]))):((0,a.uX)(),(0,a.CE)("div",bt,[t[98]||(t[98]=(0,a.Fv)('<div class="compact-table-header" data-v-31566372><div class="header-cell" data-v-31566372>Request ID</div><div class="header-cell" data-v-31566372>Client</div><div class="header-cell" data-v-31566372>Document</div><div class="header-cell" data-v-31566372>Status</div><div class="header-cell" data-v-31566372>Amount</div><div class="header-cell" data-v-31566372>Date Completed</div><div class="header-cell" data-v-31566372>Actions</div></div>',1)),(0,a.Lk)("div",vt,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(Br.requests,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:(0,i.C4)(["compact-row",{"cancelled-request":"cancelled"===e.status_name.toLowerCase()}])},[(0,a.Lk)("div",yt,[(0,a.Lk)("div",_t,[(0,a.Lk)("span",Lt,(0,i.v_)(e.request_number),1)])]),(0,a.Lk)("div",qt,[(0,a.Lk)("div",wt,[t[94]||(t[94]=(0,a.Lk)("div",{class:"client-avatar-tiny"},[(0,a.Lk)("i",{class:"fas fa-user"})],-1)),(0,a.Lk)("div",Rt,[(0,a.Lk)("div",Ct,(0,i.v_)(e.client_name),1)])])]),(0,a.Lk)("div",Ft,[(0,a.Lk)("span",Dt,[t[95]||(t[95]=(0,a.Lk)("i",{class:"fas fa-file-alt"},null,-1)),(0,a.eW)(" "+(0,i.v_)(e.document_type),1)])]),(0,a.Lk)("div",xt,[(0,a.Lk)("span",{class:(0,i.C4)(["status-compact",`status-${Or.getStatusColor(e.status_name)}`])},[t[96]||(t[96]=(0,a.Lk)("i",{class:"fas fa-circle"},null,-1)),(0,a.eW)(" "+(0,i.v_)(Or.formatStatus(e.status_name)),1)],2)]),(0,a.Lk)("div",Et,[Or.hasConvenienceFee(e)?((0,a.uX)(),(0,a.CE)("div",St,[(0,a.Lk)("div",At,(0,i.v_)(Or.formatCurrency(Or.getDisplayFee(e))),1),(0,a.Lk)("small",Pt," Base: "+(0,i.v_)(Or.formatCurrency(Or.getBaseFee(e)))+" + Conv: "+(0,i.v_)(Or.formatCurrency(Or.getConvenienceFee(e))),1)])):((0,a.uX)(),(0,a.CE)("div",Tt,[(0,a.Lk)("span",It,(0,i.v_)(Or.formatCurrency(Or.getDisplayFee(e))),1)]))]),(0,a.Lk)("div",Mt,[(0,a.Lk)("div",Xt,[(0,a.Lk)("span",Nt,(0,i.v_)(Or.formatDate(e.requested_at)),1),(0,a.Lk)("span",jt,(0,i.v_)(Or.formatTime(e.requested_at)),1)])]),(0,a.Lk)("div",Ut,[(0,a.Lk)("div",Wt,[(0,a.Lk)("button",{class:"action-btn-sm primary-btn-sm",onClick:t=>Or.viewRequestDetails(e.id),title:"View & Manage Request"},t[97]||(t[97]=[(0,a.Lk)("i",{class:"fas fa-edit"},null,-1)]),8,$t)])])],2)))),128))])]))])),Br.pagination.totalPages>1?((0,a.uX)(),(0,a.CE)("div",zt,[(0,a.Lk)("nav",Vt,[(0,a.Lk)("ul",Qt,[(0,a.Lk)("li",{class:(0,i.C4)(["page-item",{disabled:1===Br.pagination.currentPage}])},[(0,a.Lk)("a",{class:"page-link",href:"#",onClick:t[19]||(t[19]=(0,o.D$)((e=>Or.changePage(Br.pagination.currentPage-1)),["prevent"]))},t[99]||(t[99]=[(0,a.Lk)("i",{class:"fas fa-chevron-left"},null,-1)]))],2),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(Math.min(Br.pagination.totalPages,10),(e=>((0,a.uX)(),(0,a.CE)("li",{key:e,class:(0,i.C4)(["page-item",{active:e===Br.pagination.currentPage}])},[(0,a.Lk)("a",{class:"page-link",href:"#",onClick:(0,o.D$)((t=>Or.changePage(e)),["prevent"])},(0,i.v_)(e),9,Bt)],2)))),128)),(0,a.Lk)("li",{class:(0,i.C4)(["page-item",{disabled:Br.pagination.currentPage===Br.pagination.totalPages}])},[(0,a.Lk)("a",{class:"page-link",href:"#",onClick:t[20]||(t[20]=(0,o.D$)((e=>Or.changePage(Br.pagination.currentPage+1)),["prevent"]))},t[100]||(t[100]=[(0,a.Lk)("i",{class:"fas fa-chevron-right"},null,-1)]))],2)])])])):(0,a.Q3)("",!0)])),Br.showRequestDetails&&Br.currentRequest?((0,a.uX)(),(0,a.CE)("div",Ot,[(0,a.Lk)("div",Ht,[(0,a.Lk)("div",Gt,[(0,a.Lk)("div",Yt,[(0,a.Lk)("h5",Kt,[t[101]||(t[101]=(0,a.Lk)("i",{class:"fas fa-file-alt me-2"},null,-1)),(0,a.eW)(" Request Details - "+(0,i.v_)(Br.currentRequest.request_number),1)]),(0,a.Lk)("button",{type:"button",class:"btn-close",onClick:t[21]||(t[21]=e=>Br.showRequestDetails=!1)})]),(0,a.Lk)("div",Jt,[(0,a.Lk)("div",Zt,[(0,a.Lk)("div",es,[(0,a.Lk)("div",ts,[t[108]||(t[108]=(0,a.Lk)("div",{class:"card-header"},[(0,a.Lk)("h6",{class:"mb-0"},[(0,a.Lk)("i",{class:"fas fa-info-circle me-2"}),(0,a.eW)("Request Information")])],-1)),(0,a.Lk)("div",ss,[(0,a.Lk)("div",as,[(0,a.Lk)("div",is,[(0,a.Lk)("div",os,[t[102]||(t[102]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Request Number",-1)),(0,a.Lk)("p",ls,(0,i.v_)(Br.currentRequest.request_number),1)]),(0,a.Lk)("div",rs,[t[103]||(t[103]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Document Type",-1)),(0,a.Lk)("p",ns,[(0,a.Lk)("span",cs,(0,i.v_)(Br.currentRequest.document_type),1)])]),(0,a.Lk)("div",ds,[t[104]||(t[104]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Purpose Category",-1)),(0,a.Lk)("p",us,(0,i.v_)(Br.currentRequest.purpose_category),1)]),(0,a.Lk)("div",ms,[t[105]||(t[105]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Purpose Details",-1)),(0,a.Lk)("p",ps,(0,i.v_)(Br.currentRequest.purpose_details||"Not specified"),1)])]),(0,a.Lk)("div",hs,[(0,a.Lk)("div",fs,[t[106]||(t[106]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Current Status",-1)),(0,a.Lk)("p",gs,[(0,a.Lk)("span",{class:(0,i.C4)(["badge",`bg-${Or.getStatusColor(Br.currentRequest.status_name)}`])},(0,i.v_)(Or.formatStatus(Br.currentRequest.status_name)),3)])]),(0,a.Lk)("div",ks,[t[107]||(t[107]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Date Submitted",-1)),(0,a.Lk)("p",bs,(0,i.v_)(Or.formatDateTime(Br.currentRequest.requested_at)),1)])])])])]),Br.currentRequest.is_third_party_request?((0,a.uX)(),(0,a.CE)("div",vs,t[109]||(t[109]=[(0,a.Lk)("div",{class:"d-flex align-items-center"},[(0,a.Lk)("i",{class:"fas fa-users me-2"}),(0,a.Lk)("div",null,[(0,a.Lk)("strong",null,"Third-Party Request"),(0,a.Lk)("p",{class:"mb-0 small"},"This document is being requested on behalf of another person.")])],-1)]))):(0,a.Q3)("",!0),(0,a.Lk)("div",ys,[(0,a.Lk)("div",_s,[(0,a.Lk)("h6",Ls,[t[110]||(t[110]=(0,a.Lk)("i",{class:"fas fa-user-edit me-2"},null,-1)),(0,a.eW)(" "+(0,i.v_)(Br.currentRequest.is_third_party_request?"Requestor Information":"Client Information")+" ",1),(0,a.Lk)("small",qs,(0,i.v_)(Br.currentRequest.is_third_party_request?"(Person who submitted this request)":""),1)])]),(0,a.Lk)("div",ws,[(0,a.Lk)("div",Rs,[(0,a.Lk)("div",Cs,[(0,a.Lk)("div",Fs,[t[111]||(t[111]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Full Name",-1)),(0,a.Lk)("p",{class:(0,i.C4)(["mb-0",{"text-muted":"Not provided"===Or.getClientFullName(Br.currentRequest)}])},["Not provided"!==Or.getClientFullName(Br.currentRequest)?((0,a.uX)(),(0,a.CE)("span",Ds,(0,i.v_)(Or.getClientFullName(Br.currentRequest)),1)):((0,a.uX)(),(0,a.CE)("span",xs,"Not provided"))],2)]),(0,a.Lk)("div",Es,[t[112]||(t[112]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Email Address",-1)),(0,a.Lk)("p",{class:(0,i.C4)(["mb-0",{"text-muted":!Br.currentRequest.client_email}])},[Br.currentRequest.client_email?((0,a.uX)(),(0,a.CE)("a",{key:0,href:`mailto:${Br.currentRequest.client_email}`},(0,i.v_)(Br.currentRequest.client_email),9,Ss)):((0,a.uX)(),(0,a.CE)("span",As,"Not provided"))],2)]),(0,a.Lk)("div",Ps,[t[113]||(t[113]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Phone Number",-1)),(0,a.Lk)("p",{class:(0,i.C4)(["mb-0",{"text-muted":!Br.currentRequest.client_phone}])},[Br.currentRequest.client_phone?((0,a.uX)(),(0,a.CE)("a",{key:0,href:`tel:${Br.currentRequest.client_phone}`},(0,i.v_)(Br.currentRequest.client_phone),9,Ts)):((0,a.uX)(),(0,a.CE)("span",Is,"Not provided"))],2)])]),(0,a.Lk)("div",Ms,[(0,a.Lk)("div",Xs,[t[114]||(t[114]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Date of Birth",-1)),(0,a.Lk)("p",{class:(0,i.C4)(["mb-0",{"text-muted":!Br.currentRequest.client_birth_date}])},[Or.formatDate(Br.currentRequest.client_birth_date)?((0,a.uX)(),(0,a.CE)("span",Ns,(0,i.v_)(Or.formatDate(Br.currentRequest.client_birth_date)),1)):((0,a.uX)(),(0,a.CE)("span",js,"Not provided"))],2)]),(0,a.Lk)("div",Us,[t[115]||(t[115]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Gender",-1)),(0,a.Lk)("p",{class:(0,i.C4)(["mb-0",{"text-muted":!Br.currentRequest.client_gender}])},[Or.formatGender(Br.currentRequest.client_gender)?((0,a.uX)(),(0,a.CE)("span",Ws,(0,i.v_)(Or.formatGender(Br.currentRequest.client_gender)),1)):((0,a.uX)(),(0,a.CE)("span",$s,"Not provided"))],2)]),(0,a.Lk)("div",zs,[t[116]||(t[116]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Civil Status",-1)),(0,a.Lk)("p",{class:(0,i.C4)(["mb-0",{"text-muted":!Br.currentRequest.client_civil_status_id}])},[Or.getCivilStatusName(Br.currentRequest.client_civil_status_id)?((0,a.uX)(),(0,a.CE)("span",Vs,(0,i.v_)(Or.getCivilStatusName(Br.currentRequest.client_civil_status_id)),1)):((0,a.uX)(),(0,a.CE)("span",Qs,"Not provided"))],2)])])]),(0,a.Lk)("div",Bs,[(0,a.Lk)("div",Os,[(0,a.Lk)("div",Hs,[t[117]||(t[117]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Complete Address",-1)),(0,a.Lk)("p",{class:(0,i.C4)(["mb-0",{"text-muted":!Or.getClientFullAddress(Br.currentRequest)}])},[Or.getClientFullAddress(Br.currentRequest)?((0,a.uX)(),(0,a.CE)("span",Gs,(0,i.v_)(Or.getClientFullAddress(Br.currentRequest)),1)):((0,a.uX)(),(0,a.CE)("span",Ys,"Not provided"))],2)])])]),(0,a.Lk)("div",Ks,[(0,a.Lk)("div",Js,[(0,a.Lk)("div",Zs,[t[118]||(t[118]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Nationality",-1)),(0,a.Lk)("p",{class:(0,i.C4)(["mb-0",{"text-muted":!Br.currentRequest.client_nationality}])},[Br.currentRequest.client_nationality?((0,a.uX)(),(0,a.CE)("span",ea,(0,i.v_)(Br.currentRequest.client_nationality),1)):((0,a.uX)(),(0,a.CE)("span",ta,"Not provided"))],2)])]),(0,a.Lk)("div",sa,[(0,a.Lk)("div",aa,[t[119]||(t[119]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Years of Residency",-1)),(0,a.Lk)("p",{class:(0,i.C4)(["mb-0",{"text-muted":!Or.getResidencyDisplay(Br.currentRequest)}])},[Or.getResidencyDisplay(Br.currentRequest)?((0,a.uX)(),(0,a.CE)("span",ia,(0,i.v_)(Or.getResidencyDisplay(Br.currentRequest)),1)):((0,a.uX)(),(0,a.CE)("span",oa,"Not provided"))],2)])])])])]),Br.currentRequest.is_third_party_request&&Br.currentRequest.beneficiary?((0,a.uX)(),(0,a.CE)("div",la,[t[131]||(t[131]=(0,a.Lk)("div",{class:"card-header bg-light"},[(0,a.Lk)("h6",{class:"mb-0"},[(0,a.Lk)("i",{class:"fas fa-user-check me-2 text-primary"}),(0,a.eW)(" Document Beneficiary Information "),(0,a.Lk)("small",{class:"text-muted ms-2"},"(Person this document is for)")])],-1)),(0,a.Lk)("div",ra,[(0,a.Lk)("div",na,[(0,a.Lk)("div",ca,[(0,a.Lk)("div",da,[t[120]||(t[120]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Full Name",-1)),(0,a.Lk)("p",ua,(0,i.v_)(Br.currentRequest.beneficiary.full_name||"Not provided"),1)]),(0,a.Lk)("div",ma,[t[121]||(t[121]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Email Address",-1)),(0,a.Lk)("p",{class:(0,i.C4)(["mb-0",{"text-muted":!Br.currentRequest.beneficiary.email}])},[Br.currentRequest.beneficiary.email?((0,a.uX)(),(0,a.CE)("a",{key:0,href:`mailto:${Br.currentRequest.beneficiary.email}`},(0,i.v_)(Br.currentRequest.beneficiary.email),9,pa)):((0,a.uX)(),(0,a.CE)("span",ha,"Not provided"))],2)]),(0,a.Lk)("div",fa,[t[122]||(t[122]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Phone Number",-1)),(0,a.Lk)("p",{class:(0,i.C4)(["mb-0",{"text-muted":!Br.currentRequest.beneficiary.phone_number}])},[Br.currentRequest.beneficiary.phone_number?((0,a.uX)(),(0,a.CE)("a",{key:0,href:`tel:${Br.currentRequest.beneficiary.phone_number}`},(0,i.v_)(Br.currentRequest.beneficiary.phone_number),9,ga)):((0,a.uX)(),(0,a.CE)("span",ka,"Not provided"))],2)])]),(0,a.Lk)("div",ba,[(0,a.Lk)("div",va,[t[123]||(t[123]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Date of Birth",-1)),(0,a.Lk)("p",{class:(0,i.C4)(["mb-0",{"text-muted":!Br.currentRequest.beneficiary.birth_date}])},[Or.formatDate(Br.currentRequest.beneficiary.birth_date)?((0,a.uX)(),(0,a.CE)("span",ya,(0,i.v_)(Or.formatDate(Br.currentRequest.beneficiary.birth_date)),1)):((0,a.uX)(),(0,a.CE)("span",_a,"Not provided"))],2)]),(0,a.Lk)("div",La,[t[124]||(t[124]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Gender",-1)),(0,a.Lk)("p",{class:(0,i.C4)(["mb-0",{"text-muted":!Br.currentRequest.beneficiary.gender}])},[Or.formatGender(Br.currentRequest.beneficiary.gender)?((0,a.uX)(),(0,a.CE)("span",qa,(0,i.v_)(Or.formatGender(Br.currentRequest.beneficiary.gender)),1)):((0,a.uX)(),(0,a.CE)("span",wa,"Not provided"))],2)]),(0,a.Lk)("div",Ra,[t[125]||(t[125]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Civil Status",-1)),(0,a.Lk)("p",{class:(0,i.C4)(["mb-0",{"text-muted":!Br.currentRequest.beneficiary.civil_status_id}])},[Or.getCivilStatusName(Br.currentRequest.beneficiary.civil_status_id)?((0,a.uX)(),(0,a.CE)("span",Ca,(0,i.v_)(Or.getCivilStatusName(Br.currentRequest.beneficiary.civil_status_id)),1)):((0,a.uX)(),(0,a.CE)("span",Fa,"Not provided"))],2)])])]),(0,a.Lk)("div",Da,[(0,a.Lk)("div",xa,[(0,a.Lk)("div",Ea,[t[126]||(t[126]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Complete Address",-1)),(0,a.Lk)("p",{class:(0,i.C4)(["mb-0",{"text-muted":!Br.currentRequest.beneficiary.address}])},[Br.currentRequest.beneficiary.address?((0,a.uX)(),(0,a.CE)("span",Sa,(0,i.v_)(Br.currentRequest.beneficiary.address),1)):((0,a.uX)(),(0,a.CE)("span",Aa,"Not provided"))],2)])])]),(0,a.Lk)("div",Pa,[(0,a.Lk)("div",Ta,[(0,a.Lk)("div",Ia,[t[127]||(t[127]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Relationship to Requestor",-1)),(0,a.Lk)("p",Ma,[(0,a.Lk)("span",Xa,(0,i.v_)(Or.formatRelationship(Br.currentRequest.beneficiary.relationship_to_requestor)),1)])])]),(0,a.Lk)("div",Na,[(0,a.Lk)("div",ja,[t[128]||(t[128]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Nationality",-1)),(0,a.Lk)("p",{class:(0,i.C4)(["mb-0",{"text-muted":!Br.currentRequest.beneficiary.nationality}])},[Br.currentRequest.beneficiary.nationality?((0,a.uX)(),(0,a.CE)("span",Ua,(0,i.v_)(Br.currentRequest.beneficiary.nationality),1)):((0,a.uX)(),(0,a.CE)("span",Wa,"Not provided"))],2)])])]),Br.currentRequest?.beneficiary?.verification_image_path?((0,a.uX)(),(0,a.CE)("div",$a,[(0,a.Lk)("div",za,[(0,a.Lk)("div",Va,[t[130]||(t[130]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Family Member Verification",-1)),(0,a.Lk)("div",Qa,[(0,a.Lk)("button",{class:"btn btn-outline-primary btn-sm",onClick:t[22]||(t[22]=e=>Or.viewVerificationImage(Br.currentRequest.id,"beneficiary")),title:"View family member verification image"},t[129]||(t[129]=[(0,a.Lk)("i",{class:"fas fa-eye me-1"},null,-1),(0,a.eW)("View Verification Image ")]))])])])])):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0),Br.currentRequest.authorized_pickup?((0,a.uX)(),(0,a.CE)("div",Ba,[t[142]||(t[142]=(0,a.Lk)("div",{class:"card-header bg-warning-subtle"},[(0,a.Lk)("h6",{class:"mb-0"},[(0,a.Lk)("i",{class:"fas fa-hand-paper me-2 text-warning"}),(0,a.eW)(" Authorized Pickup Person "),(0,a.Lk)("small",{class:"text-muted ms-2"},"(Person authorized to collect the document)")])],-1)),(0,a.Lk)("div",Oa,[(0,a.Lk)("div",Ha,[(0,a.Lk)("div",Ga,[(0,a.Lk)("div",Ya,[t[132]||(t[132]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Full Name",-1)),(0,a.Lk)("p",Ka,(0,i.v_)(Br.currentRequest.authorized_pickup.full_name||"Not provided"),1)]),(0,a.Lk)("div",Ja,[t[133]||(t[133]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Phone Number",-1)),(0,a.Lk)("p",{class:(0,i.C4)(["mb-0",{"text-muted":!Br.currentRequest.authorized_pickup.phone_number}])},[Br.currentRequest.authorized_pickup.phone_number?((0,a.uX)(),(0,a.CE)("a",{key:0,href:`tel:${Br.currentRequest.authorized_pickup.phone_number}`},(0,i.v_)(Br.currentRequest.authorized_pickup.phone_number),9,Za)):((0,a.uX)(),(0,a.CE)("span",ei,"Not provided"))],2)]),(0,a.Lk)("div",ti,[(0,a.Lk)("label",si,"Relationship to "+(0,i.v_)(Br.currentRequest.is_third_party_request?"Beneficiary":"Requestor"),1),(0,a.Lk)("p",ai,[(0,a.Lk)("span",ii,(0,i.v_)(Or.formatRelationship(Br.currentRequest.authorized_pickup.relationship_to_beneficiary)),1)])])]),(0,a.Lk)("div",oi,[(0,a.Lk)("div",li,[t[138]||(t[138]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Uploaded Documents",-1)),(0,a.Lk)("div",ri,[Br.currentRequest.authorized_pickup?.id_image_path||Br.currentRequest.authorized_pickup?.authorization_letter_path?((0,a.uX)(),(0,a.CE)("div",ni,[(0,a.Lk)("button",{class:"btn btn-primary btn-sm w-100",onClick:t[23]||(t[23]=e=>Or.viewPickupDocuments(Br.currentRequest)),title:"View all pickup authorization documents"},t[134]||(t[134]=[(0,a.Lk)("i",{class:"fas fa-images me-2"},null,-1),(0,a.eW)(" View Authorization Documents ")])),(0,a.Lk)("div",ci,[Br.currentRequest.authorized_pickup?.id_image_path?((0,a.uX)(),(0,a.CE)("div",di,t[135]||(t[135]=[(0,a.Lk)("i",{class:"fas fa-id-card me-2 text-info"},null,-1),(0,a.Lk)("span",null,"ID Document Available",-1)]))):(0,a.Q3)("",!0),Br.currentRequest.authorized_pickup?.authorization_letter_path?((0,a.uX)(),(0,a.CE)("div",ui,t[136]||(t[136]=[(0,a.Lk)("i",{class:"fas fa-file-signature me-2 text-warning"},null,-1),(0,a.Lk)("span",null,"Authorization Letter Available",-1)]))):(0,a.Q3)("",!0)])])):((0,a.uX)(),(0,a.CE)("div",mi,t[137]||(t[137]=[(0,a.Lk)("i",{class:"fas fa-exclamation-triangle me-2 text-warning"},null,-1),(0,a.eW)(" No documents uploaded yet ")])))])])])]),"pending"===Br.currentRequest.authorized_pickup.verification_status?((0,a.uX)(),(0,a.CE)("div",pi,[(0,a.Lk)("div",hi,[t[141]||(t[141]=(0,a.Lk)("div",{class:"alert alert-warning"},[(0,a.Lk)("i",{class:"fas fa-exclamation-triangle me-2"}),(0,a.Lk)("strong",null,"Action Required:"),(0,a.eW)(" This pickup authorization needs to be verified before the document can be released. ")],-1)),(0,a.Lk)("div",fi,[(0,a.Lk)("button",{class:"btn btn-success btn-sm",onClick:t[24]||(t[24]=e=>Or.verifyAuthorization(Br.currentRequest.id,!0))},t[139]||(t[139]=[(0,a.Lk)("i",{class:"fas fa-check me-1"},null,-1),(0,a.eW)(" Verify & Approve ")])),(0,a.Lk)("button",{class:"btn btn-danger btn-sm",onClick:t[25]||(t[25]=e=>Or.verifyAuthorization(Br.currentRequest.id,!1))},t[140]||(t[140]=[(0,a.Lk)("i",{class:"fas fa-times me-1"},null,-1),(0,a.eW)(" Reject Authorization ")]))])])])):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0),Br.currentRequest.specific_details?((0,a.uX)(),(0,a.CE)("div",gi,[(0,a.Lk)("div",ki,[(0,a.Lk)("h6",bi,[t[143]||(t[143]=(0,a.Lk)("i",{class:"fas fa-file-alt me-2"},null,-1)),(0,a.eW)(" "+(0,i.v_)(Br.currentRequest.document_type)+" Application Details ",1)])]),(0,a.Lk)("div",vi,["Cedula"===Br.currentRequest.document_type?((0,a.uX)(),(0,a.CE)("div",yi,[(0,a.Lk)("div",_i,[(0,a.Lk)("div",Li,[t[148]||(t[148]=(0,a.Lk)("h6",{class:"text-primary mb-3"},[(0,a.Lk)("i",{class:"fas fa-money-bill-wave me-2"}),(0,a.eW)("Income Information ")],-1)),(0,a.Lk)("div",qi,[(0,a.Lk)("div",wi,[(0,a.Lk)("div",Ri,[t[144]||(t[144]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Annual Income",-1)),(0,a.Lk)("p",Ci,(0,i.v_)(Or.formatCurrency(Br.currentRequest.specific_details.annual_income||0)),1)]),(0,a.Lk)("div",Fi,[t[145]||(t[145]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Monthly Income",-1)),(0,a.Lk)("p",Di,(0,i.v_)(Or.formatCurrency(Br.currentRequest.specific_details.monthly_income||0)),1)])]),(0,a.Lk)("div",xi,[(0,a.Lk)("div",Ei,[t[146]||(t[146]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Occupation",-1)),(0,a.Lk)("p",Si,(0,i.v_)(Br.currentRequest.specific_details.occupation||"Not provided"),1)]),Br.currentRequest.specific_details.employer_name?((0,a.uX)(),(0,a.CE)("div",Ai,[t[147]||(t[147]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Employer",-1)),(0,a.Lk)("p",Pi,(0,i.v_)(Br.currentRequest.specific_details.employer_name),1)])):(0,a.Q3)("",!0)])])])]),Br.currentRequest.specific_details.has_real_property||Br.currentRequest.specific_details.property_assessed_value>0?((0,a.uX)(),(0,a.CE)("div",Ti,[(0,a.Lk)("div",Ii,[t[151]||(t[151]=(0,a.Lk)("h6",{class:"text-success mb-3"},[(0,a.Lk)("i",{class:"fas fa-home me-2"}),(0,a.eW)("Real Property Information ")],-1)),(0,a.Lk)("div",Mi,[(0,a.Lk)("div",Xi,[(0,a.Lk)("div",Ni,[t[149]||(t[149]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Assessed Property Value",-1)),(0,a.Lk)("p",ji,(0,i.v_)(Or.formatCurrency(Br.currentRequest.specific_details.property_assessed_value||0)),1)])]),(0,a.Lk)("div",Ui,[Br.currentRequest.specific_details.property_location?((0,a.uX)(),(0,a.CE)("div",Wi,[t[150]||(t[150]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Property Location",-1)),(0,a.Lk)("p",$i,(0,i.v_)(Br.currentRequest.specific_details.property_location),1)])):(0,a.Q3)("",!0)])])])])):(0,a.Q3)("",!0),Br.currentRequest.specific_details.has_personal_property||Br.currentRequest.specific_details.personal_property_value>0?((0,a.uX)(),(0,a.CE)("div",zi,[(0,a.Lk)("div",Vi,[t[153]||(t[153]=(0,a.Lk)("h6",{class:"text-info mb-3"},[(0,a.Lk)("i",{class:"fas fa-car me-2"}),(0,a.eW)("Personal Property Information ")],-1)),(0,a.Lk)("div",Qi,[(0,a.Lk)("div",Bi,[(0,a.Lk)("div",Oi,[t[152]||(t[152]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Personal Property Value",-1)),(0,a.Lk)("p",Hi,(0,i.v_)(Or.formatCurrency(Br.currentRequest.specific_details.personal_property_value||0)),1)])])])])])):(0,a.Q3)("",!0),Br.currentRequest.specific_details.business_name||Br.currentRequest.specific_details.business_gross_receipts>0?((0,a.uX)(),(0,a.CE)("div",Gi,[(0,a.Lk)("div",Yi,[t[158]||(t[158]=(0,a.Lk)("h6",{class:"text-warning mb-3"},[(0,a.Lk)("i",{class:"fas fa-briefcase me-2"}),(0,a.eW)("Business/Professional Information ")],-1)),(0,a.Lk)("div",Ki,[(0,a.Lk)("div",Ji,[Br.currentRequest.specific_details.business_name?((0,a.uX)(),(0,a.CE)("div",Zi,[t[154]||(t[154]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Business Name",-1)),(0,a.Lk)("p",eo,(0,i.v_)(Br.currentRequest.specific_details.business_name),1)])):(0,a.Q3)("",!0),Br.currentRequest.specific_details.business_type?((0,a.uX)(),(0,a.CE)("div",to,[t[155]||(t[155]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Business Type",-1)),(0,a.Lk)("p",so,(0,i.v_)(Br.currentRequest.specific_details.business_type),1)])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",ao,[(0,a.Lk)("div",io,[t[156]||(t[156]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Annual Gross Receipts/Professional Fees",-1)),(0,a.Lk)("p",oo,(0,i.v_)(Or.formatCurrency(Br.currentRequest.specific_details.business_gross_receipts||0)),1)]),Br.currentRequest.specific_details.business_address?((0,a.uX)(),(0,a.CE)("div",lo,[t[157]||(t[157]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Business Address",-1)),(0,a.Lk)("p",ro,(0,i.v_)(Br.currentRequest.specific_details.business_address),1)])):(0,a.Q3)("",!0)])])])])):(0,a.Q3)("",!0),(0,a.Lk)("div",no,[(0,a.Lk)("div",co,[t[161]||(t[161]=(0,a.Lk)("h6",{class:"text-danger mb-3"},[(0,a.Lk)("i",{class:"fas fa-calculator me-2"}),(0,a.eW)("Tax Computation ")],-1)),(0,a.Lk)("div",uo,[(0,a.Lk)("div",mo,[(0,a.Lk)("div",po,[t[159]||(t[159]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Computed Tax",-1)),(0,a.Lk)("p",ho,(0,i.v_)(Or.formatCurrency(Br.currentRequest.specific_details.computed_tax||0)),1)])]),(0,a.Lk)("div",fo,[(0,a.Lk)("div",go,[t[160]||(t[160]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Total Document Fee",-1)),(0,a.Lk)("p",ko,(0,i.v_)(Or.formatCurrency(Br.currentRequest.total_document_fee||0)),1)])])])])])])):"Barangay Clearance"===Br.currentRequest.document_type?((0,a.uX)(),(0,a.CE)("div",bo,[(0,a.Lk)("div",vo,[(0,a.Lk)("div",yo,[t[167]||(t[167]=(0,a.Lk)("h6",{class:"text-warning mb-3"},[(0,a.Lk)("i",{class:"fas fa-gavel me-2"}),(0,a.eW)("Legal Status Information ")],-1)),(0,a.Lk)("div",_o,[(0,a.Lk)("div",Lo,[(0,a.Lk)("div",qo,[t[162]||(t[162]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Pending Cases",-1)),(0,a.Lk)("p",wo,[(0,a.Lk)("span",{class:(0,i.C4)(["badge",Br.currentRequest.specific_details.has_pending_cases?"bg-warning":"bg-success"])},(0,i.v_)(Br.currentRequest.specific_details.has_pending_cases?"Has Pending Cases":"No Pending Cases"),3)])]),Br.currentRequest.specific_details.has_pending_cases&&Br.currentRequest.specific_details.pending_cases_details?((0,a.uX)(),(0,a.CE)("div",Ro,[t[164]||(t[164]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Pending Cases Details",-1)),(0,a.Lk)("div",Co,[t[163]||(t[163]=(0,a.Lk)("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),(0,a.eW)(" "+(0,i.v_)(Br.currentRequest.specific_details.pending_cases_details),1)])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Fo,[Br.currentRequest.specific_details.voter_registration_number?((0,a.uX)(),(0,a.CE)("div",Do,[t[165]||(t[165]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Voter Registration Number",-1)),(0,a.Lk)("p",xo,(0,i.v_)(Br.currentRequest.specific_details.voter_registration_number),1)])):(0,a.Q3)("",!0),Br.currentRequest.specific_details.precinct_number?((0,a.uX)(),(0,a.CE)("div",Eo,[t[166]||(t[166]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Precinct Number",-1)),(0,a.Lk)("p",So,(0,i.v_)(Br.currentRequest.specific_details.precinct_number),1)])):(0,a.Q3)("",!0)])])])]),Br.currentRequest.specific_details.emergency_contact_name?((0,a.uX)(),(0,a.CE)("div",Ao,[(0,a.Lk)("div",Po,[t[172]||(t[172]=(0,a.Lk)("h6",{class:"text-info mb-3"},[(0,a.Lk)("i",{class:"fas fa-phone me-2"}),(0,a.eW)("Emergency Contact Information ")],-1)),(0,a.Lk)("div",To,[(0,a.Lk)("div",Io,[(0,a.Lk)("div",Mo,[t[168]||(t[168]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Contact Name",-1)),(0,a.Lk)("p",Xo,(0,i.v_)(Br.currentRequest.specific_details.emergency_contact_name),1)]),Br.currentRequest.specific_details.emergency_contact_relationship?((0,a.uX)(),(0,a.CE)("div",No,[t[169]||(t[169]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Relationship",-1)),(0,a.Lk)("p",jo,(0,i.v_)(Br.currentRequest.specific_details.emergency_contact_relationship),1)])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Uo,[Br.currentRequest.specific_details.emergency_contact_phone?((0,a.uX)(),(0,a.CE)("div",Wo,[t[170]||(t[170]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Phone Number",-1)),(0,a.Lk)("p",$o,[(0,a.Lk)("a",{href:`tel:${Br.currentRequest.specific_details.emergency_contact_phone}`},(0,i.v_)(Br.currentRequest.specific_details.emergency_contact_phone),9,zo)])])):(0,a.Q3)("",!0),Br.currentRequest.specific_details.emergency_contact_address?((0,a.uX)(),(0,a.CE)("div",Vo,[t[171]||(t[171]=(0,a.Lk)("label",{class:"form-label fw-bold"},"Address",-1)),(0,a.Lk)("p",Qo,(0,i.v_)(Br.currentRequest.specific_details.emergency_contact_address),1)])):(0,a.Q3)("",!0)])])])])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0),(0,a.Lk)("div",Bo,[t[185]||(t[185]=(0,a.Lk)("div",{class:"card-header"},[(0,a.Lk)("h6",{class:"mb-0"},[(0,a.Lk)("i",{class:"fas fa-paperclip me-2"}),(0,a.eW)("Uploaded Documents")])],-1)),(0,a.Lk)("div",Oo,[Br.currentRequest.uploaded_documents&&Br.currentRequest.uploaded_documents.length>0?((0,a.uX)(),(0,a.CE)("div",Ho,[(0,a.Lk)("div",Go,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(Br.currentRequest.uploaded_documents,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"col-md-4"},[(0,a.Lk)("div",Yo,[(0,a.Lk)("div",Ko,[(0,a.Lk)("div",Jo,[t[173]||(t[173]=(0,a.Lk)("i",{class:"fas fa-file-alt me-1"},null,-1)),(0,a.eW)(" "+(0,i.v_)(Or.getDocumentTypeDisplayName(e.document_type)),1)])]),(0,a.Lk)("div",Zo,[Or.isImageFile(e.mime_type)?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"image-preview",onClick:t=>Or.openImageModal(e),onMouseenter:t=>Or.preloadImage(e)},[Br.documentUrls[e.id]?((0,a.uX)(),(0,a.CE)("img",{key:0,src:Br.documentUrls[e.id],alt:e.document_name,class:"document-image",onError:t[26]||(t[26]=(...e)=>Or.handleImageError&&Or.handleImageError(...e))},null,40,tl)):Br.loadingDocuments.has(e.id)?((0,a.uX)(),(0,a.CE)("div",sl,t[174]||(t[174]=[(0,a.Lk)("i",{class:"fas fa-spinner fa-spin"},null,-1),(0,a.Lk)("span",null,"Loading image...",-1)]))):Br.failedDocuments.has(e.id)?((0,a.uX)(),(0,a.CE)("div",{key:2,class:"error-placeholder",onClick:(0,o.D$)((t=>Or.retryLoadDocument(e)),["stop"])},t[175]||(t[175]=[(0,a.Lk)("i",{class:"fas fa-exclamation-triangle"},null,-1),(0,a.Lk)("span",null,"Failed to load",-1),(0,a.Lk)("small",null,"Click to retry",-1)]),8,al)):((0,a.uX)(),(0,a.CE)("div",il,t[176]||(t[176]=[(0,a.Lk)("i",{class:"fas fa-image"},null,-1),(0,a.Lk)("span",null,"Click to load",-1)]))),t[177]||(t[177]=(0,a.Lk)("div",{class:"image-overlay"},[(0,a.Lk)("i",{class:"fas fa-search-plus"}),(0,a.Lk)("span",null,"Click to view")],-1))],40,el)):Or.isPdfFile(e.mime_type)?((0,a.uX)(),(0,a.CE)("div",ol,[t[179]||(t[179]=(0,a.Lk)("div",{class:"pdf-icon"},[(0,a.Lk)("i",{class:"fas fa-file-pdf fa-3x text-danger"})],-1)),(0,a.Lk)("div",ll,[(0,a.Lk)("p",rl,(0,i.v_)(e.document_name),1),(0,a.Lk)("small",nl,(0,i.v_)(Or.formatFileSize(e.file_size)),1)]),(0,a.Lk)("button",{class:"btn btn-sm btn-outline-primary mt-2",onClick:t=>Or.downloadDocument(e)},t[178]||(t[178]=[(0,a.Lk)("i",{class:"fas fa-download me-1"},null,-1),(0,a.eW)("Download ")]),8,cl)])):((0,a.uX)(),(0,a.CE)("div",dl,[t[181]||(t[181]=(0,a.Lk)("div",{class:"file-icon"},[(0,a.Lk)("i",{class:"fas fa-file fa-3x text-secondary"})],-1)),(0,a.Lk)("div",ul,[(0,a.Lk)("p",ml,(0,i.v_)(e.document_name),1),(0,a.Lk)("small",pl,(0,i.v_)(Or.formatFileSize(e.file_size)),1)]),(0,a.Lk)("button",{class:"btn btn-sm btn-outline-primary mt-2",onClick:t=>Or.downloadDocument(e)},t[180]||(t[180]=[(0,a.Lk)("i",{class:"fas fa-download me-1"},null,-1),(0,a.eW)("Download ")]),8,hl)]))]),(0,a.Lk)("div",fl,[(0,a.Lk)("small",gl,[t[182]||(t[182]=(0,a.Lk)("i",{class:"fas fa-clock me-1"},null,-1)),(0,a.eW)(" Uploaded "+(0,i.v_)(Or.formatDate(e.created_at)),1)])])])])))),128))])])):((0,a.uX)(),(0,a.CE)("div",kl,[(0,a.Lk)("div",bl,[t[183]||(t[183]=(0,a.Lk)("i",{class:"fas fa-folder-open fa-3x text-muted mb-3"},null,-1)),t[184]||(t[184]=(0,a.Lk)("h6",{class:"text-muted"},"No Documents Uploaded",-1)),(0,a.Lk)("p",vl,["Cedula"===Br.currentRequest.document_type?((0,a.uX)(),(0,a.CE)("span",yl," Cedula requests typically don't require supporting documents. ")):((0,a.uX)(),(0,a.CE)("span",_l," The client hasn't uploaded any supporting documents yet. "))])])]))])])])]),(0,a.Lk)("div",Ll,[t[190]||(t[190]=(0,a.Lk)("div",{class:"card-header"},[(0,a.Lk)("h6",{class:"mb-0"},[(0,a.Lk)("i",{class:"fas fa-history me-2"}),(0,a.eW)("Status History")])],-1)),(0,a.Lk)("div",ql,[Br.currentRequest.status_history&&Br.currentRequest.status_history.length>0?((0,a.uX)(),(0,a.CE)("div",wl,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(Br.currentRequest.status_history,((e,s)=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:(0,i.C4)(["timeline-item",{"timeline-item-last":s===Br.currentRequest.status_history.length-1}])},[(0,a.Lk)("div",{class:(0,i.C4)(["timeline-marker",`bg-${Or.getStatusColor(e.new_status_name)}`])},t[186]||(t[186]=[(0,a.Lk)("i",{class:"fas fa-circle"},null,-1)]),2),(0,a.Lk)("div",Rl,[(0,a.Lk)("div",Cl,[(0,a.Lk)("span",{class:(0,i.C4)(["badge",`bg-${Or.getStatusColor(e.new_status_name)}`])},(0,i.v_)(Or.formatStatus(e.new_status_name)),3),(0,a.Lk)("small",Fl,(0,i.v_)(Or.formatDateTime(e.changed_at)),1)]),(0,a.Lk)("div",Dl,[(0,a.Lk)("p",xl,[t[187]||(t[187]=(0,a.Lk)("strong",null,"Changed by:",-1)),(0,a.eW)(" "+(0,i.v_)(Or.getChangedByName(e)),1)]),e.old_status_name?((0,a.uX)(),(0,a.CE)("p",El,[t[188]||(t[188]=(0,a.Lk)("strong",null,"From:",-1)),(0,a.eW)(" "+(0,i.v_)(Or.formatStatus(e.old_status_name)),1)])):(0,a.Q3)("",!0)])])],2)))),128))])):((0,a.uX)(),(0,a.CE)("div",Sl,t[189]||(t[189]=[(0,a.Lk)("i",{class:"fas fa-history fa-2x mb-2"},null,-1),(0,a.Lk)("p",null,"No status history available",-1)])))])])]),(0,a.Lk)("div",Al,[(0,a.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[27]||(t[27]=e=>Br.showRequestDetails=!1)},t[191]||(t[191]=[(0,a.Lk)("i",{class:"fas fa-times me-1"},null,-1),(0,a.eW)(" Close ")])),(0,a.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[28]||(t[28]=(...e)=>Or.refreshRequestDetails&&Or.refreshRequestDetails(...e))},t[192]||(t[192]=[(0,a.Lk)("i",{class:"fas fa-sync-alt me-1"},null,-1),(0,a.eW)(" Refresh ")]))])])])])):(0,a.Q3)("",!0),Br.showQuickReject&&Br.selectedRequestForReject?((0,a.uX)(),(0,a.CE)("div",Pl,[(0,a.Lk)("div",Tl,[(0,a.Lk)("div",Il,[(0,a.Lk)("div",Ml,[t[193]||(t[193]=(0,a.Lk)("h5",{class:"modal-title"},[(0,a.Lk)("i",{class:"fas fa-times-circle text-danger me-2"}),(0,a.eW)(" Reject Request ")],-1)),(0,a.Lk)("button",{type:"button",class:"btn-close",onClick:t[29]||(t[29]=(...e)=>Or.closeQuickRejectModal&&Or.closeQuickRejectModal(...e))})]),(0,a.Lk)("div",Xl,[t[198]||(t[198]=(0,a.Lk)("div",{class:"alert alert-warning"},[(0,a.Lk)("i",{class:"fas fa-exclamation-triangle me-2"}),(0,a.eW)(" You are about to reject this document request. This action will notify the client immediately. ")],-1)),(0,a.Lk)("div",Nl,[t[197]||(t[197]=(0,a.Lk)("strong",null,"Request Details:",-1)),(0,a.Lk)("ul",jl,[(0,a.Lk)("li",null,[t[194]||(t[194]=(0,a.Lk)("strong",null,"Request Number:",-1)),(0,a.eW)(" "+(0,i.v_)(Br.selectedRequestForReject.request_number),1)]),(0,a.Lk)("li",null,[t[195]||(t[195]=(0,a.Lk)("strong",null,"Document Type:",-1)),(0,a.eW)(" "+(0,i.v_)(Br.selectedRequestForReject.document_type),1)]),(0,a.Lk)("li",null,[t[196]||(t[196]=(0,a.Lk)("strong",null,"Client:",-1)),(0,a.eW)(" "+(0,i.v_)(Br.selectedRequestForReject.client_name),1)])])])]),(0,a.Lk)("div",Ul,[(0,a.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[30]||(t[30]=(...e)=>Or.closeQuickRejectModal&&Or.closeQuickRejectModal(...e)),disabled:Br.quickRejectForm.loading},t[199]||(t[199]=[(0,a.Lk)("i",{class:"fas fa-times me-1"},null,-1),(0,a.eW)(" Cancel ")]),8,Wl),(0,a.Lk)("button",{type:"button",class:"btn btn-danger",onClick:t[31]||(t[31]=(...e)=>Or.confirmQuickReject&&Or.confirmQuickReject(...e)),disabled:Br.quickRejectForm.loading},[t[201]||(t[201]=(0,a.Lk)("i",{class:"fas fa-times-circle me-1"},null,-1)),Br.quickRejectForm.loading?((0,a.uX)(),(0,a.CE)("span",zl,t[200]||(t[200]=[(0,a.Lk)("i",{class:"fas fa-spinner fa-spin me-1"},null,-1),(0,a.eW)(" Rejecting... ")]))):((0,a.uX)(),(0,a.CE)("span",Vl,"Reject Request"))],8,$l)])])])])):(0,a.Q3)("",!0),Br.showQuickApprove&&Br.selectedRequestForApprove?((0,a.uX)(),(0,a.CE)("div",Ql,[(0,a.Lk)("div",Bl,[(0,a.Lk)("div",Ol,[(0,a.Lk)("div",Hl,[t[202]||(t[202]=(0,a.Lk)("h5",{class:"modal-title"},[(0,a.Lk)("i",{class:"fas fa-check-circle text-success me-2"}),(0,a.eW)(" Approve Request ")],-1)),(0,a.Lk)("button",{type:"button",class:"btn-close",onClick:t[32]||(t[32]=(...e)=>Or.closeQuickApproveModal&&Or.closeQuickApproveModal(...e))})]),(0,a.Lk)("div",Gl,[t[208]||(t[208]=(0,a.Lk)("div",{class:"alert alert-info"},[(0,a.Lk)("i",{class:"fas fa-info-circle me-2"}),(0,a.eW)(" You are about to approve this document request. This action will notify the client immediately and move the request to the next processing stage. ")],-1)),(0,a.Lk)("div",Yl,[t[206]||(t[206]=(0,a.Lk)("strong",null,"Request Details:",-1)),(0,a.Lk)("ul",Kl,[(0,a.Lk)("li",null,[t[203]||(t[203]=(0,a.Lk)("strong",null,"Request Number:",-1)),(0,a.eW)(" "+(0,i.v_)(Br.selectedRequestForApprove.request_number),1)]),(0,a.Lk)("li",null,[t[204]||(t[204]=(0,a.Lk)("strong",null,"Document Type:",-1)),(0,a.eW)(" "+(0,i.v_)(Br.selectedRequestForApprove.document_type),1)]),(0,a.Lk)("li",null,[t[205]||(t[205]=(0,a.Lk)("strong",null,"Client:",-1)),(0,a.eW)(" "+(0,i.v_)(Br.selectedRequestForApprove.client_name),1)])])]),Br.quickApproveForm.error?((0,a.uX)(),(0,a.CE)("div",Jl,[t[207]||(t[207]=(0,a.Lk)("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),(0,a.eW)(" "+(0,i.v_)(Br.quickApproveForm.error),1)])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Zl,[(0,a.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[33]||(t[33]=(...e)=>Or.closeQuickApproveModal&&Or.closeQuickApproveModal(...e)),disabled:Br.quickApproveForm.loading},t[209]||(t[209]=[(0,a.Lk)("i",{class:"fas fa-times me-1"},null,-1),(0,a.eW)(" Cancel ")]),8,er),(0,a.Lk)("button",{type:"button",class:"btn btn-success",onClick:t[34]||(t[34]=(...e)=>Or.confirmQuickApprove&&Or.confirmQuickApprove(...e)),disabled:Br.quickApproveForm.loading},[t[211]||(t[211]=(0,a.Lk)("i",{class:"fas fa-check-circle me-1"},null,-1)),Br.quickApproveForm.loading?((0,a.uX)(),(0,a.CE)("span",sr,t[210]||(t[210]=[(0,a.Lk)("i",{class:"fas fa-spinner fa-spin me-1"},null,-1),(0,a.eW)(" Approving... ")]))):((0,a.uX)(),(0,a.CE)("span",ar,"Approve Request"))],8,tr)])])])])):(0,a.Q3)("",!0)],2)])]),Br.showImageModal&&Br.selectedImage?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"modal fade show d-block",tabindex:"-1",style:{"background-color":"rgba(0,0,0,0.8)"},onClick:t[42]||(t[42]=(0,o.D$)(((...e)=>Or.closeImageModal&&Or.closeImageModal(...e)),["self"]))},[(0,a.Lk)("div",ir,[(0,a.Lk)("div",or,[(0,a.Lk)("div",lr,[(0,a.Lk)("h5",rr,[t[212]||(t[212]=(0,a.Lk)("i",{class:"fas fa-image me-2"},null,-1)),(0,a.eW)(" "+(0,i.v_)(Br.selectedImage.document_name),1)]),(0,a.Lk)("div",nr,[(0,a.Lk)("button",{type:"button",class:"btn btn-outline-light btn-sm me-2",onClick:t[35]||(t[35]=e=>Or.downloadDocument(Br.selectedImage)),disabled:!Br.documentUrls[Br.selectedImage.id]||Br.imageLoadingInModal,title:"Download"},t[213]||(t[213]=[(0,a.Lk)("i",{class:"fas fa-download"},null,-1)]),8,cr),(0,a.Lk)("button",{type:"button",class:"btn-close btn-close-white",onClick:t[36]||(t[36]=(...e)=>Or.closeImageModal&&Or.closeImageModal(...e)),"aria-label":"Close",title:"Close"})])]),(0,a.Lk)("div",dr,[(0,a.Lk)("div",ur,[Br.documentUrls[Br.selectedImage.id]&&!Br.imageLoadingInModal?((0,a.uX)(),(0,a.CE)("img",{key:0,src:Br.documentUrls[Br.selectedImage.id],alt:Br.selectedImage.document_name,class:"modal-image",onError:t[37]||(t[37]=(...e)=>Or.handleImageError&&Or.handleImageError(...e)),onLoad:t[38]||(t[38]=(...e)=>Or.onModalImageLoad&&Or.onModalImageLoad(...e)),loading:"lazy"},null,40,mr)):Br.imageLoadingInModal||Br.loadingDocuments.has(Br.selectedImage.id)?((0,a.uX)(),(0,a.CE)("div",pr,t[214]||(t[214]=[(0,a.Fv)('<div class="loading-content" data-v-31566372><i class="fas fa-spinner fa-spin fa-3x mb-3" data-v-31566372></i><span class="loading-text" data-v-31566372>Loading high-resolution image...</span><div class="loading-progress mt-2" data-v-31566372><div class="progress-bar" data-v-31566372></div></div></div>',1)]))):Br.modalImageError||Br.failedDocuments.has(Br.selectedImage.id)?((0,a.uX)(),(0,a.CE)("div",hr,[t[216]||(t[216]=(0,a.Lk)("i",{class:"fas fa-exclamation-triangle fa-3x mb-3"},null,-1)),t[217]||(t[217]=(0,a.Lk)("span",{class:"error-text"},"Failed to load image",-1)),(0,a.Lk)("button",{class:"btn btn-outline-light mt-3",onClick:t[39]||(t[39]=e=>Or.retryLoadDocument(Br.selectedImage)),disabled:Br.imageLoadingInModal},t[215]||(t[215]=[(0,a.Lk)("i",{class:"fas fa-redo me-2"},null,-1),(0,a.eW)("Retry ")]),8,fr)])):((0,a.uX)(),(0,a.CE)("div",gr,t[218]||(t[218]=[(0,a.Lk)("i",{class:"fas fa-image fa-3x mb-3"},null,-1),(0,a.Lk)("span",{class:"loading-text"},"Preparing image...",-1)])))])]),(0,a.Lk)("div",kr,[(0,a.Lk)("div",br,[(0,a.Lk)("div",vr,[(0,a.Lk)("span",yr,(0,i.v_)(Or.getDocumentTypeDisplayName(Br.selectedImage.document_type)),1),(0,a.Lk)("small",_r,(0,i.v_)(Or.formatFileSize(Br.selectedImage.file_size))+" • Uploaded "+(0,i.v_)(Or.formatDate(Br.selectedImage.created_at)),1)]),(0,a.Lk)("div",Lr,[(0,a.Lk)("button",{type:"button",class:"btn btn-outline-primary me-2",onClick:t[40]||(t[40]=e=>Or.downloadDocument(Br.selectedImage)),disabled:!Br.documentUrls[Br.selectedImage.id]||Br.imageLoadingInModal},t[219]||(t[219]=[(0,a.Lk)("i",{class:"fas fa-download me-1"},null,-1),(0,a.eW)("Download ")]),8,qr),(0,a.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[41]||(t[41]=(...e)=>Or.closeImageModal&&Or.closeImageModal(...e))},t[220]||(t[220]=[(0,a.Lk)("i",{class:"fas fa-times me-1"},null,-1),(0,a.eW)("Close ")]))])])])])])])):(0,a.Q3)("",!0),(0,a.Lk)("div",wr,[(0,a.Lk)("div",Rr,[(0,a.Lk)("div",Cr,[t[232]||(t[232]=(0,a.Lk)("div",{class:"modal-header"},[(0,a.Lk)("h5",{class:"modal-title",id:"verificationModalLabel"},[(0,a.Lk)("i",{class:"fas fa-id-card me-2"}),(0,a.eW)(" Family Member Verification ")]),(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),(0,a.Lk)("div",Fr,[Br.currentVerification?((0,a.uX)(),(0,a.CE)("div",Dr,[(0,a.Lk)("div",xr,[t[223]||(t[223]=(0,a.Lk)("div",{class:"card-header"},[(0,a.Lk)("h6",{class:"mb-0"},"Beneficiary Information")],-1)),(0,a.Lk)("div",Er,[(0,a.Lk)("div",Sr,[(0,a.Lk)("div",Ar,[t[221]||(t[221]=(0,a.Lk)("strong",null,"Name:",-1)),(0,a.eW)(" "+(0,i.v_)(Br.currentVerification.beneficiary_name),1)]),(0,a.Lk)("div",Pr,[t[222]||(t[222]=(0,a.Lk)("strong",null,"Relationship:",-1)),(0,a.eW)(" "+(0,i.v_)(Br.currentVerification.relationship),1)])])])]),(0,a.Lk)("div",Tr,[t[225]||(t[225]=(0,a.Lk)("div",{class:"card-header"},[(0,a.Lk)("h6",{class:"mb-0"},"Verification Image")],-1)),(0,a.Lk)("div",Ir,[Br.currentVerification.image_url?((0,a.uX)(),(0,a.CE)("img",{key:0,src:Br.currentVerification.image_url,class:"img-fluid rounded border",style:{"max-height":"400px"},alt:"Verification Image"},null,8,Mr)):((0,a.uX)(),(0,a.CE)("div",Xr,t[224]||(t[224]=[(0,a.Lk)("i",{class:"fas fa-image fa-3x mb-2"},null,-1),(0,a.Lk)("p",null,"No verification image available",-1)])))])]),(0,a.Lk)("div",Nr,[t[229]||(t[229]=(0,a.Lk)("div",{class:"card-header"},[(0,a.Lk)("h6",{class:"mb-0"},"Verification Decision")],-1)),(0,a.Lk)("div",jr,[(0,a.Lk)("div",Ur,[(0,a.Lk)("div",Wr,[t[227]||(t[227]=(0,a.Lk)("label",{class:"form-label"},"Status",-1)),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[43]||(t[43]=e=>Br.verificationForm.status=e),class:"form-select"},t[226]||(t[226]=[(0,a.Lk)("option",{value:"pending"},"Pending Review",-1),(0,a.Lk)("option",{value:"approved"},"Approved",-1),(0,a.Lk)("option",{value:"rejected"},"Rejected",-1)]),512),[[o.u1,Br.verificationForm.status]])]),(0,a.Lk)("div",$r,[t[228]||(t[228]=(0,a.Lk)("label",{class:"form-label"},"Notes (Optional)",-1)),(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":t[44]||(t[44]=e=>Br.verificationForm.notes=e),class:"form-control",rows:"3",placeholder:"Add any notes about the verification decision..."},null,512),[[o.Jo,Br.verificationForm.notes]])])])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",zr,[t[231]||(t[231]=(0,a.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),(0,a.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[45]||(t[45]=(...e)=>Or.saveVerificationStatus&&Or.saveVerificationStatus(...e)),disabled:!Br.verificationForm.status},t[230]||(t[230]=[(0,a.Lk)("i",{class:"fas fa-save me-1"},null,-1),(0,a.eW)(" Save Decision ")]),8,Vr)])])])]),(0,a.bF)(Yr,{request:Br.selectedRequestForPickup,processing:Br.processingPickupAction,onVerify:Or.verifyPickupAuthorization,onReject:Or.rejectPickupAuthorization},null,8,["request","processing","onVerify","onReject"])],64)}s(4114),s(8111),s(2489),s(116),s(7588),s(1701),s(7642),s(8004),s(3853),s(5876),s(2475),s(5024),s(1698);var Br=s(3237),Or=s(2944),Hr=s(4039),Gr=s(9197),Yr=s(9699),Kr=s(4300),Jr=s(8077),Zr=s(4710),en=s(6830),tn=s(9425),sn={name:"RequestHistory",components:{AdminHeader:Br.A,AdminSidebar:Or.A,AuthorizedPickupDocumentsModal:Hr.A},data(){return{loading:!0,sidebarCollapsed:!1,showUserDropdown:!1,isMobile:!1,adminData:null,errorMessage:"",viewMode:"table",requests:[],selectedRequests:[],currentRequest:null,statusOptions:[],selectedRequestForPickup:null,processingPickupAction:!1,pagination:{currentPage:1,totalPages:1,totalItems:0,itemsPerPage:10},filters:{status:"",document_type:"",priority:"",search:"",date_from:"",date_to:""},pdfExportForm:{reportType:"daily",selectedDate:"",selectedWeek:"",selectedMonth:"",loading:!1},requestStats:{total:0,pending:0,approved:0,completed:0,thisMonth:0},documentTypes:[],searchTimeout:null,showFilters:!1,showBulkActions:!1,showRequestDetails:!1,showRejectForm:!1,showQuickReject:!1,showQuickApprove:!1,currentVerification:null,verificationForm:{status:"pending",notes:""},showImageModal:!1,selectedImage:null,bulkAction:"",documentUrls:{},loadingDocuments:new Set,failedDocuments:new Set,imageLoadingInModal:!1,modalImageError:!1,statusUpdateForm:{status_id:""},rejectForm:{reason:""},quickRejectForm:{loading:!1,error:""},selectedRequestForReject:null,quickApproveForm:{loading:!1,error:""},selectedRequestForApprove:null,paymentVerificationForm:{amount_received:"",receipt_number:"",loading:!1,error:""},pickupScheduleForm:{scheduled_date:"",scheduled_time_start:"",scheduled_time_end:"",loading:!1,error:""},refreshInterval:null,autoRefreshEnabled:!0,refreshRate:3e4,lastRefresh:null}},async mounted(){Gr["default"].isLoggedIn()&&"admin"===Gr["default"].getUserType()?(this.initializeUI(),await this.loadComponentData(),this.initializePDFExportForm(),this.initializeRealTimeFeatures()):this.$router.push("/login")},beforeUnmount(){this.handleResize&&window.removeEventListener("resize",this.handleResize),this.cleanupRealTimeFeatures(),this.cleanupDocumentUrls()},computed:{activeMenu(){const e=this.$route.path;return e.includes("/admin/users")?"users":e.includes("/admin/requests")?"requests":e.includes("/admin/history")?"history":e.includes("/admin/reports")?"reports":e.includes("/admin/settings")?"settings":e.includes("/admin/activity-logs")?"activity":e.includes("/admin/profile")?"profile":"dashboard"}},methods:{initializeUI(){if(this.isMobile=window.innerWidth<=768,this.isMobile)this.sidebarCollapsed=!0;else{const e=localStorage.getItem("adminSidebarCollapsed");this.sidebarCollapsed=!!e&&JSON.parse(e)}this.handleResize=()=>{const e=this.isMobile;if(this.isMobile=window.innerWidth<=768,this.isMobile&&!e)this.sidebarCollapsed=!0;else if(!this.isMobile&&e){const e=localStorage.getItem("adminSidebarCollapsed");this.sidebarCollapsed=!!e&&JSON.parse(e)}},window.addEventListener("resize",this.handleResize)},initializePDFExportForm(){this.pdfExportForm.selectedDate=this.getCurrentDate(),this.pdfExportForm.selectedWeek=this.getCurrentWeek(),this.pdfExportForm.selectedMonth=this.getCurrentMonth()},handleSidebarToggle(){this.sidebarCollapsed=!this.sidebarCollapsed,localStorage.setItem("adminSidebarCollapsed",JSON.stringify(this.sidebarCollapsed))},handleMenuChange(e){const t={dashboard:"/admin/dashboard",users:"/admin/users",requests:"/admin/requests",history:"/admin/history",reports:"/admin/reports",settings:"/admin/settings",activity:"/admin/activity-logs",profile:"/admin/profile"};this.isMobile&&(this.sidebarCollapsed=!0),t[e]&&this.$router.push(t[e])},handleUserDropdownToggle(){this.showUserDropdown=!this.showUserDropdown},async handleOpenRequestModal(e){console.log("🔔 AdminRequests: Opening request modal from notification:",e);try{const{requestId:t,focusTab:s}=e;if(!t)return void console.error("❌ No request ID provided for modal");await this.viewRequestDetails(t),s&&setTimeout((()=>{this.focusModalTab(s)}),300),console.log("✅ Request modal opened successfully")}catch(t){console.error("❌ Error opening request modal:",t),this.showErrorMessage("Failed to open request details")}},focusModalTab(e){try{console.log("🎯 Focusing on modal tab:",e);const t={payment:()=>{const e=document.querySelector("#requestDetailsModal .payment-section");e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),e.classList.add("highlight-section"),setTimeout((()=>e.classList.remove("highlight-section")),2e3))},status:()=>{const e=document.querySelector("#requestDetailsModal .status-section");e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),e.classList.add("highlight-section"),setTimeout((()=>e.classList.remove("highlight-section")),2e3))},documents:()=>{const e=document.querySelector("#requestDetailsModal .documents-section");e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),e.classList.add("highlight-section"),setTimeout((()=>e.classList.remove("highlight-section")),2e3))}},s=t[e];s?s():console.log("⚠️ Unknown tab name:",e)}catch(t){console.error("❌ Error focusing modal tab:",t)}},handleMenuAction(e){"profile"===e?this.$router.push("/admin/profile"):"settings"===e&&this.$router.push("/admin/settings"),this.showUserDropdown=!1},closeMobileSidebar(){this.isMobile&&(this.sidebarCollapsed=!0)},handleLogout(){Gr["default"].logout(),this.$router.push("/login")},async loadAdminProfile(){try{const e=Gr["default"].getCurrentUser();e&&e.profile?this.adminData=e.profile:this.adminData={first_name:e?.username||"Admin",role:e?.role||"admin"}}catch(e){console.error("Failed to load admin profile:",e);const t=Gr["default"].getCurrentUser();this.adminData={first_name:t?.username||"Admin",role:t?.role||"admin"}}},async loadComponentData(){this.loading=!0;try{await Promise.all([this.loadAdminProfile(),this.loadStatusOptions(),this.loadDocumentTypes(),this.loadRequests(),this.loadDashboardStats()])}catch(e){console.error("Failed to load component data:",e);const t=Yr.A.parseError(e);this.errorMessage=t.message||"Failed to load request data",401===t.status&&(Gr["default"].logout(),this.$router.push("/login"))}finally{this.loading=!1}},async loadStatusOptions(){try{console.log("🔄 Loading status options...");const e=await Yr.A.getStatusOptions();console.log("📋 Status options response:",e),e.success?(this.statusOptions=e.data||[],console.log("✅ Status options loaded:",this.statusOptions)):(console.error("❌ Failed to load status options:",e.message),this.statusOptions=[])}catch(e){console.error("❌ Error loading status options:",e),this.statusOptions=[],this.showToast("Error","Failed to load status options","error")}},async loadDocumentTypes(){try{console.log("🔄 Loading document types...");const e=await Yr.A.getDocumentTypes();console.log("📋 Document types response:",e),e.success?(this.documentTypes=e.data||[],console.log("✅ Document types loaded:",this.documentTypes)):(console.error("❌ Failed to load document types:",e.message),this.documentTypes=[])}catch(e){console.error("❌ Error loading document types:",e),this.documentTypes=[],this.showToast("Error","Failed to load document types","error")}},async loadDashboardStats(){try{console.log("🔄 Loading dashboard stats...");const e=await Yr.A.getDashboardStats();if(console.log("📊 Dashboard stats response:",e),e.success){const t=e.data;this.requestStats={total:t.overview?.total_requests||0,pending:t.overview?.pending_requests||0,approved:t.overview?.approved_requests||0,completed:t.overview?.completed_requests||0,thisMonth:t.time_based?.today_requests||0},console.log("✅ Request stats updated:",this.requestStats)}else console.error("❌ Failed to load dashboard stats:",e.message)}catch(e){console.error("❌ Error loading dashboard stats:",e),this.requestStats={total:0,pending:0,approved:0,completed:0,thisMonth:0}}},async loadRequests(){try{const e={page:this.pagination.currentPage,limit:this.pagination.itemsPerPage,priority:this.filters.priority,search:this.filters.search,date_from:this.filters.date_from,date_to:this.filters.date_to};this.filters.document_type&&(e.document_type=this.filters.document_type),this.filters.status&&(e.status=this.filters.status),console.log("🔍 RequestHistory: Loading historical requests (completed and cancelled)..."),console.log("📋 RequestHistory: Params:",e);const t=await Yr.A.getAllRequests(e);if(console.log("📥 RequestHistory: API response:",t),t.success){const e=t.data.requests||[],s=e.filter((e=>{const t=e.status_name.toLowerCase();return"completed"===t||"cancelled"===t}));this.requests=s,console.log("✅ RequestHistory: Loaded historical requests:",this.requests.length,"requests"),console.log("📊 RequestHistory: Breakdown - Total:",e.length,"Historical:",s.length),this.requests.length>0&&console.log("📋 RequestHistory: First request:",this.requests[0]),this.pagination={currentPage:t.data.pagination?.current_page||1,totalPages:t.data.pagination?.total_pages||1,totalItems:s.length,itemsPerPage:t.data.pagination?.per_page||10}}else console.error("❌ RequestHistory: API returned unsuccessful response:",t)}catch(e){console.error("❌ RequestHistory: Failed to load requests:",e);const t=Yr.A.parseError(e);this.errorMessage=t.message||"Failed to load requests",this.requests=[]}},applyFilters(){this.pagination.currentPage=1,this.loadRequests()},debouncedSearch(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((()=>{this.applyFilters()}),300)},clearFilters(){this.filters={status:"",document_type:"",priority:"",search:"",date_from:"",date_to:""},this.applyFilters()},changePage(e){e>=1&&e<=this.pagination.totalPages&&(this.pagination.currentPage=e,this.loadRequests())},changeItemsPerPage(e){this.pagination.itemsPerPage=e,this.pagination.currentPage=1,this.loadRequests()},goBack(){this.$router.push("/admin/dashboard")},toggleRequestSelection(e){const t=this.selectedRequests.indexOf(e);t>-1?this.selectedRequests.splice(t,1):this.selectedRequests.push(e)},selectAllRequests(){this.selectedRequests.length===this.requests.length?this.selectedRequests=[]:this.selectedRequests=this.requests.map((e=>e.id))},async viewRequestDetails(e){console.log("🚀 View details clicked for request ID:",e);try{const t=await Yr.A.getRequestDetails(e);if(console.log("📋 API Response received:",t),t.success){console.log("✅ Response successful, data:",t.data);const e=t.data;console.log("🎯 COMPLETE RESPONSE DATA:",e),console.log("🎯 ALL DATA KEYS:",Object.keys(e)),console.log("🎯 CLIENT PROFILE FIELDS DEBUG:"),console.log("   Birth Date:",e.client_birth_date),console.log("   Gender:",e.client_gender),console.log("   Civil Status ID:",e.client_civil_status_id),console.log("   Nationality:",e.client_nationality),console.log("   Years of Residency:",e.client_years_of_residency),console.log("   Months of Residency:",e.client_months_of_residency),console.log("🔍 SEARCHING FOR SIMILAR FIELDS:"),Object.keys(e).forEach((t=>{(t.includes("birth")||t.includes("gender")||t.includes("civil")||t.includes("nationality")||t.includes("residency"))&&console.log(`   Found: ${t} = ${e[t]}`)})),this.currentRequest=t.data,this.showRequestDetails=!0,this.statusUpdateForm={status_id:""},this.rejectForm={reason:""},this.showRejectForm=!1,console.log("📋 Request details loaded:",t.data),t.data.uploaded_documents&&t.data.uploaded_documents.length>0&&this.loadDocumentUrls(t.data.uploaded_documents),this.showToast("Success",`Request details loaded for ${t.data.request_number}`,"success")}}catch(t){console.error("Failed to load request details:",t);const e=Yr.A.parseError(t);this.errorMessage=e.message||"Failed to load request details",this.showToast("Error","Failed to load request details","error")}},async refreshRequestDetails(){this.currentRequest&&await this.viewRequestDetails(this.currentRequest.id)},async updateRequestStatusFromModal(){if(console.log("🔄 Updating request status..."),console.log("📋 Status form data:",this.statusUpdateForm),console.log("📋 Current request:",this.currentRequest),!this.statusUpdateForm.status_id||!this.currentRequest)return console.error("❌ Missing required data for status update"),void this.showToast("Error","Please select a status to update","error");const e=this.currentRequest.status_name,t=this.statusUpdateForm.status_id,s=this.statusOptions.find((e=>e.id==t));if(console.log("🔍 Status validation debug:"),console.log("   Current status:",e),console.log("   New status ID:",t,"(type:",typeof t,")"),console.log("   New status object:",s),console.log("   Available transitions:",this.getAllowedStatusTransitions(e.toLowerCase())),console.log("   Available status options:",this.getAvailableStatusOptions()),console.log("   All status options:",this.statusOptions),!this.isValidStatusChange(e,t))return console.error("❌ Invalid status change attempted"),console.error("   From:",e,"To:",s?.status_name),void this.showToast("Error","This status change is not allowed","error");try{const e={status_id:parseInt(this.statusUpdateForm.status_id)};console.log("📤 Sending status update:",e);const t=await Yr.A.updateRequestStatus(this.currentRequest.id,e);console.log("📥 Status update response:",t),t.success?(await this.refreshRequestDetails(),await this.loadRequests(),this.statusUpdateForm={status_id:""},this.errorMessage="",this.showToast("Success","Request status updated successfully","success")):(console.error("❌ Status update failed:",t.message),this.showToast("Error",t.message||"Failed to update request status","error"))}catch(a){console.error("❌ Error updating request status:",a);const e=Yr.A.parseError(a);this.errorMessage=e.message||"Failed to update request status",this.showToast("Error",e.message||"Failed to update request status","error")}},async rejectRequestFromModal(){if(this.currentRequest&&this.rejectForm.reason.trim())try{const e=await Yr.A.rejectRequest(this.currentRequest.id,{reason:this.rejectForm.reason});e.success&&(await this.refreshRequestDetails(),await this.loadRequests(),this.rejectForm={reason:""},this.showRejectForm=!1)}catch(e){console.error("Failed to reject request:",e);const t=Yr.A.parseError(e);this.errorMessage=t.message||"Failed to reject request"}},async updateRequestStatus(e,t,s=""){try{const a=await Yr.A.updateRequestStatus(e,{status_id:t,reason:s});a.success&&(await this.loadRequests(),await this.loadDashboardStats(),this.errorMessage="")}catch(a){console.error("Failed to update request status:",a);const e=Yr.A.parseError(a);this.errorMessage=e.message||"Failed to update request status"}},async approveRequest(e,t=""){try{const s=await Yr.A.approveRequest(e,{reason:t});s.success&&(await this.loadRequests(),await this.loadDashboardStats(),this.errorMessage="")}catch(s){console.error("Failed to approve request:",s);const e=Yr.A.parseError(s);this.errorMessage=e.message||"Failed to approve request"}},async rejectRequest(e,t){if(t&&""!==t.trim())try{const s=await Yr.A.rejectRequest(e,{reason:t});s.success&&(await this.loadRequests(),await this.loadDashboardStats(),this.errorMessage="")}catch(s){console.error("Failed to reject request:",s);const e=Yr.A.parseError(s);this.errorMessage=e.message||"Failed to reject request"}else this.errorMessage="Rejection reason is required"},canApprove(e){const t=this.getAllowedStatusTransitions(e.status_name.toLowerCase());return t.includes("approved")},canReject(e){const t=this.getAllowedStatusTransitions(e.status_name.toLowerCase());return t.includes("rejected")},getStatusExplanation(e,t){const s=e.status_name.toLowerCase(),a=this.getAllowedStatusTransitions(s);return"approve"===t?a.includes("approved")?"Click to approve this request":"approved"===s?"This request has already been approved":"rejected"===s?"Rejected requests can be resubmitted, not directly approved":"completed"===s?"This request has already been completed":`Cannot approve from ${this.formatStatus(s)} status`:"reject"===t?a.includes("rejected")?"Click to reject this request":"rejected"===s?"This request has already been rejected":"completed"===s?"Cannot reject a completed request":`Cannot reject from ${this.formatStatus(s)} status`:`Request status: ${this.formatStatus(s)}`},isValidStatusChange(e,t){if(!e||!t)return!1;const s=this.statusOptions.find((e=>e.id==t));if(!s)return!1;const a=e.toLowerCase(),i=s.status_name.toLowerCase();if(a===i)return!1;const o=this.getAllowedStatusTransitions(a);return o.includes(i)},needsPaymentVerification(e){return"payment_pending"===e.status_name&&e.payment_method&&!e.payment_method.includes("PayMongo")&&"paid"!==e.payment_status},canSchedulePickup(e){return"ready_for_pickup"===e.status_name},getPaymentStatusColor(e){const t={pending:"bg-warning",processing:"bg-info",paid:"bg-success",failed:"bg-danger",refunded:"bg-secondary",cancelled:"bg-dark"};return t[e]||"bg-secondary"},formatPaymentStatus(e){const t={pending:"Pending",processing:"Processing",paid:"Paid",failed:"Failed",refunded:"Refunded",cancelled:"Cancelled"};return t[e]||"Unknown"},getTomorrowDate(){const e=new Date;return e.setDate(e.getDate()+1),e.toISOString().split("T")[0]},isPickupFormValid(){return this.pickupScheduleForm.scheduled_date&&this.pickupScheduleForm.scheduled_time_start&&this.pickupScheduleForm.scheduled_time_end&&this.pickupScheduleForm.scheduled_time_start<this.pickupScheduleForm.scheduled_time_end},getAvailableStatusOptions(){if(!this.currentRequest||!this.statusOptions)return[];const e=this.currentRequest.status_name.toLowerCase(),t=["completed","cancelled"];if(t.includes(e))return[];const s=this.getAllowedStatusTransitions(e);return this.statusOptions.filter((e=>s.includes(e.status_name.toLowerCase())))},getAllowedStatusTransitions(e){const t=this.currentRequest&&("Cash Payment"===this.currentRequest.payment_method||"Cash"===this.currentRequest.payment_method||"CASH"===this.currentRequest.payment_method_code||1===this.currentRequest.payment_method_id||!this.currentRequest.is_online_payment);console.log("🔍 Cash payment detection:",{payment_method:this.currentRequest?.payment_method,payment_method_code:this.currentRequest?.payment_method_code,payment_method_id:this.currentRequest?.payment_method_id,is_online_payment:this.currentRequest?.is_online_payment,isCashPayment:t});const s={pending:["approved","cancelled","rejected"],under_review:["approved","rejected","cancelled"],approved:t?["payment_confirmed","processing","cancelled"]:["payment_confirmed","cancelled"],payment_confirmed:["processing"],processing:["ready_for_pickup"],ready_for_pickup:["completed","cancelled"],rejected:["pending","under_review"],completed:[],cancelled:[]};return s[e]||[]},getUpdateButtonTitle(){return this.statusUpdateForm.status_id?this.isValidStatusChange(this.currentRequest.status_name,this.statusUpdateForm.status_id)?"Update request status":"Invalid status change":"Please select a new status"},getActionButtonText(){if(!this.statusUpdateForm.status_id)return"Update Status";const e=this.statusOptions.find((e=>e.id===parseInt(this.statusUpdateForm.status_id)));if(!e)return"Update Status";const t=e.status_name.toLowerCase();switch(t){case"approved":return"Approve Request";case"rejected":return"Reject Request";case"under_review":return"Move to Review";case"processing":return"Start Processing";case"ready_for_pickup":return"Mark Ready for Pickup";case"completed":return"Complete Request";default:return`Update to ${e.status_name}`}},async quickApprove(e){console.log("🚀 Quick approve clicked for request:",e);try{this.loading=!0;const t=await Yr.A.approveRequest(e.id,{reason:"Quick approval from admin interface"});t.success&&(await this.loadRequests(),await this.loadDashboardStats(),this.showToast("Success",`Request ${e.request_number} approved successfully`,"success"))}catch(t){console.error("Failed to approve request:",t);const e=Yr.A.parseError(t);this.showToast("Error",e.message||"Failed to approve request","error")}finally{this.loading=!1}},showQuickRejectModal(e){console.log("🚀 Quick reject clicked for request:",e),this.selectedRequestForReject=e,this.quickRejectForm={loading:!1,error:""},this.showQuickReject=!0},closeQuickRejectModal(){this.showQuickReject=!1,this.selectedRequestForReject=null,this.quickRejectForm={loading:!1,error:""}},async confirmQuickReject(){this.quickRejectForm.loading=!0,this.quickRejectForm.error="";try{const e=await Yr.A.rejectRequest(this.selectedRequestForReject.id,{reason:"Request rejected by admin"});e.success&&(await this.loadRequests(),await this.loadDashboardStats(),this.showToast("Success",`Request ${this.selectedRequestForReject.request_number} rejected successfully`,"success"),this.closeQuickRejectModal())}catch(e){console.error("Failed to reject request:",e);const t=Yr.A.parseError(e);this.quickRejectForm.error=t.message||"Failed to reject request"}finally{this.quickRejectForm.loading=!1}},showQuickApproveModal(e){console.log("🚀 Quick approve clicked for request:",e),this.selectedRequestForApprove=e,this.quickApproveForm={loading:!1,error:""},this.showQuickApprove=!0},closeQuickApproveModal(){this.showQuickApprove=!1,this.selectedRequestForApprove=null,this.quickApproveForm={loading:!1,error:""}},async confirmQuickApprove(){this.quickApproveForm.loading=!0,this.quickApproveForm.error="";try{const e=await Yr.A.approveRequest(this.selectedRequestForApprove.id,{reason:"Quick approval from admin interface"});e.success&&(await this.loadRequests(),await this.loadDashboardStats(),this.showToast("Success",`Request ${this.selectedRequestForApprove.request_number} approved successfully`,"success"),this.closeQuickApproveModal())}catch(e){console.error("Failed to approve request:",e);const t=Yr.A.parseError(e);this.quickApproveForm.error=t.message||"Failed to approve request"}finally{this.quickApproveForm.loading=!1}},async performBulkAction(){if(0!==this.selectedRequests.length)if(this.bulkAction)try{const e=await Yr.A.bulkUpdateRequests({request_ids:this.selectedRequests,status_id:parseInt(this.bulkAction)});e.success&&(await this.loadRequests(),await this.loadDashboardStats(),this.selectedRequests=[],this.bulkAction="",this.showBulkActions=!1,this.errorMessage="")}catch(e){console.error("Failed to perform bulk action:",e);const t=Yr.A.parseError(e);this.errorMessage=t.message||"Failed to perform bulk action"}else this.errorMessage="Please select a bulk action";else this.errorMessage="Please select at least one request"},async exportRequests(){try{const e=await Yr.A.exportRequests(this.filters),t=`document_requests_${(new Date).toISOString().split("T")[0]}.csv`;Yr.A.downloadCSV(e,t)}catch(e){console.error("Failed to export requests:",e);const t=Yr.A.parseError(e);this.errorMessage=t.message||"Failed to export requests"}},async exportToPDF(){if(this.isPDFExportValid())try{this.pdfExportForm.loading=!0;const e=await this.getReportData();if(!e||0===e.length)return void this.showToast("Warning","No data found for the selected date range","warning");const t=new en.uE;this.generatePDFReport(t,e);const s=this.getPDFFilename();t.save(s),this.showToast("Success","PDF report generated successfully","success")}catch(e){console.error("Failed to generate PDF report:",e),this.showToast("Error","Failed to generate PDF report","error")}finally{this.pdfExportForm.loading=!1}else this.showToast("Error","Please select a valid date range for the report","error")},async getReportData(){const e={...this.filters},t=this.getDateRangeForReport();e.date_from=t.from,e.date_to=t.to;try{console.log("📊 Fetching report data with filters:",e);const t=await Yr.A.getAllRequests({...e,page:1,limit:1e3});if(console.log("📊 Raw API response:",t),t.success&&t.data.requests){const e=t.data.requests;console.log("📊 All requests from API:",e),e.length>0&&console.log("📊 Sample request structure:",{request_number:e[0].request_number,total_document_fee:e[0].total_document_fee,total_fee:e[0].total_fee,amount:e[0].amount,all_fields:Object.keys(e[0])});const s=e.filter((e=>["completed","cancelled"].includes(e.status_name.toLowerCase())));return console.log("📊 Filtered requests for PDF:",s),s}return[]}catch(s){throw console.error("Failed to fetch report data:",s),s}},getDateRangeForReport(){const{reportType:e,selectedDate:t,selectedWeek:s,selectedMonth:a}=this.pdfExportForm;switch(e){case"daily":return{from:t,to:t};case"weekly":if(s){const[e,t]=s.split("-W"),a=this.getDateFromWeek(parseInt(e),parseInt(t)),i=new Date(a);return i.setDate(a.getDate()+6),{from:a.toISOString().split("T")[0],to:i.toISOString().split("T")[0]}}break;case"monthly":if(a){const[e,t]=a.split("-"),s=new Date(parseInt(e),parseInt(t)-1,1),i=new Date(parseInt(e),parseInt(t),0);return{from:s.toISOString().split("T")[0],to:i.toISOString().split("T")[0]}}break}return{from:"",to:""}},generatePDFReport(e,t){const s=this.getDateRangeForReport();e.setFontSize(24),e.setFont("helvetica","bold"),e.setTextColor(44,62,80),e.text("BARANGAY DOCUMENT REQUEST HISTORY",105,25,{align:"center"}),e.setDrawColor(52,152,219),e.setLineWidth(1),e.line(20,30,190,30),e.setFontSize(14),e.setFont("helvetica","bold"),e.setTextColor(0,0,0);const a=this.getReportTitle();e.text(a,20,45),e.setFontSize(11),e.setFont("helvetica","normal");const i=this.getDateRangeText(s);e.text(`Report Period: ${i}`,20,55);const o=(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});e.text(`Generated: ${o}`,20,65);const l=this.calculateReportStats(t);if(e.setFillColor(248,249,250),e.setDrawColor(206,212,218),e.roundedRect(20,75,170,35,3,3,"FD"),e.setFontSize(12),e.setFont("helvetica","bold"),e.setTextColor(52,58,64),e.text("SUMMARY STATISTICS",25,85),e.setFontSize(10),e.setFont("helvetica","normal"),e.text(`Total Requests: ${l.total}`,25,95),e.text(`Completed: ${l.completed}`,80,95),e.text(`Cancelled: ${l.cancelled}`,135,95),l.total>0){const t=Math.round(l.completed/l.total*100);e.text(`Completion Rate: ${t}%`,25,105)}if(t&&t.length>0){const s=t.slice(0,100).map((e=>[e.request_number||"N/A",e.client_name||"N/A",e.document_type||"N/A",this.formatStatus(e.status_name)||"N/A",this.formatCurrencyForPDF(this.getAmountForPDF(e)),this.formatDateForPDF(e.requested_at)||"N/A"]));try{console.log("🔧 Calling autoTable function"),(0,tn.Ay)(e,{head:[["Request #","Client Name","Document Type","Status","Amount","Date"]],body:s,startY:125,theme:"grid",headStyles:{fillColor:[52,152,219],textColor:255,fontStyle:"bold",fontSize:8},styles:{fontSize:7,cellPadding:3,overflow:"linebreak",cellWidth:"wrap"},columnStyles:{0:{cellWidth:30,halign:"center"},1:{cellWidth:35,overflow:"linebreak"},2:{cellWidth:38,overflow:"linebreak"},3:{cellWidth:22,halign:"center"},4:{cellWidth:20,halign:"right"},5:{cellWidth:25,halign:"center"}}}),console.log("✅ AutoTable completed successfully")}catch(r){throw console.error("❌ AutoTable call failed:",r),new Error(`AutoTable failed: ${r.message}`)}}this.addPDFFooter(e)},generateManualTable(e,t){let s=125;const a=14,i=12,o=[{x:22,width:30,align:"center"},{x:54,width:35,align:"left"},{x:91,width:38,align:"left"},{x:131,width:22,align:"center"},{x:155,width:20,align:"right"},{x:177,width:25,align:"center"}];e.setFillColor(52,152,219),e.rect(20,s-10,170,i,"F"),e.setDrawColor(206,212,218),e.setLineWidth(.5),e.rect(20,s-10,170,i,"D"),e.setFontSize(9),e.setFont("helvetica","bold"),e.setTextColor(255,255,255);const l=["Request Number","Client Name","Document Type","Status","Amount","Date"],r=s-4;l.forEach(((t,s)=>{const a=o[s];let i,l="left";"center"===a.align?(i=a.x+a.width/2,l="center"):"right"===a.align?(i=a.x+a.width-2,l="right"):(i=a.x+2,l="left"),e.text(t,i,r,{align:l})})),s+=6,e.setTextColor(33,37,41),e.setFont("helvetica","normal"),e.setFontSize(8.5),t.forEach(((t,r)=>{r%2===1&&(e.setFillColor(248,249,250),e.rect(20,s-8,170,a,"F")),e.setDrawColor(206,212,218),e.rect(20,s-8,170,a,"D");const n=[t.request_number||"N/A",this.truncateText(t.client_name||"N/A",18),this.truncateText(t.document_type||"N/A",20),this.formatStatus(t.status_name)||"N/A",this.formatCurrencyForPDF(this.getAmountForPDF(t)),this.formatDateForPDF(t.requested_at)||"N/A"];n.forEach(((t,a)=>{const i=o[a],l=String(t);"center"===i.align?e.text(l,i.x+i.width/2,s,{align:"center"}):"right"===i.align?e.text(l,i.x+i.width-2,s,{align:"right"}):e.text(l,i.x+2,s)})),s+=a,s>260&&(e.addPage(),s=30,e.setFillColor(52,152,219),e.rect(20,s-10,170,i,"F"),e.setTextColor(255,255,255),e.setFont("helvetica","bold"),e.setFontSize(9),l.forEach(((t,a)=>{const i=o[a];"center"===i.align?e.text(t,i.x+i.width/2,s-3,{align:"center"}):"right"===i.align?e.text(t,i.x+i.width-2,s-3,{align:"right"}):e.text(t,i.x+2,s-3)})),s+=4,e.setTextColor(33,37,41),e.setFont("helvetica","normal"),e.setFontSize(8.5))})),this.addPDFFooter(e)},addPDFFooter(e){const t=e.internal.getNumberOfPages();for(let s=1;s<=t;s++)e.setPage(s),e.setDrawColor(206,212,218),e.setLineWidth(.5),e.line(20,280,190,280),e.setFontSize(8),e.setFont("helvetica","normal"),e.setTextColor(108,117,125),e.text("Barangay Document Management System",20,285),e.text("Official Document Request Report",20,290),e.text(`Page ${s} of ${t}`,190,285,{align:"right"}),e.text(`Generated: ${(new Date).toLocaleDateString()}`,190,290,{align:"right"})},truncateText(e,t){return e?e.length>t?e.substring(0,t-3)+"...":e:""},formatDateForPDF(e){if(!e)return"N/A";const t=new Date(e),s=t.toLocaleDateString("en-US",{month:"short"}),a=t.getDate().toString().padStart(2,"0");return`${s} ${a}`},formatCurrencyForPDF(e){console.log("💰 formatCurrencyForPDF input:",{original:e,type:typeof e,parsed:parseFloat(e),isNaN:isNaN(parseFloat(e))});const t=parseFloat(e)||0,s=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),a=s.format(t);return console.log("💰 formatCurrencyForPDF result:",a),a},getAmountForPDF(e){console.log("📊 getAmountForPDF - Full request object:",e);const t=["total_document_fee","total_fee","amount","document_fee","fee"];let s=0,a=null;for(const i of t)if(void 0!==e[i]&&null!==e[i]){const t=parseFloat(e[i]);if(!isNaN(t)&&t>0){s=t,a=i;break}}return console.log("💰 getAmountForPDF result:",{request_number:e.request_number,found_field:a,amount:s,all_fields:t.reduce(((t,s)=>(t[s]=e[s],t)),{})}),s},disablePDFDebugLogging(){const e=console.log;console.log=function(...t){t.length>0&&"string"===typeof t[0]&&(t[0].includes("💰")||t[0].includes("📊"))||e.apply(console,t)}},isPDFExportValid(){const{reportType:e,selectedDate:t,selectedWeek:s,selectedMonth:a}=this.pdfExportForm;switch(e){case"daily":return""!==t;case"weekly":return""!==s;case"monthly":return""!==a;default:return!1}},getPDFFilename(){const{reportType:e,selectedDate:t,selectedWeek:s,selectedMonth:a}=this.pdfExportForm,i=(new Date).toISOString().split("T")[0];switch(e){case"daily":return`daily_report_${t}_${i}.pdf`;case"weekly":return`weekly_report_${s}_${i}.pdf`;case"monthly":return`monthly_report_${a}_${i}.pdf`;default:return`report_${i}.pdf`}},getReportTitle(){const{reportType:e}=this.pdfExportForm;switch(e){case"daily":return"Daily Document Request Report";case"weekly":return"Weekly Document Request Report";case"monthly":return"Monthly Document Request Report";default:return"Document Request Report"}},getDateRangeText(e){return e.from===e.to?this.formatDate(e.from):`${this.formatDate(e.from)} to ${this.formatDate(e.to)}`},calculateReportStats(e){return{total:e.length,completed:e.filter((e=>"completed"===e.status_name.toLowerCase())).length,cancelled:e.filter((e=>"cancelled"===e.status_name.toLowerCase())).length}},getDateFromWeek(e,t){const s=new Date(e,0,1+7*(t-1)),a=s.getDay(),i=s;return a<=4?i.setDate(s.getDate()-s.getDay()+1):i.setDate(s.getDate()+8-s.getDay()),i},getCurrentDate(){return(new Date).toISOString().split("T")[0]},getCurrentWeek(){const e=new Date,t=e.getFullYear(),s=this.getWeekNumber(e);return`${t}-W${s.toString().padStart(2,"0")}`},getCurrentMonth(){const e=new Date,t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0");return`${t}-${s}`},getWeekNumber(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),s=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-s);const a=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t-a)/864e5+1)/7)},async verifyInPersonPayment(){if(!this.paymentVerificationForm.amount_received||!this.currentRequest)return void this.showToast("Error","Please enter the amount received","error");const e=parseFloat(this.currentRequest.total_document_fee||this.currentRequest.total_fee),t=parseFloat(this.paymentVerificationForm.amount_received);if(t<e)this.showToast("Error",`Insufficient payment. Required: ${this.formatCurrency(e)}`,"error");else{this.paymentVerificationForm.loading=!0,this.paymentVerificationForm.error="";try{const e={amount_received:t,payment_method_id:this.currentRequest.payment_method_id||1,receipt_number:this.paymentVerificationForm.receipt_number},s=await Yr.A.verifyInPersonPayment(this.currentRequest.id,e);s.success&&(await this.refreshRequestDetails(),await this.loadRequests(),this.paymentVerificationForm={amount_received:"",receipt_number:"",loading:!1,error:""},this.showToast("Success","Payment verified successfully","success"))}catch(s){console.error("Failed to verify payment:",s);const e=Yr.A.parseError(s);this.paymentVerificationForm.error=e.message||"Failed to verify payment",this.showToast("Error",e.message||"Failed to verify payment","error")}finally{this.paymentVerificationForm.loading=!1}}},async schedulePickup(){if(this.isPickupFormValid()&&this.currentRequest){this.pickupScheduleForm.loading=!0,this.pickupScheduleForm.error="";try{const e={scheduled_date:this.pickupScheduleForm.scheduled_date,scheduled_time_start:this.pickupScheduleForm.scheduled_time_start,scheduled_time_end:this.pickupScheduleForm.scheduled_time_end},t=await Yr.A.schedulePickup(this.currentRequest.id,e);t.success&&(await this.refreshRequestDetails(),await this.loadRequests(),this.pickupScheduleForm={scheduled_date:"",scheduled_time_start:"",scheduled_time_end:"",loading:!1,error:""},this.showToast("Success","Pickup scheduled successfully","success"))}catch(e){console.error("Failed to schedule pickup:",e);const t=Yr.A.parseError(e);this.pickupScheduleForm.error=t.message||"Failed to schedule pickup",this.showToast("Error",t.message||"Failed to schedule pickup","error")}finally{this.pickupScheduleForm.loading=!1}}else this.showToast("Error","Please fill in all required fields","error")},formatStatus(e){return Yr.A.formatStatus(e)},getStatusColor(e){return Yr.A.getStatusColor(e)},getDisplayFee(e){const t=parseFloat(e.total_document_fee),s=parseFloat(e.total_fee);return"Cedula"===e.document_type&&console.log(`🔍 Cedula Fee Debug - Request ${e.request_number}:`,{total_document_fee:e.total_document_fee,total_fee:e.total_fee,parsed_total_document_fee:t,parsed_total_fee:s,will_display:t||s||0}),t||s||0},hasConvenienceFee(e){const t=this.getBaseFee(e),s=this.getDisplayFee(e);return s>t&&t>0},getBaseFee(e){const t=e.document_type,s=this.getDisplayFee(e);if("Cedula"===t)return 100===s?30:s;const a=100;return s===a&&"Barangay Clearance"!==t?s-(a-s):s},getConvenienceFee(e){const t=this.getBaseFee(e),s=this.getDisplayFee(e);return Math.max(0,s-t)},getConvenienceFeeExplanation(e){const t=this.getConvenienceFee(e);return t>0?`PayMongo requires a minimum payment of ₱100.00. A convenience fee of ₱${t.toFixed(2)} was added to meet this requirement.`:""},formatDate(e){if(console.log("🗓️ formatDate called with:",e),!e)return console.log("🗓️ formatDate: No date provided, returning null"),null;const t=new Date(e),s=t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return console.log("🗓️ formatDate result:",s),s},formatCurrency(e){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(e||0)},formatDateTime(e){return e?new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"},getChangedByName(e){return e.change_reason&&e.change_reason.startsWith("SYSTEM:")?"System":e.changed_by_name||"System"},getFormattedReason(e){return e?e.startsWith("SYSTEM:")?e.substring(7).trim():e:""},getClientFullName(e){if(!e)return"Not provided";const t=[e.client_first_name,e.client_middle_name,e.client_last_name,e.client_suffix].filter(Boolean);return t.length>0?t.join(" "):e.client_name||"Not provided"},getClientFullAddress(e){if(!e)return null;const t=[e.client_house_number,e.client_street,e.client_subdivision,e.client_barangay,e.client_city_municipality||e.client_city,e.client_province].filter(Boolean);return t.length>0?t.join(", "):e.client_address||null},formatGender(e){return e?e.charAt(0).toUpperCase()+e.slice(1):null},getCivilStatusName(e){const t={1:"Single",2:"Married",3:"Divorced",4:"Widowed",5:"Separated"};return t[e]||null},formatRelationship(e){if(!e)return"Not specified";const t={spouse:"Spouse",child:"Child",parent:"Parent",sibling:"Sibling",relative:"Other Relative",friend:"Friend",colleague:"Colleague",self:"Self"};return t[e]||e.charAt(0).toUpperCase()+e.slice(1)},formatAuthorizationStatus(e){if(!e)return"Pending";const t={pending:"Pending Verification",verified:"Verified",rejected:"Rejected"};return t[e]||e.charAt(0).toUpperCase()+e.slice(1)},getAuthorizationStatusClass(e){const t={pending:"bg-warning text-dark",verified:"bg-success",rejected:"bg-danger"};return t[e]||"bg-secondary"},getAuthorizationStatusIcon(e){const t={pending:"fa-clock",verified:"fa-check-circle",rejected:"fa-times-circle"};return t[e]||"fa-question-circle"},async verifyAuthorization(e,t){try{this.showToast("Authorization "+(t?"Approved":"Rejected"),"Pickup authorization has been "+(t?"approved":"rejected"),t?"success":"warning"),await this.refreshRequestDetails()}catch(s){console.error("Failed to verify authorization:",s),this.errorMessage="Failed to verify authorization. Please try again."}},getResidencyDisplay(e){if(!e)return null;const t=e.client_years_of_residency,s=e.client_months_of_residency;if(!t&&!s)return null;const a=[];return t&&a.push(`${t} year${t>1?"s":""}`),s&&a.push(`${s} month${s>1?"s":""}`),a.join(" and ")},formatTime(e){if(!e)return"";const t=new Date(e);return t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})},async initializeRealTimeFeatures(){console.log("Initializing real-time features for AdminRequests");try{await Zr.Ay.init("admin"),Zr.Ay.on("notification",this.handleRealTimeNotification),Zr.Ay.on("request_status_changed",this.handleStatusChange),Zr.Ay.on("new_request",this.handleNewRequest),this.autoRefreshEnabled&&this.startAutoRefresh()}catch(e){console.error("Failed to initialize real-time features:",e)}},cleanupRealTimeFeatures(){console.log("Cleaning up real-time features for AdminRequests"),Zr.Ay.off("notification",this.handleRealTimeNotification),Zr.Ay.off("request_status_changed",this.handleStatusChange),Zr.Ay.off("new_request",this.handleNewRequest),Zr.Ay.cleanup(),this.stopAutoRefresh()},startAutoRefresh(){this.refreshInterval&&clearInterval(this.refreshInterval),this.refreshInterval=setInterval((()=>{this.autoRefreshEnabled&&!this.loading&&(console.log("Auto-refreshing requests data..."),this.refreshRequestsData())}),this.refreshRate),console.log(`Auto-refresh started with ${this.refreshRate/1e3}s interval`)},stopAutoRefresh(){this.refreshInterval&&(clearInterval(this.refreshInterval),this.refreshInterval=null,console.log("Auto-refresh stopped"))},toggleAutoRefresh(){this.autoRefreshEnabled=!this.autoRefreshEnabled,this.autoRefreshEnabled?this.startAutoRefresh():this.stopAutoRefresh()},async refreshRequestsData(){try{this.lastRefresh=new Date,await this.loadRequests(),await this.loadDashboardStats(),this.showRequestDetails&&this.currentRequest&&await this.refreshRequestDetails(),console.log("Requests data refreshed successfully")}catch(e){console.error("Failed to refresh requests data:",e)}},handleRealTimeNotification(e){switch(console.log("Real-time notification received:",e),e.type){case"request_status_changed":this.handleStatusChange(e.data);break;case"new_request":this.handleNewRequest(e.data);break;case"request_updated":this.handleRequestUpdate(e.data);break;case"unread_count_update":case"heartbeat":break;default:["unread_count_update","heartbeat"].includes(e.type)||console.log("Unhandled notification type:",e.type)}},handleStatusChange(e){console.log("🔄 Request status changed:",e),console.log("🔍 Data properties:",{request_id:e.request_id,new_status:e.new_status,payment_status:e.payment_status,amount:e.amount});const t=e.request_id;if(!t)return void console.warn("⚠️ No request_id in status change data");const s=this.requests.findIndex((e=>e.id==t));if(-1!==s){console.log(`📝 Updating request #${e.request_id} in the list`);const t={...this.requests[s]};"payment_confirmed"===e.new_status?(t.status_name="Payment Confirmed",t.status_id=11,t.payment_status="paid"):"payment_failed"===e.new_status&&(t.status_name="Payment Failed",t.payment_status="failed"),t.updated_at=e.timestamp||(new Date).toISOString(),this.$set(this.requests,s,t),setTimeout((()=>{this.refreshRequestsData()}),1e3),console.log(`✅ Request #${e.request_id} updated in real-time`)}else console.log(`📄 Request #${e.request_id} not in current view, refreshing data`),this.refreshRequestsData();const a=e.request_id||"Unknown",i=e.new_status||"unknown";let o="Status Update",l=`Request #${a} status changed`,r="info";"payment_confirmed"===i?(o="Payment Confirmed",l=`Payment confirmed for request #${a}`,r="success"):"payment_failed"===i&&(o="Payment Failed",l=`Payment failed for request #${a}`,r="error"),console.log("🔔 Showing toast:",{title:o,message:l,type:r}),this.showToast(o,l,r)},handleNewRequest(e){console.log("New request received:",e),this.refreshRequestsData(),this.showToast("New Request",`New ${e.document_type} request received`,"success")},handleRequestUpdate(e){console.log("Request updated:",e),this.currentRequest&&this.currentRequest.id===e.request_id&&this.refreshRequestDetails(),this.refreshRequestsData()},showToast(e,t,s="info"){console.log("🔔 showToast called with:",{title:e,titleType:typeof e,message:t,messageType:typeof t,type:s});const a=e||"Notification",i=t||"No message provided";console.log(`[${s.toUpperCase()}] ${a}: ${i}`);const o=document.createElement("div");if(o.className=`toast-notification toast-${s}`,o.innerHTML=`\n        <div class="toast-header">\n          <strong>${a}</strong>\n          <button type="button" class="toast-close" onclick="this.parentElement.parentElement.remove()">×</button>\n        </div>\n        <div class="toast-body">${i}</div>\n      `,!document.getElementById("toast-styles")){const e=document.createElement("style");e.id="toast-styles",e.textContent="\n          .toast-notification {\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            min-width: 300px;\n            background: white;\n            border-radius: 8px;\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n            z-index: 9999;\n            animation: slideIn 0.3s ease;\n          }\n          .toast-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            padding: 12px 16px 8px;\n            border-bottom: 1px solid #e9ecef;\n          }\n          .toast-body {\n            padding: 8px 16px 12px;\n            color: #6c757d;\n          }\n          .toast-close {\n            background: none;\n            border: none;\n            font-size: 18px;\n            cursor: pointer;\n            color: #6c757d;\n          }\n          .toast-success { border-left: 4px solid #28a745; }\n          .toast-error { border-left: 4px solid #dc3545; }\n          .toast-info { border-left: 4px solid #17a2b8; }\n          .toast-warning { border-left: 4px solid #ffc107; }\n          @keyframes slideIn {\n            from { transform: translateX(100%); opacity: 0; }\n            to { transform: translateX(0); opacity: 1; }\n          }\n        ",document.head.appendChild(e)}document.body.appendChild(o),setTimeout((()=>{o.parentElement&&(o.style.animation="slideIn 0.3s ease reverse",setTimeout((()=>o.remove()),300))}),5e3)},getDocumentTypeDisplayName(e){const t={government_id:"Government ID",proof_of_residency:"Proof of Residency",cedula:"Community Tax Certificate (Cedula)",birth_certificate:"Birth Certificate",marriage_certificate:"Marriage Certificate",other:"Other Document"};return t[e]||e},isImageFile(e){return e&&(e.startsWith("image/")||["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(e))},isPdfFile(e){return"application/pdf"===e},async loadDocumentUrls(e){const t=e.filter((e=>this.isImageFile(e.mime_type)&&!this.documentUrls[e.id]&&!this.loadingDocuments.has(e.id)&&!this.failedDocuments.has(e.id)));if(0===t.length)return;const s=3,a=this.chunkArray(t,s);for(const i of a)await Promise.allSettled(i.map((e=>this.loadSingleDocument(e))))},async loadSingleDocument(e,t=!1){const s=e.id;try{this.loadingDocuments.add(s),t&&(this.imageLoadingInModal=!0);const a=await Kr["default"].get(`/documents/view/${s}`,{responseType:"blob",timeout:15e3,onDownloadProgress:e=>{if(e.lengthComputable){const t=Math.round(100*e.loaded/e.total);console.log(`Loading ${s}: ${t}%`)}}});if(!a.data||0===a.data.size)throw new Error("Empty response received");const i=a.data,o=await this.optimizeImageBlob(i,e.mime_type,t);await this.createBlobUrlWhenIdle(s,o),this.failedDocuments.delete(s),t&&(this.modalImageError=!1)}catch(a){console.warn(`Failed to load document ${s}:`,a.message),this.failedDocuments.add(s),t&&(this.modalImageError=!0),"NETWORK_ERROR"!==a.code&&"ECONNABORTED"!==a.code||setTimeout((()=>{this.failedDocuments.delete(s)}),3e4)}finally{this.loadingDocuments.delete(s),t&&(this.imageLoadingInModal=!1)}},chunkArray(e,t){const s=[];for(let a=0;a<e.length;a+=t)s.push(e.slice(a,a+t));return s},async getDocumentUrl(e){return this.documentUrls[e.id]?this.documentUrls[e.id]:null},formatFileSize(e){if(!e)return"0 B";const t=1024,s=["B","KB","MB","GB"],a=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,a)).toFixed(1))+" "+s[a]},async openImageModal(e){this.imageLoadingInModal||this.failedDocuments.has(e.id)||(this.selectedImage=e,this.showImageModal=!0,this.modalImageError=!1,await this.$nextTick(),this.documentUrls[e.id]||this.loadingDocuments.has(e.id)||await this.loadSingleDocument(e,!0))},async retryLoadDocument(e){this.failedDocuments.delete(e.id),this.modalImageError=!1,await this.loadSingleDocument(e,!0)},onModalImageLoad(){this.imageLoadingInModal=!1},cleanupDocumentUrls(){Object.values(this.documentUrls).forEach((e=>{e&&URL.revokeObjectURL(e)})),this.documentUrls={},this.loadingDocuments.clear(),this.failedDocuments.clear()},preloadImage(e){this.documentUrls[e.id]||this.loadingDocuments.has(e.id)||this.failedDocuments.has(e.id)||this.loadSingleDocument(e,!1)},async optimizeImageBlob(e,t,s=!1){const a=s?5242880:2097152;if(e.size<=a)return e;try{const a=new Image,i=document.createElement("canvas"),o=i.getContext("2d");return new Promise((l=>{a.onload=()=>{const r=s?1920:800;let{width:n,height:c}=a;n>c&&n>r?(c=c*r/n,n=r):c>r&&(n=n*r/c,c=r),i.width=n,i.height=c,o.drawImage(a,0,0,n,c),i.toBlob((t=>{l(t||e)}),t,.85)},a.onerror=()=>l(e),a.src=URL.createObjectURL(e)}))}catch(i){return console.warn("Image optimization failed:",i),e}},async createBlobUrlWhenIdle(e,t){return new Promise((s=>{const a=()=>{this.documentUrls[e]=URL.createObjectURL(t),s()};window.requestIdleCallback?window.requestIdleCallback(a,{timeout:1e3}):setTimeout(a,0)}))},closeImageModal(){this.imageLoadingInModal||(this.showImageModal=!1,this.selectedImage=null,this.imageLoadingInModal=!1,this.modalImageError=!1)},async downloadDocument(e){try{const t=await Kr["default"].get(`/documents/download/${e.id}`,{responseType:"blob"}),s=new Blob([t.data],{type:e.mime_type}),a=URL.createObjectURL(s),i=document.createElement("a");i.href=a,i.download=e.document_name,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)}catch(t){console.error("Failed to download document:",t),this.showToast("Error","Failed to download document","error")}},handleImageError(e){console.error("Failed to load image:",e.target.src),e.target.style.display="none";const t=document.createElement("div");t.className="text-center text-muted p-3",t.innerHTML='<i class="fas fa-exclamation-triangle"></i><br>Failed to load image',e.target.parentNode.appendChild(t)},getBeneficiaryVerificationStatusClass(e){switch(e){case"approved":return"bg-success";case"rejected":return"bg-danger";case"pending":default:return"bg-warning"}},getBeneficiaryVerificationStatusText(e){switch(e){case"approved":return"Verified";case"rejected":return"Rejected";case"pending":default:return"Pending"}},async viewVerificationImage(e,t){try{let s=this.requests.find((t=>t.id===e));if(!s&&this.currentRequest&&this.currentRequest.id===e&&(s=this.currentRequest),!s)return void this.showToast("Error","Request not found","error");let a="",i="";switch(t){case"beneficiary":a=s.beneficiary_verification_image||s.beneficiary?.verification_image_path,i="beneficiary",s.beneficiary?.id&&(e=s.beneficiary.id);break;case"pickup-id":a=s.pickup_id_image||s.authorized_pickup?.id_image_path,i="pickup-id";break;case"pickup-auth":a=s.pickup_authorization_letter||s.authorized_pickup?.authorization_letter_path,i="pickup-auth";break;default:return void this.showToast("Error","Invalid image type","error")}if(!a)return void this.showToast("Error","No image available","error");const o=a.split(/[/\\]/).pop(),l=`/verification-documents/serve/${i}/${e}/${o}`;await this.displayImageInModal(l,`${i} verification image`)}catch(s){console.error("Error viewing verification image:",s),this.showToast("Error","Failed to view image","error")}},async displayImageInModal(e,t){try{const a=(await Promise.resolve().then(s.bind(s,4300))).default,i=await a.get(e,{responseType:"blob"}),o=URL.createObjectURL(i.data),l=`\n          <div class="modal fade" id="imageViewModal" tabindex="-1" aria-hidden="true">\n            <div class="modal-dialog modal-lg modal-dialog-centered">\n              <div class="modal-content">\n                <div class="modal-header">\n                  <h5 class="modal-title">${t}</h5>\n                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n                </div>\n                <div class="modal-body text-center">\n                  <img src="${o}" class="img-fluid" alt="${t}" style="max-height: 70vh;">\n                </div>\n                <div class="modal-footer">\n                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>\n                </div>\n              </div>\n            </div>\n          </div>\n        `,r=document.getElementById("imageViewModal");r&&r.remove(),document.body.insertAdjacentHTML("beforeend",l);const n=new Jr.aF(document.getElementById("imageViewModal"));n.show(),document.getElementById("imageViewModal").addEventListener("hidden.bs.modal",(()=>{URL.revokeObjectURL(o),document.getElementById("imageViewModal").remove()}))}catch(a){console.error("Error displaying image:",a),this.showToast("Error","Failed to load image","error")}},async viewPickupDocuments(e){try{this.selectedRequestForPickup=e;const t=new Jr.aF(document.getElementById("authorizedPickupDocumentsModal"));t.show()}catch(t){console.error("Error opening pickup documents modal:",t),this.showToast("Error","Failed to open documents modal","error")}},async verifyPickupAuthorization(){if(this.selectedRequestForPickup){this.processingPickupAction=!0;try{this.showToast("Success","Pickup authorization verified successfully","success");const e=Jr.aF.getInstance(document.getElementById("authorizedPickupDocumentsModal"));e&&e.hide(),await this.loadRequests()}catch(e){console.error("Error verifying pickup authorization:",e),this.showToast("Error","Failed to verify pickup authorization","error")}finally{this.processingPickupAction=!1}}},async rejectPickupAuthorization(){if(this.selectedRequestForPickup){this.processingPickupAction=!0;try{this.showToast("Success","Pickup authorization rejected","success");const e=Jr.aF.getInstance(document.getElementById("authorizedPickupDocumentsModal"));e&&e.hide(),await this.loadRequests()}catch(e){console.error("Error rejecting pickup authorization:",e),this.showToast("Error","Failed to reject pickup authorization","error")}finally{this.processingPickupAction=!1}}},async updateBeneficiaryVerificationStatus(e,t,s=""){try{const a=await this.$http.put(`/api/verification-documents/beneficiary/${e}/verification-status`,{status:t,notes:s});if(!a.data.success)throw new Error(a.data.message||"Failed to update verification status");this.showToast("Success","Verification status updated successfully","success"),await this.loadRequests()}catch(a){console.error("Error updating verification status:",a),this.showToast("Error",a.response?.data?.message||"Failed to update verification status","error")}},openVerificationModal(e){this.currentVerification={requestId:e.id,beneficiaryId:e.beneficiary_id,beneficiary_name:e.beneficiary_name,relationship:e.beneficiary_relationship,image_url:e.beneficiary_verification_image?`/verification-documents/serve/beneficiary/${e.id}/${e.beneficiary_verification_image.split("/").pop()}`:null,current_status:e.beneficiary_verification_status},this.verificationForm={status:e.beneficiary_verification_status||"pending",notes:""};const t=new Jr.aF(document.getElementById("verificationModal"));t.show()},async saveVerificationStatus(){if(this.currentVerification)try{await this.updateBeneficiaryVerificationStatus(this.currentVerification.beneficiaryId,this.verificationForm.status,this.verificationForm.notes);const e=Jr.aF.getInstance(document.getElementById("verificationModal"));e.hide(),this.currentVerification=null,this.verificationForm={status:"pending",notes:""}}catch(e){}}}},an=s(1241);const on=(0,an.A)(sn,[["render",Qr],["__scopeId","data-v-31566372"]]);var ln=on}}]);