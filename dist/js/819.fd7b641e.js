"use strict";(self["webpackChunkbosfdr"]=self["webpackChunkbosfdr"]||[]).push([[819],{9819:function(e,i,a){a.r(i),a.d(i,{default:function(){return q}});var o=a(6768),s=a(4232),l=a(5130);const t={class:"admin-profile"},r={class:"dashboard-container"},n={class:"container-fluid p-4"},d={class:"row"},c={class:"col-lg-8 mb-4"},m={class:"card shadow"},p={class:"card-body"},u={class:"row"},b={class:"col-md-6 mb-3"},f={class:"col-md-6 mb-3"},h={class:"row"},g={class:"col-md-6 mb-3"},L={class:"col-md-6 mb-3"},k={class:"row"},w={class:"col-md-6 mb-3"},v={class:"col-md-6 mb-3"},y={class:"text-end"},C=["disabled"],F={class:"col-lg-4 mb-4"},U={class:"card shadow mb-4"},M={class:"card-body text-center"},P={class:"profile-picture-container mb-3"},S=["src"],A={key:1,class:"profile-placeholder"},D={class:"card shadow"},_={class:"card-body"},T={class:"d-grid gap-2"};function I(e,i,a,I,W,x){const J=(0,o.g2)("AdminHeader"),z=(0,o.g2)("AdminSidebar");return(0,o.uX)(),(0,o.CE)("div",t,[(0,o.bF)(J,{userName:W.adminData?.first_name||"Admin",showUserDropdown:W.showUserDropdown,sidebarCollapsed:W.sidebarCollapsed,activeMenu:x.activeMenu,onSidebarToggle:x.handleSidebarToggle,onUserDropdownToggle:x.handleUserDropdownToggle,onMenuAction:x.handleMenuAction,onLogout:x.handleLogout},null,8,["userName","showUserDropdown","sidebarCollapsed","activeMenu","onSidebarToggle","onUserDropdownToggle","onMenuAction","onLogout"]),(0,o.Lk)("div",{class:(0,s.C4)(["mobile-overlay",{active:!W.sidebarCollapsed&&W.isMobile}]),onClick:i[0]||(i[0]=(...e)=>x.closeMobileSidebar&&x.closeMobileSidebar(...e))},null,2),(0,o.Lk)("div",r,[(0,o.bF)(z,{collapsed:W.sidebarCollapsed,activeMenu:x.activeMenu,onMenuChange:x.handleMenuChange,onLogout:x.handleLogout,onToggleSidebar:x.handleSidebarToggle},null,8,["collapsed","activeMenu","onMenuChange","onLogout","onToggleSidebar"]),(0,o.Lk)("main",{class:(0,s.C4)(["main-content",{"sidebar-collapsed":W.sidebarCollapsed}])},[(0,o.Lk)("div",n,[(0,o.Lk)("div",d,[(0,o.Lk)("div",c,[(0,o.Lk)("div",m,[i[18]||(i[18]=(0,o.Lk)("div",{class:"card-header py-3"},[(0,o.Lk)("h6",{class:"m-0 font-weight-bold text-primary"},[(0,o.Lk)("i",{class:"fas fa-user me-2"}),(0,o.eW)(" Profile Information ")])],-1)),(0,o.Lk)("div",p,[(0,o.Lk)("form",{onSubmit:i[7]||(i[7]=(0,l.D$)(((...e)=>x.updateProfile&&x.updateProfile(...e)),["prevent"]))},[(0,o.Lk)("div",u,[(0,o.Lk)("div",b,[i[12]||(i[12]=(0,o.Lk)("label",{class:"form-label"},"First Name",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":i[1]||(i[1]=e=>W.profileForm.first_name=e),required:""},null,512),[[l.Jo,W.profileForm.first_name]])]),(0,o.Lk)("div",f,[i[13]||(i[13]=(0,o.Lk)("label",{class:"form-label"},"Last Name",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":i[2]||(i[2]=e=>W.profileForm.last_name=e),required:""},null,512),[[l.Jo,W.profileForm.last_name]])])]),(0,o.Lk)("div",h,[(0,o.Lk)("div",g,[i[14]||(i[14]=(0,o.Lk)("label",{class:"form-label"},"Email",-1)),(0,o.bo)((0,o.Lk)("input",{type:"email",class:"form-control","onUpdate:modelValue":i[3]||(i[3]=e=>W.profileForm.email=e),required:""},null,512),[[l.Jo,W.profileForm.email]])]),(0,o.Lk)("div",L,[i[15]||(i[15]=(0,o.Lk)("label",{class:"form-label"},"Phone Number",-1)),(0,o.bo)((0,o.Lk)("input",{type:"tel",class:"form-control","onUpdate:modelValue":i[4]||(i[4]=e=>W.profileForm.phone_number=e)},null,512),[[l.Jo,W.profileForm.phone_number]])])]),(0,o.Lk)("div",k,[(0,o.Lk)("div",w,[i[16]||(i[16]=(0,o.Lk)("label",{class:"form-label"},"Position",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":i[5]||(i[5]=e=>W.profileForm.position=e)},null,512),[[l.Jo,W.profileForm.position]])]),(0,o.Lk)("div",v,[i[17]||(i[17]=(0,o.Lk)("label",{class:"form-label"},"Department",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":i[6]||(i[6]=e=>W.profileForm.department=e)},null,512),[[l.Jo,W.profileForm.department]])])]),(0,o.Lk)("div",y,[(0,o.Lk)("button",{type:"submit",class:"btn btn-success",disabled:e.loading},[(0,o.Lk)("i",{class:(0,s.C4)(["fas fa-save me-1",{"fa-spin":e.loading}])},null,2),(0,o.eW)(" "+(0,s.v_)(e.loading?"Saving...":"Save Changes"),1)],8,C)])],32)])])]),(0,o.Lk)("div",F,[(0,o.Lk)("div",U,[i[20]||(i[20]=(0,o.Lk)("div",{class:"card-header py-3"},[(0,o.Lk)("h6",{class:"m-0 font-weight-bold text-primary"},[(0,o.Lk)("i",{class:"fas fa-image me-2"}),(0,o.eW)(" Profile Picture ")])],-1)),(0,o.Lk)("div",M,[(0,o.Lk)("div",P,[W.profileForm.profile_picture?((0,o.uX)(),(0,o.CE)("img",{key:0,src:W.profileForm.profile_picture,alt:"Profile",class:"profile-picture"},null,8,S)):((0,o.uX)(),(0,o.CE)("div",A,(0,s.v_)(x.getInitials(W.profileForm.first_name,W.profileForm.last_name)),1))]),(0,o.Lk)("button",{class:"btn btn-primary btn-sm",onClick:i[8]||(i[8]=(...e)=>x.uploadPicture&&x.uploadPicture(...e))},i[19]||(i[19]=[(0,o.Lk)("i",{class:"fas fa-upload me-1"},null,-1),(0,o.eW)(" Upload Picture ")]))])]),(0,o.Lk)("div",D,[i[24]||(i[24]=(0,o.Lk)("div",{class:"card-header py-3"},[(0,o.Lk)("h6",{class:"m-0 font-weight-bold text-primary"},[(0,o.Lk)("i",{class:"fas fa-shield-alt me-2"}),(0,o.eW)(" Account Security ")])],-1)),(0,o.Lk)("div",_,[(0,o.Lk)("div",T,[(0,o.Lk)("button",{class:"btn btn-warning btn-sm",onClick:i[9]||(i[9]=(...e)=>x.changePassword&&x.changePassword(...e))},i[21]||(i[21]=[(0,o.Lk)("i",{class:"fas fa-key me-1"},null,-1),(0,o.eW)(" Change Password ")])),(0,o.Lk)("button",{class:"btn btn-info btn-sm",onClick:i[10]||(i[10]=(...e)=>x.enableTwoFactor&&x.enableTwoFactor(...e))},i[22]||(i[22]=[(0,o.Lk)("i",{class:"fas fa-mobile-alt me-1"},null,-1),(0,o.eW)(" Enable 2FA ")])),(0,o.Lk)("button",{class:"btn btn-secondary btn-sm",onClick:i[11]||(i[11]=(...e)=>x.viewLoginHistory&&x.viewLoginHistory(...e))},i[23]||(i[23]=[(0,o.Lk)("i",{class:"fas fa-history me-1"},null,-1),(0,o.eW)(" Login History ")]))])])])])])])],2)])])}a(4114);var W=a(3237),x=a(2944),J=a(9197),z={name:"AdminProfile",components:{AdminHeader:W.A,AdminSidebar:x.A},data(){return{sidebarCollapsed:!1,showUserDropdown:!1,isMobile:!1,adminData:null,profileForm:{first_name:"",last_name:"",email:"",phone_number:"",position:"",department:"",profile_picture:null}}},async mounted(){J["default"].isLoggedIn()&&"admin"===J["default"].getUserType()?(this.initializeUI(),await this.loadAdminProfile(),await this.loadProfile()):this.$router.push("/login")},beforeUnmount(){this.handleResize&&window.removeEventListener("resize",this.handleResize)},computed:{activeMenu(){const e=this.$route.path;return e.includes("/admin/users")?"users":e.includes("/admin/requests")?"requests":e.includes("/admin/reports")?"reports":e.includes("/admin/settings")?"settings":e.includes("/admin/activity-logs")?"activity":e.includes("/admin/profile")?"profile":"dashboard"}},methods:{initializeUI(){if(this.isMobile=window.innerWidth<=768,this.isMobile)this.sidebarCollapsed=!0;else{const e=localStorage.getItem("adminSidebarCollapsed");this.sidebarCollapsed=!!e&&JSON.parse(e)}this.handleResize=()=>{const e=this.isMobile;if(this.isMobile=window.innerWidth<=768,this.isMobile&&!e)this.sidebarCollapsed=!0;else if(!this.isMobile&&e){const e=localStorage.getItem("adminSidebarCollapsed");this.sidebarCollapsed=!!e&&JSON.parse(e)}},window.addEventListener("resize",this.handleResize)},handleSidebarToggle(){this.sidebarCollapsed=!this.sidebarCollapsed,localStorage.setItem("adminSidebarCollapsed",JSON.stringify(this.sidebarCollapsed))},handleMenuChange(e){const i={dashboard:"/admin/dashboard",users:"/admin/users",requests:"/admin/requests",reports:"/admin/reports",settings:"/admin/settings",activity:"/admin/activity-logs",profile:"/admin/profile"};this.isMobile&&(this.sidebarCollapsed=!0),i[e]&&this.$router.push(i[e])},handleUserDropdownToggle(){this.showUserDropdown=!this.showUserDropdown},handleMenuAction(e){"profile"===e?this.$router.push("/admin/profile"):"settings"===e&&this.$router.push("/admin/settings"),this.showUserDropdown=!1},closeMobileSidebar(){this.isMobile&&(this.sidebarCollapsed=!0)},handleLogout(){J["default"].logout(),this.$router.push("/login")},async loadAdminProfile(){try{const e=J["default"].getCurrentUser();e&&e.profile?this.adminData=e.profile:this.adminData={first_name:e?.username||"Admin",role:e?.role||"admin"}}catch(e){console.error("Failed to load admin profile:",e);const i=J["default"].getCurrentUser();this.adminData={first_name:i?.username||"Admin",role:i?.role||"admin"}}},async loadProfile(){this.loading=!0;try{const e=J["default"].getCurrentUser();e&&e.profile?(this.adminData=e.profile,this.profileForm={...e.profile}):(this.adminData={first_name:e?.username||"Admin",role:e?.role||"admin"},this.profileForm={...this.adminData})}catch(e){console.error("Failed to load profile:",e);const i=J["default"].getCurrentUser();this.adminData={first_name:i?.username||"Admin",role:i?.role||"admin"},this.profileForm={...this.adminData}}finally{this.loading=!1}},async updateProfile(){this.loading=!0;try{console.log("Updating profile:",this.profileForm),await new Promise((e=>setTimeout(e,1e3))),alert("Profile updated successfully!")}catch(e){console.error("Failed to update profile:",e),alert("Failed to update profile. Please try again.")}finally{this.loading=!1}},getInitials(e,i){const a=e?e.charAt(0).toUpperCase():"",o=i?i.charAt(0).toUpperCase():"";return a+o||"?"},uploadPicture(){alert("Profile picture upload functionality will be implemented soon.")},changePassword(){alert("Change password functionality will be implemented soon.")},enableTwoFactor(){alert("Two-factor authentication setup will be implemented soon.")},viewLoginHistory(){alert("Login history view will be implemented soon.")},goBack(){this.$router.push("/admin/dashboard")}}},N=a(1241);const $=(0,N.A)(z,[["render",I],["__scopeId","data-v-4907565c"]]);var q=$}}]);