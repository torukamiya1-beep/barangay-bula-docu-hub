"use strict";(self["webpackChunkbosfdr"]=self["webpackChunkbosfdr"]||[]).push([[680],{3911:function(e,s,a){a(4114);var t=a(4300);class r{constructor(){this.baseURL="/users"}async getUsers(e={}){try{const s=await t["default"].get(this.baseURL,{params:e});return this.handleResponse(s)}catch(s){return this.handleError(s)}}async getUserStats(){try{const e=await t["default"].get(`${this.baseURL}/stats`);return this.handleResponse(e)}catch(e){return this.handleError(e)}}async getUser(e){try{const s=await t["default"].get(`${this.baseURL}/${e}`);return this.handleResponse(s)}catch(s){return this.handleError(s)}}async createUser(e){try{const s=await t["default"].post(this.baseURL,e);return this.handleResponse(s)}catch(s){return this.handleError(s)}}async updateUser(e,s){try{const a=await t["default"].put(`${this.baseURL}/${e}`,s);return this.handleResponse(a)}catch(a){return this.handleError(a)}}async updateUserStatus(e,s,a=""){try{const r=await t["default"].patch(`${this.baseURL}/${e}/status`,{status:s,reason:a});return this.handleResponse(r)}catch(r){return this.handleError(r)}}async deleteUser(e,s=""){try{const a=await t["default"].delete(`${this.baseURL}/${e}`,{data:{reason:s}});return this.handleResponse(a)}catch(a){return this.handleError(a)}}async resetUserPassword(e,s){try{const a=await t["default"].post(`${this.baseURL}/${e}/reset-password`,{new_password:s});return this.handleResponse(a)}catch(a){return this.handleError(a)}}async getUserActivity(e,s={}){try{const a=await t["default"].get(`${this.baseURL}/${e}/activity`,{params:s});return this.handleResponse(a)}catch(a){return this.handleError(a)}}async bulkUpdateUsers(e,s,a={}){try{const r=await t["default"].post(`${this.baseURL}/bulk`,{user_ids:e,action:s,data:a});return this.handleResponse(r)}catch(r){return this.handleError(r)}}async exportUsers(e="csv",s={}){try{const a=await t["default"].get(`${this.baseURL}/export`,{params:{format:e,...s},responseType:"blob"}),r=window.URL.createObjectURL(new Blob([a.data])),i=document.createElement("a");return i.href=r,i.setAttribute("download",`users_export_${(new Date).toISOString().split("T")[0]}.${e}`),document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(r),{success:!0,message:"Export completed successfully"}}catch(a){return this.handleError(a)}}async getArchivedUsers(e=1,s=10,a=""){try{const r={page:e,limit:s,...a&&{search:a}},i=await t["default"].get(`${this.baseURL}/get-archived-users`,{params:r});return this.handleResponse(i)}catch(r){return this.handleError(r)}}async restoreUser(e){try{const s=await t["default"].patch(`${this.baseURL}/${e}/restore`);return this.handleResponse(s)}catch(s){return this.handleError(s)}}async getUserRoles(){try{const e=await t["default"].get(`${this.baseURL}/roles`);return this.handleResponse(e)}catch(e){return this.handleError(e)}}handleResponse(e){if(e.data.success)return{success:!0,data:e.data.data,message:e.data.message,pagination:e.data.pagination};throw new Error(e.data.message||"Operation failed")}handleError(e){console.error("User Management Service Error:",e);let s="An unexpected error occurred",a=[],t=0;if(e.response){t=e.response.status;const r=e.response.data;switch(r.message&&(s=r.message),r.errors&&(a=Array.isArray(r.errors)?r.errors:[r.errors]),t){case 401:s="Authentication required. Please log in again.";break;case 403:s="You do not have permission to perform this action.";break;case 404:s="User not found.";break;case 422:s="Validation failed. Please check your input.";break;case 429:s="Too many requests. Please try again later.";break;case 500:s="Server error. Please try again later.";break}}else e.request&&(s="Network error. Please check your connection.");return{success:!1,message:s,errors:a,status:t}}validateUserData(e,s=!1){const a=[];if(s&&!e.username||(!e.username||e.username.length<3)&&a.push("Username must be at least 3 characters long"),!s||e.email){const s=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;e.email&&s.test(e.email)||a.push("Please provide a valid email address")}return s&&!e.password||(!e.password||e.password.length<6)&&a.push("Password must be at least 6 characters long"),s&&!e.first_name||(!e.first_name||e.first_name.trim().length<2)&&a.push("First name must be at least 2 characters long"),s&&!e.last_name||(!e.last_name||e.last_name.trim().length<2)&&a.push("Last name must be at least 2 characters long"),{isValid:0===a.length,errors:a}}formatUserData(e){return{...e,full_name:`${e.first_name||""} ${e.last_name||""}`.trim(),status_label:this.getStatusLabel(e.status),type_label:this.getTypeLabel(e.type||e.role),created_at_formatted:this.formatDate(e.created_at),last_login_formatted:e.last_login?this.formatDate(e.last_login):"Never"}}getStatusLabel(e){const s={active:"Active",inactive:"Inactive",pending:"Pending Verification",suspended:"Suspended",pending_verification:"Pending Verification"};return s[e]||e}getTypeLabel(e){const s={admin:"Administrator",employee:"Employee",client:"Client",user:"User"};return s[e]||e}formatDate(e){if(!e)return"";const s=new Date(e);return s.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}}s.A=new r},4680:function(e,s,a){a.r(s),a.d(s,{default:function(){return Ut}});var t=a(6768),r=a(4232),i=a(5130);const o={class:"admin-users"},n={class:"dashboard-container"},l={class:"container-fluid p-4"},d={class:"row"},c={class:"col-12"},m={class:"card shadow mb-3"},u={class:"card-body py-2"},f={class:"nav nav-pills nav-fill",role:"tablist"},p={class:"nav-item",role:"presentation"},h={key:0,class:"badge bg-light text-dark ms-2"},b={class:"nav-item",role:"presentation"},g={key:0,class:"badge bg-light text-dark ms-2"},v={class:"card shadow"},y={class:"card-header py-3 d-flex justify-content-between align-items-center"},k={class:"d-flex gap-2"},L=["disabled"],w={class:"card-body"},_={class:"row mb-3"},U={class:"col-md-6"},C={class:"input-group"},E={class:"col-md-6 text-end"},F={class:"text-muted"},D={key:0,class:"text-center py-4"},x={key:1,class:"text-center py-5"},R={class:"text-muted"},S={key:2,class:"table-responsive"},P={class:"table table-hover"},A={class:"d-flex align-items-center"},M={class:"user-avatar me-3"},I=["src","alt"],T={key:1,class:"avatar-placeholder rounded-circle"},j={class:"fw-bold"},X={class:"text-muted small"},$={class:"btn-group btn-group-sm"},V=["onClick"],W=["onClick"],N=["onClick"],B=["onClick"],Q={key:3,class:"d-flex justify-content-between align-items-center mt-3"},O={class:"text-muted"},q={class:"pagination pagination-sm mb-0"},J=["disabled"],z=["onClick"],H=["disabled"],G={class:"modal fade",id:"addUserModal",tabindex:"-1","aria-labelledby":"addUserModalLabel","aria-hidden":"true"},K={class:"modal-dialog modal-lg modal-dialog-scrollable"},Y={class:"modal-content"},Z={class:"modal-body"},ee={class:"row"},se={class:"col-md-12 mb-3"},ae={key:0,class:"invalid-feedback"},te={class:"row"},re={class:"col-md-6 mb-3"},ie={key:0,class:"invalid-feedback"},oe={class:"col-md-6 mb-3"},ne={key:0,class:"invalid-feedback"},le={class:"row"},de={class:"col-md-4 mb-3"},ce={key:0,class:"invalid-feedback"},me={class:"col-md-4 mb-3"},ue={class:"col-md-4 mb-3"},fe={key:0,class:"invalid-feedback"},pe={class:"row"},he={class:"col-md-6 mb-3"},be={key:0,class:"col-md-6 mb-3"},ge={key:0,class:"invalid-feedback"},ve={key:1,class:"col-md-6 mb-3"},ye={class:"row"},ke={class:"col-md-6 mb-3"},Le={key:0,class:"invalid-feedback"},we={class:"col-md-6 mb-3"},_e={key:0,class:"invalid-feedback"},Ue={key:0},Ce={key:1},Ee={class:"row"},Fe={class:"col-md-6 mb-3"},De={key:0,class:"invalid-feedback"},xe={class:"col-md-6 mb-3"},Re={key:0,class:"invalid-feedback"},Se={class:"row"},Pe={class:"col-md-6 mb-3"},Ae={class:"col-md-6 mb-3"},Me={class:"row"},Ie={class:"col-md-6 mb-3"},Te={class:"col-md-6 mb-3"},je={class:"row"},Xe={class:"col-md-6 mb-3"},$e={class:"col-md-6 mb-3"},Ve={key:0,class:"invalid-feedback"},We={class:"row"},Ne={class:"col-md-4 mb-3"},Be={key:0,class:"invalid-feedback"},Qe={class:"col-md-4 mb-3"},Oe={key:0,class:"invalid-feedback"},qe={class:"col-md-4 mb-3"},Je={class:"row"},ze={class:"col-md-6 mb-3"},He={class:"col-md-6 mb-3"},Ge={class:"modal-footer"},Ke=["disabled"],Ye={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},Ze={key:1,class:"fas fa-plus me-2"},es={class:"modal fade",id:"editUserModal",tabindex:"-1","aria-labelledby":"editUserModalLabel","aria-hidden":"true"},ss={class:"modal-dialog modal-lg modal-dialog-scrollable"},as={class:"modal-content"},ts={class:"modal-body"},rs={class:"row"},is={class:"col-md-6 mb-3"},os={key:0,class:"invalid-feedback"},ns={class:"col-md-6 mb-3"},ls={key:0,class:"invalid-feedback"},ds={class:"row"},cs={class:"col-md-4 mb-3"},ms={key:0,class:"invalid-feedback"},us={class:"col-md-4 mb-3"},fs={class:"col-md-4 mb-3"},ps={key:0,class:"invalid-feedback"},hs={class:"row"},bs={class:"col-md-6 mb-3"},gs={class:"col-md-6 mb-3"},vs={key:0,class:"invalid-feedback"},ys={class:"row"},ks={class:"col-md-6 mb-3"},Ls={key:0,class:"invalid-feedback"},ws={class:"col-md-6 mb-3"},_s={key:0,class:"invalid-feedback"},Us={key:0},Cs={key:1},Es={class:"row"},Fs={class:"col-md-6 mb-3"},Ds={class:"col-md-6 mb-3"},xs=["value"],Rs={class:"row"},Ss={class:"col-md-12 mb-3"},Ps=["value"],As={class:"row"},Ms={class:"col-12 mb-3"},Is={class:"form-check"},Ts={key:2,class:"row"},js={class:"col-md-6 mb-3"},Xs={key:0,class:"invalid-feedback"},$s={class:"col-md-6 mb-3"},Vs={key:0,class:"invalid-feedback"},Ws={class:"modal-footer"},Ns=["disabled"],Bs={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},Qs={key:1,class:"fas fa-save me-2"},Os={class:"modal fade",id:"viewUserModal",tabindex:"-1","aria-labelledby":"viewUserModalLabel","aria-hidden":"true"},qs={class:"modal-dialog modal-lg modal-dialog-scrollable"},Js={class:"modal-content"},zs={key:0,class:"modal-body"},Hs={class:"row"},Gs={class:"col-md-4 text-center mb-4"},Ks={class:"user-avatar-large mx-auto mb-3"},Ys={key:0,class:"avatar-image"},Zs=["src","alt"],ea={key:1,class:"avatar-placeholder-large rounded-circle bg-light d-flex align-items-center justify-content-center mx-auto",style:{width:"80px",height:"80px"}},sa={class:"mt-2"},aa={class:"col-md-8"},ta={class:"table table-sm table-borderless"},ra={key:0},ia={key:1},oa={class:"table table-sm table-borderless"},na={key:0},la={class:"badge bg-light text-dark"},da={class:"table table-sm table-borderless"},ca={key:0,class:"badge bg-success"},ma={key:1,class:"badge bg-secondary"},ua={key:2,class:"mt-4"},fa={class:"d-flex justify-content-between align-items-center mb-3"},pa={class:"modal-footer"},ha={class:"modal fade",id:"rejectResidencyModal",tabindex:"-1","aria-labelledby":"rejectResidencyModalLabel","aria-hidden":"true"},ba={class:"modal-dialog modal-dialog-scrollable"},ga={class:"modal-content"},va={class:"modal-body"},ya={class:"alert alert-warning"},ka={class:"mb-3"},La={class:"modal-footer"},wa=["disabled"],_a={key:0,class:"spinner-border spinner-border-sm me-1",role:"status"},Ua={key:1,class:"fas fa-times me-1"};function Ca(e,s,a,Ca,Ea,Fa){const Da=(0,t.g2)("AdminHeader"),xa=(0,t.g2)("AdminSidebar"),Ra=(0,t.g2)("ResidencyDocumentsModal");return(0,t.uX)(),(0,t.CE)("div",o,[(0,t.bF)(Da,{userName:Ea.adminData?.first_name||"Admin",showUserDropdown:Ea.showUserDropdown,sidebarCollapsed:Ea.sidebarCollapsed,activeMenu:Fa.activeMenu,onSidebarToggle:Fa.handleSidebarToggle,onUserDropdownToggle:Fa.handleUserDropdownToggle,onMenuAction:Fa.handleMenuAction,onLogout:Fa.handleLogout,onOpenUserModal:Fa.handleOpenUserModal},null,8,["userName","showUserDropdown","sidebarCollapsed","activeMenu","onSidebarToggle","onUserDropdownToggle","onMenuAction","onLogout","onOpenUserModal"]),(0,t.Lk)("div",{class:(0,r.C4)(["mobile-overlay",{active:!Ea.sidebarCollapsed&&Ea.isMobile}]),onClick:s[0]||(s[0]=(...e)=>Fa.closeMobileSidebar&&Fa.closeMobileSidebar(...e))},null,2),(0,t.Lk)("div",n,[(0,t.bF)(xa,{collapsed:Ea.sidebarCollapsed,activeMenu:Fa.activeMenu,onMenuChange:Fa.handleMenuChange,onLogout:Fa.handleLogout,onToggleSidebar:Fa.handleSidebarToggle},null,8,["collapsed","activeMenu","onMenuChange","onLogout","onToggleSidebar"]),(0,t.Lk)("main",{class:(0,r.C4)(["main-content",{"sidebar-collapsed":Ea.sidebarCollapsed}])},[(0,t.Lk)("div",l,[(0,t.Lk)("div",d,[(0,t.Lk)("div",c,[(0,t.Lk)("div",m,[(0,t.Lk)("div",u,[(0,t.Lk)("ul",f,[(0,t.Lk)("li",p,[(0,t.Lk)("button",{class:(0,r.C4)(["nav-link",{active:"clients"===Ea.activeTab}]),onClick:s[1]||(s[1]=e=>Fa.setActiveTab("clients")),type:"button",role:"tab"},[s[56]||(s[56]=(0,t.Lk)("i",{class:"fas fa-users me-2"},null,-1)),s[57]||(s[57]=(0,t.eW)(" Client ")),Fa.clientStats.total>0?((0,t.uX)(),(0,t.CE)("span",h,(0,r.v_)(Fa.clientStats.total),1)):(0,t.Q3)("",!0)],2)]),(0,t.Lk)("li",b,[(0,t.Lk)("button",{class:(0,r.C4)(["nav-link",{active:"admins"===Ea.activeTab}]),onClick:s[2]||(s[2]=e=>Fa.setActiveTab("admins")),type:"button",role:"tab"},[s[58]||(s[58]=(0,t.Lk)("i",{class:"fas fa-user-shield me-2"},null,-1)),s[59]||(s[59]=(0,t.eW)(" Admin ")),Fa.adminStats.total>0?((0,t.uX)(),(0,t.CE)("span",g,(0,r.v_)(Fa.adminStats.total),1)):(0,t.Q3)("",!0)],2)])])])]),(0,t.Lk)("div",v,[(0,t.Lk)("div",y,[(0,t.Lk)("div",k,[(0,t.Lk)("button",{class:"btn btn-outline-success btn-sm",onClick:s[3]||(s[3]=(...e)=>Fa.loadUsers&&Fa.loadUsers(...e)),disabled:Ea.loading},[(0,t.Lk)("i",{class:(0,r.C4)(["fas fa-sync-alt me-1",{"fa-spin":Ea.loading}])},null,2),s[60]||(s[60]=(0,t.eW)(" Refresh "))],8,L),"admins"===Ea.activeTab?((0,t.uX)(),(0,t.CE)("button",{key:0,class:"btn btn-success btn-sm",onClick:s[4]||(s[4]=(...e)=>Fa.showAddUserModal&&Fa.showAddUserModal(...e))},s[61]||(s[61]=[(0,t.Lk)("i",{class:"fas fa-user-plus me-1"},null,-1),(0,t.eW)(" Add Admin ")]))):(0,t.Q3)("",!0)])]),(0,t.Lk)("div",w,[(0,t.Lk)("div",_,[(0,t.Lk)("div",U,[(0,t.Lk)("div",C,[s[62]||(s[62]=(0,t.Lk)("span",{class:"input-group-text"},[(0,t.Lk)("i",{class:"fas fa-search"})],-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control",placeholder:"Search users by name, email, or username...","onUpdate:modelValue":s[5]||(s[5]=e=>Ea.searchQuery=e)},null,512),[[i.Jo,Ea.searchQuery]])])]),(0,t.Lk)("div",E,[(0,t.Lk)("span",F," Showing "+(0,r.v_)(Fa.filteredUsers.length)+" of "+(0,r.v_)(Ea.users.length)+" users ",1)])]),Ea.loading?((0,t.uX)(),(0,t.CE)("div",D,s[63]||(s[63]=[(0,t.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,t.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,t.Lk)("p",{class:"text-muted mt-2"},"Loading users...",-1)]))):0===Fa.filteredUsers.length?((0,t.uX)(),(0,t.CE)("div",x,[s[64]||(s[64]=(0,t.Lk)("i",{class:"fas fa-users fa-3x text-gray-300 mb-3"},null,-1)),s[65]||(s[65]=(0,t.Lk)("h5",{class:"text-gray-600"},"No users found",-1)),(0,t.Lk)("p",R,(0,r.v_)(Ea.searchQuery?"Try adjusting your search criteria.":"No users have been registered yet."),1)])):((0,t.uX)(),(0,t.CE)("div",S,[(0,t.Lk)("table",P,[s[70]||(s[70]=(0,t.Lk)("thead",{class:"table-light"},[(0,t.Lk)("tr",null,[(0,t.Lk)("th",null,"User"),(0,t.Lk)("th",null,"Email"),(0,t.Lk)("th",null,"Type"),(0,t.Lk)("th",null,"Status"),(0,t.Lk)("th",null,"Registered"),(0,t.Lk)("th",null,"Actions")])],-1)),(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(Fa.paginatedUsers,(e=>((0,t.uX)(),(0,t.CE)("tr",{key:e.id},[(0,t.Lk)("td",null,[(0,t.Lk)("div",A,[(0,t.Lk)("div",M,[e.profile_picture?((0,t.uX)(),(0,t.CE)("img",{key:0,src:e.profile_picture,alt:e.full_name,class:"rounded-circle"},null,8,I)):((0,t.uX)(),(0,t.CE)("div",T,(0,r.v_)(Fa.getInitials(e.full_name)),1))]),(0,t.Lk)("div",null,[(0,t.Lk)("div",j,(0,r.v_)(e.full_name),1),(0,t.Lk)("div",X,"@"+(0,r.v_)(e.username),1)])])]),(0,t.Lk)("td",null,(0,r.v_)(e.email),1),(0,t.Lk)("td",null,[(0,t.Lk)("span",{class:(0,r.C4)(["badge","admin"===e.type?"bg-primary":"bg-info"])},(0,r.v_)("admin"===e.type?"Admin":"Client"),3)]),(0,t.Lk)("td",null,[(0,t.Lk)("span",{class:(0,r.C4)(["badge",Fa.getStatusBadgeClass(Fa.getDisplayStatus(e))])},(0,r.v_)(Fa.formatStatus(Fa.getDisplayStatus(e))),3)]),(0,t.Lk)("td",null,(0,r.v_)(Fa.formatDate(e.created_at)),1),(0,t.Lk)("td",null,[(0,t.Lk)("div",$,[(0,t.Lk)("button",{class:"btn btn-outline-primary",onClick:s=>Fa.viewUser(e),title:"View Details"},s[66]||(s[66]=[(0,t.Lk)("i",{class:"fas fa-eye"},null,-1)]),8,V),"client"===e.type&&Fa.hasResidencyDocumentsNeedingReview(e)?((0,t.uX)(),(0,t.CE)("button",{key:0,class:"btn btn-outline-info",onClick:s=>Fa.viewResidencyDocuments(e),title:"Review Residency Documents"},s[67]||(s[67]=[(0,t.Lk)("i",{class:"fas fa-file-image"},null,-1)]),8,W)):(0,t.Q3)("",!0),(0,t.Lk)("button",{class:"btn btn-outline-warning",onClick:s=>Fa.editUser(e),title:"Edit User"},s[68]||(s[68]=[(0,t.Lk)("i",{class:"fas fa-edit"},null,-1)]),8,N),(0,t.Lk)("button",{class:"btn btn-outline-danger",onClick:s=>Fa.deleteUser(e),title:"Delete User"},s[69]||(s[69]=[(0,t.Lk)("i",{class:"fas fa-trash"},null,-1)]),8,B)])])])))),128))])])])),Fa.totalPages>1?((0,t.uX)(),(0,t.CE)("div",Q,[(0,t.Lk)("div",O," Page "+(0,r.v_)(Ea.currentPage)+" of "+(0,r.v_)(Fa.totalPages),1),(0,t.Lk)("nav",null,[(0,t.Lk)("ul",q,[(0,t.Lk)("li",{class:(0,r.C4)(["page-item",{disabled:1===Ea.currentPage}])},[(0,t.Lk)("button",{class:"page-link",onClick:s[6]||(s[6]=e=>Fa.changePage(Ea.currentPage-1)),disabled:1===Ea.currentPage}," Previous ",8,J)],2),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(Fa.visiblePages,(e=>((0,t.uX)(),(0,t.CE)("li",{key:e,class:(0,r.C4)(["page-item",{active:e===Ea.currentPage}])},[(0,t.Lk)("button",{class:"page-link",onClick:s=>Fa.changePage(e)},(0,r.v_)(e),9,z)],2)))),128)),(0,t.Lk)("li",{class:(0,r.C4)(["page-item",{disabled:Ea.currentPage===Fa.totalPages}])},[(0,t.Lk)("button",{class:"page-link",onClick:s[7]||(s[7]=e=>Fa.changePage(Ea.currentPage+1)),disabled:Ea.currentPage===Fa.totalPages}," Next ",8,H)],2)])])])):(0,t.Q3)("",!0)])])])])])],2)]),(0,t.Lk)("div",G,[(0,t.Lk)("div",K,[(0,t.Lk)("div",Y,[s[103]||(s[103]=(0,t.Lk)("div",{class:"modal-header"},[(0,t.Lk)("h5",{class:"modal-title",id:"addUserModalLabel"},[(0,t.Lk)("i",{class:"fas fa-user-plus me-2"}),(0,t.eW)(" Add New User ")]),(0,t.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),(0,t.Lk)("div",Z,[(0,t.Lk)("form",{onSubmit:s[33]||(s[33]=(0,i.D$)(((...e)=>Fa.submitAddUser&&Fa.submitAddUser(...e)),["prevent"]))},[(0,t.Lk)("div",ee,[(0,t.Lk)("div",se,[s[71]||(s[71]=(0,t.Lk)("label",{for:"addUsername",class:"form-label"},"Username *",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",class:(0,r.C4)(["form-control",{"is-invalid":Ea.formErrors.username}]),id:"addUsername","onUpdate:modelValue":s[8]||(s[8]=e=>Ea.addUserForm.username=e),required:""},null,2),[[i.Jo,Ea.addUserForm.username]]),Ea.formErrors.username?((0,t.uX)(),(0,t.CE)("div",ae,(0,r.v_)(Ea.formErrors.username),1)):(0,t.Q3)("",!0)])]),(0,t.Lk)("div",te,[(0,t.Lk)("div",re,[s[72]||(s[72]=(0,t.Lk)("label",{for:"addPassword",class:"form-label"},"Password *",-1)),(0,t.bo)((0,t.Lk)("input",{type:"password",class:(0,r.C4)(["form-control",{"is-invalid":Ea.formErrors.password}]),id:"addPassword","onUpdate:modelValue":s[9]||(s[9]=e=>Ea.addUserForm.password=e),required:"",minlength:"6"},null,2),[[i.Jo,Ea.addUserForm.password]]),Ea.formErrors.password?((0,t.uX)(),(0,t.CE)("div",ie,(0,r.v_)(Ea.formErrors.password),1)):(0,t.Q3)("",!0)]),(0,t.Lk)("div",oe,[s[73]||(s[73]=(0,t.Lk)("label",{for:"addConfirmPassword",class:"form-label"},"Confirm Password *",-1)),(0,t.bo)((0,t.Lk)("input",{type:"password",class:(0,r.C4)(["form-control",{"is-invalid":Ea.formErrors.confirmPassword}]),id:"addConfirmPassword","onUpdate:modelValue":s[10]||(s[10]=e=>Ea.addUserForm.confirmPassword=e),required:"",minlength:"6"},null,2),[[i.Jo,Ea.addUserForm.confirmPassword]]),Ea.formErrors.confirmPassword?((0,t.uX)(),(0,t.CE)("div",ne,(0,r.v_)(Ea.formErrors.confirmPassword),1)):(0,t.Q3)("",!0)])]),(0,t.Lk)("div",le,[(0,t.Lk)("div",de,[s[74]||(s[74]=(0,t.Lk)("label",{for:"addFirstName",class:"form-label"},"First Name *",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",class:(0,r.C4)(["form-control",{"is-invalid":Ea.formErrors.first_name}]),id:"addFirstName","onUpdate:modelValue":s[11]||(s[11]=e=>Ea.addUserForm.first_name=e),required:""},null,2),[[i.Jo,Ea.addUserForm.first_name]]),Ea.formErrors.first_name?((0,t.uX)(),(0,t.CE)("div",ce,(0,r.v_)(Ea.formErrors.first_name),1)):(0,t.Q3)("",!0)]),(0,t.Lk)("div",me,[s[75]||(s[75]=(0,t.Lk)("label",{for:"addMiddleName",class:"form-label"},"Middle Name",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control",id:"addMiddleName","onUpdate:modelValue":s[12]||(s[12]=e=>Ea.addUserForm.middle_name=e)},null,512),[[i.Jo,Ea.addUserForm.middle_name]])]),(0,t.Lk)("div",ue,[s[76]||(s[76]=(0,t.Lk)("label",{for:"addLastName",class:"form-label"},"Last Name *",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",class:(0,r.C4)(["form-control",{"is-invalid":Ea.formErrors.last_name}]),id:"addLastName","onUpdate:modelValue":s[13]||(s[13]=e=>Ea.addUserForm.last_name=e),required:""},null,2),[[i.Jo,Ea.addUserForm.last_name]]),Ea.formErrors.last_name?((0,t.uX)(),(0,t.CE)("div",fe,(0,r.v_)(Ea.formErrors.last_name),1)):(0,t.Q3)("",!0)])]),(0,t.Lk)("div",pe,[(0,t.Lk)("div",he,[s[77]||(s[77]=(0,t.Lk)("label",{for:"addSuffix",class:"form-label"},"Suffix",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control",id:"addSuffix","onUpdate:modelValue":s[14]||(s[14]=e=>Ea.addUserForm.suffix=e),placeholder:"Jr, Sr, III, etc."},null,512),[[i.Jo,Ea.addUserForm.suffix]])]),Fa.isCreatingAdminUser?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("div",be,[s[79]||(s[79]=(0,t.Lk)("label",{for:"addRole",class:"form-label"},"User Type *",-1)),(0,t.bo)((0,t.Lk)("select",{class:(0,r.C4)(["form-select",{"is-invalid":Ea.formErrors.role}]),id:"addRole","onUpdate:modelValue":s[15]||(s[15]=e=>Ea.addUserForm.role=e),required:"",onChange:s[16]||(s[16]=(...e)=>Fa.clearRoleSpecificFields&&Fa.clearRoleSpecificFields(...e))},s[78]||(s[78]=[(0,t.Lk)("option",{value:""},"Select User Type",-1),(0,t.Lk)("option",{value:"admin"},"Administrator",-1),(0,t.Lk)("option",{value:"client"},"Client",-1)]),34),[[i.u1,Ea.addUserForm.role]]),Ea.formErrors.role?((0,t.uX)(),(0,t.CE)("div",ge,(0,r.v_)(Ea.formErrors.role),1)):(0,t.Q3)("",!0)])),Fa.isCreatingAdminUser?((0,t.uX)(),(0,t.CE)("div",ve,s[80]||(s[80]=[(0,t.Lk)("label",{class:"form-label"},"User Type *",-1),(0,t.Lk)("input",{type:"text",class:"form-control",value:"Administrator",readonly:"",disabled:""},null,-1),(0,t.Lk)("small",{class:"text-muted"},"Creating administrator account",-1)]))):(0,t.Q3)("",!0)]),(0,t.Lk)("div",ye,[(0,t.Lk)("div",ke,[s[81]||(s[81]=(0,t.Lk)("label",{for:"addEmail",class:"form-label"},"Email",-1)),(0,t.bo)((0,t.Lk)("input",{type:"email",class:(0,r.C4)(["form-control",{"is-invalid":Ea.formErrors.email}]),id:"addEmail","onUpdate:modelValue":s[17]||(s[17]=e=>Ea.addUserForm.email=e)},null,2),[[i.Jo,Ea.addUserForm.email]]),Ea.formErrors.email?((0,t.uX)(),(0,t.CE)("div",Le,(0,r.v_)(Ea.formErrors.email),1)):(0,t.Q3)("",!0)]),(0,t.Lk)("div",we,[s[82]||(s[82]=(0,t.Lk)("label",{for:"addPhone",class:"form-label"},"Phone Number *",-1)),(0,t.bo)((0,t.Lk)("input",{type:"tel",class:(0,r.C4)(["form-control",{"is-invalid":Ea.formErrors.phone_number}]),id:"addPhone","onUpdate:modelValue":s[18]||(s[18]=e=>Ea.addUserForm.phone_number=e),onInput:s[19]||(s[19]=e=>Fa.handlePhoneInput(e,"add")),placeholder:"09123456789",maxlength:"11",pattern:"[0-9]*",required:""},null,34),[[i.Jo,Ea.addUserForm.phone_number]]),Ea.formErrors.phone_number?((0,t.uX)(),(0,t.CE)("div",_e,(0,r.v_)(Ea.formErrors.phone_number),1)):(0,t.Q3)("",!0)])]),"admin"===Ea.addUserForm.role?((0,t.uX)(),(0,t.CE)("div",Ue,s[83]||(s[83]=[(0,t.Lk)("hr",null,null,-1),(0,t.Lk)("h6",{class:"text-primary mb-3"},[(0,t.Lk)("i",{class:"fas fa-user-shield me-2"}),(0,t.eW)(" Administrator Information ")],-1),(0,t.Lk)("div",{class:"alert alert-info"},[(0,t.Lk)("i",{class:"fas fa-info-circle me-2"}),(0,t.eW)(" Administrator accounts will be created with basic information. Additional details can be updated later. ")],-1)]))):(0,t.Q3)("",!0),"client"===Ea.addUserForm.role?((0,t.uX)(),(0,t.CE)("div",Ce,[s[99]||(s[99]=(0,t.Lk)("hr",null,null,-1)),s[100]||(s[100]=(0,t.Lk)("h6",{class:"text-info mb-3"},[(0,t.Lk)("i",{class:"fas fa-user me-2"}),(0,t.eW)(" Client Information ")],-1)),(0,t.Lk)("div",Ee,[(0,t.Lk)("div",Fe,[s[84]||(s[84]=(0,t.Lk)("label",{for:"addBirthDate",class:"form-label"},"Birth Date *",-1)),(0,t.bo)((0,t.Lk)("input",{type:"date",class:(0,r.C4)(["form-control",{"is-invalid":Ea.formErrors.birth_date}]),id:"addBirthDate","onUpdate:modelValue":s[20]||(s[20]=e=>Ea.addUserForm.birth_date=e),required:""},null,2),[[i.Jo,Ea.addUserForm.birth_date]]),Ea.formErrors.birth_date?((0,t.uX)(),(0,t.CE)("div",De,(0,r.v_)(Ea.formErrors.birth_date),1)):(0,t.Q3)("",!0)]),(0,t.Lk)("div",xe,[s[86]||(s[86]=(0,t.Lk)("label",{for:"addGender",class:"form-label"},"Gender *",-1)),(0,t.bo)((0,t.Lk)("select",{class:(0,r.C4)(["form-select",{"is-invalid":Ea.formErrors.gender}]),id:"addGender","onUpdate:modelValue":s[21]||(s[21]=e=>Ea.addUserForm.gender=e),required:""},s[85]||(s[85]=[(0,t.Lk)("option",{value:""},"Select Gender",-1),(0,t.Lk)("option",{value:"male"},"Male",-1),(0,t.Lk)("option",{value:"female"},"Female",-1)]),2),[[i.u1,Ea.addUserForm.gender]]),Ea.formErrors.gender?((0,t.uX)(),(0,t.CE)("div",Re,(0,r.v_)(Ea.formErrors.gender),1)):(0,t.Q3)("",!0)])]),(0,t.Lk)("div",Se,[(0,t.Lk)("div",Pe,[s[88]||(s[88]=(0,t.Lk)("label",{for:"addCivilStatus",class:"form-label"},"Civil Status *",-1)),(0,t.bo)((0,t.Lk)("select",{class:"form-select",id:"addCivilStatus","onUpdate:modelValue":s[22]||(s[22]=e=>Ea.addUserForm.civil_status_id=e),required:""},s[87]||(s[87]=[(0,t.Fv)('<option value="1" data-v-c6cd0970>Single</option><option value="2" data-v-c6cd0970>Married</option><option value="3" data-v-c6cd0970>Widowed</option><option value="4" data-v-c6cd0970>Divorced</option><option value="5" data-v-c6cd0970>Separated</option>',5)]),512),[[i.u1,Ea.addUserForm.civil_status_id]])]),(0,t.Lk)("div",Ae,[s[89]||(s[89]=(0,t.Lk)("label",{for:"addNationality",class:"form-label"},"Nationality",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control",id:"addNationality","onUpdate:modelValue":s[23]||(s[23]=e=>Ea.addUserForm.nationality=e),placeholder:"Filipino"},null,512),[[i.Jo,Ea.addUserForm.nationality]])])]),s[101]||(s[101]=(0,t.Lk)("h6",{class:"text-secondary mb-3 mt-4"},[(0,t.Lk)("i",{class:"fas fa-map-marker-alt me-2"}),(0,t.eW)(" Address Information ")],-1)),(0,t.Lk)("div",Me,[(0,t.Lk)("div",Ie,[s[90]||(s[90]=(0,t.Lk)("label",{for:"addHouseNumber",class:"form-label"},"House Number",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control",id:"addHouseNumber","onUpdate:modelValue":s[24]||(s[24]=e=>Ea.addUserForm.house_number=e),placeholder:"e.g., 123"},null,512),[[i.Jo,Ea.addUserForm.house_number]])]),(0,t.Lk)("div",Te,[s[91]||(s[91]=(0,t.Lk)("label",{for:"addStreet",class:"form-label"},"Street",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control",id:"addStreet","onUpdate:modelValue":s[25]||(s[25]=e=>Ea.addUserForm.street=e),placeholder:"e.g., Main Street"},null,512),[[i.Jo,Ea.addUserForm.street]])])]),(0,t.Lk)("div",je,[(0,t.Lk)("div",Xe,[s[92]||(s[92]=(0,t.Lk)("label",{for:"addSubdivision",class:"form-label"},"Subdivision",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control",id:"addSubdivision","onUpdate:modelValue":s[26]||(s[26]=e=>Ea.addUserForm.subdivision=e),placeholder:"e.g., Greenfield Village"},null,512),[[i.Jo,Ea.addUserForm.subdivision]])]),(0,t.Lk)("div",$e,[s[93]||(s[93]=(0,t.Lk)("label",{for:"addBarangay",class:"form-label"},"Barangay *",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",class:(0,r.C4)(["form-control",{"is-invalid":Ea.formErrors.barangay}]),id:"addBarangay","onUpdate:modelValue":s[27]||(s[27]=e=>Ea.addUserForm.barangay=e),required:"",placeholder:"e.g., Barangay Bula"},null,2),[[i.Jo,Ea.addUserForm.barangay]]),Ea.formErrors.barangay?((0,t.uX)(),(0,t.CE)("div",Ve,(0,r.v_)(Ea.formErrors.barangay),1)):(0,t.Q3)("",!0)])]),(0,t.Lk)("div",We,[(0,t.Lk)("div",Ne,[s[94]||(s[94]=(0,t.Lk)("label",{for:"addCity",class:"form-label"},"City/Municipality *",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",class:(0,r.C4)(["form-control",{"is-invalid":Ea.formErrors.city_municipality}]),id:"addCity","onUpdate:modelValue":s[28]||(s[28]=e=>Ea.addUserForm.city_municipality=e),required:"",placeholder:"e.g., Camarines Sur"},null,2),[[i.Jo,Ea.addUserForm.city_municipality]]),Ea.formErrors.city_municipality?((0,t.uX)(),(0,t.CE)("div",Be,(0,r.v_)(Ea.formErrors.city_municipality),1)):(0,t.Q3)("",!0)]),(0,t.Lk)("div",Qe,[s[95]||(s[95]=(0,t.Lk)("label",{for:"addProvince",class:"form-label"},"Province *",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",class:(0,r.C4)(["form-control",{"is-invalid":Ea.formErrors.province}]),id:"addProvince","onUpdate:modelValue":s[29]||(s[29]=e=>Ea.addUserForm.province=e),required:"",placeholder:"e.g., Camarines Sur"},null,2),[[i.Jo,Ea.addUserForm.province]]),Ea.formErrors.province?((0,t.uX)(),(0,t.CE)("div",Oe,(0,r.v_)(Ea.formErrors.province),1)):(0,t.Q3)("",!0)]),(0,t.Lk)("div",qe,[s[96]||(s[96]=(0,t.Lk)("label",{for:"addPostalCode",class:"form-label"},"Postal Code",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control",id:"addPostalCode","onUpdate:modelValue":s[30]||(s[30]=e=>Ea.addUserForm.postal_code=e),placeholder:"e.g., 4422"},null,512),[[i.Jo,Ea.addUserForm.postal_code]])])]),(0,t.Lk)("div",Je,[(0,t.Lk)("div",ze,[s[97]||(s[97]=(0,t.Lk)("label",{for:"addYearsResidency",class:"form-label"},"Years of Residency",-1)),(0,t.bo)((0,t.Lk)("input",{type:"number",class:"form-control",id:"addYearsResidency","onUpdate:modelValue":s[31]||(s[31]=e=>Ea.addUserForm.years_of_residency=e),min:"0",placeholder:"e.g., 5"},null,512),[[i.Jo,Ea.addUserForm.years_of_residency]])]),(0,t.Lk)("div",He,[s[98]||(s[98]=(0,t.Lk)("label",{for:"addMonthsResidency",class:"form-label"},"Additional Months",-1)),(0,t.bo)((0,t.Lk)("input",{type:"number",class:"form-control",id:"addMonthsResidency","onUpdate:modelValue":s[32]||(s[32]=e=>Ea.addUserForm.months_of_residency=e),min:"0",max:"11",placeholder:"e.g., 6"},null,512),[[i.Jo,Ea.addUserForm.months_of_residency]])])])])):(0,t.Q3)("",!0)],32)]),(0,t.Lk)("div",Ge,[s[102]||(s[102]=(0,t.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),(0,t.Lk)("button",{type:"button",class:"btn btn-primary",onClick:s[34]||(s[34]=(...e)=>Fa.submitAddUser&&Fa.submitAddUser(...e)),disabled:Ea.addUserLoading},[Ea.addUserLoading?((0,t.uX)(),(0,t.CE)("span",Ye)):((0,t.uX)(),(0,t.CE)("i",Ze)),(0,t.eW)(" "+(0,r.v_)(Ea.addUserLoading?"Creating...":"Create User"),1)],8,Ke)])])])]),(0,t.Lk)("div",es,[(0,t.Lk)("div",ss,[(0,t.Lk)("div",as,[s[128]||(s[128]=(0,t.Lk)("div",{class:"modal-header"},[(0,t.Lk)("h5",{class:"modal-title",id:"editUserModalLabel"},[(0,t.Lk)("i",{class:"fas fa-user-edit me-2"}),(0,t.eW)(" Edit User ")]),(0,t.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),(0,t.Lk)("div",ts,[Ea.editUserForm.id?((0,t.uX)(),(0,t.CE)("form",{key:0,onSubmit:s[49]||(s[49]=(0,i.D$)(((...e)=>Fa.submitEditUser&&Fa.submitEditUser(...e)),["prevent"]))},[(0,t.Lk)("div",rs,[(0,t.Lk)("div",is,[s[104]||(s[104]=(0,t.Lk)("label",{for:"editUsername",class:"form-label"},"Username *",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",class:(0,r.C4)(["form-control",{"is-invalid":Ea.editFormErrors.username}]),id:"editUsername","onUpdate:modelValue":s[35]||(s[35]=e=>Ea.editUserForm.username=e),required:""},null,2),[[i.Jo,Ea.editUserForm.username]]),Ea.editFormErrors.username?((0,t.uX)(),(0,t.CE)("div",os,(0,r.v_)(Ea.editFormErrors.username),1)):(0,t.Q3)("",!0)]),(0,t.Lk)("div",ns,[s[106]||(s[106]=(0,t.Lk)("label",{for:"editStatus",class:"form-label"},"Account Status *",-1)),(0,t.bo)((0,t.Lk)("select",{class:(0,r.C4)(["form-select",{"is-invalid":Ea.editFormErrors.status}]),id:"editStatus","onUpdate:modelValue":s[36]||(s[36]=e=>Ea.editUserForm.status=e),required:""},s[105]||(s[105]=[(0,t.Lk)("option",{value:"active"},"Active",-1),(0,t.Lk)("option",{value:"suspended"},"Suspended",-1)]),2),[[i.u1,Ea.editUserForm.status]]),Ea.editFormErrors.status?((0,t.uX)(),(0,t.CE)("div",ls,(0,r.v_)(Ea.editFormErrors.status),1)):(0,t.Q3)("",!0)])]),(0,t.Lk)("div",ds,[(0,t.Lk)("div",cs,[s[107]||(s[107]=(0,t.Lk)("label",{for:"editFirstName",class:"form-label"},"First Name *",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",class:(0,r.C4)(["form-control",{"is-invalid":Ea.editFormErrors.first_name}]),id:"editFirstName","onUpdate:modelValue":s[37]||(s[37]=e=>Ea.editUserForm.first_name=e),required:""},null,2),[[i.Jo,Ea.editUserForm.first_name]]),Ea.editFormErrors.first_name?((0,t.uX)(),(0,t.CE)("div",ms,(0,r.v_)(Ea.editFormErrors.first_name),1)):(0,t.Q3)("",!0)]),(0,t.Lk)("div",us,[s[108]||(s[108]=(0,t.Lk)("label",{for:"editMiddleName",class:"form-label"},"Middle Name",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control",id:"editMiddleName","onUpdate:modelValue":s[38]||(s[38]=e=>Ea.editUserForm.middle_name=e)},null,512),[[i.Jo,Ea.editUserForm.middle_name]])]),(0,t.Lk)("div",fs,[s[109]||(s[109]=(0,t.Lk)("label",{for:"editLastName",class:"form-label"},"Last Name *",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",class:(0,r.C4)(["form-control",{"is-invalid":Ea.editFormErrors.last_name}]),id:"editLastName","onUpdate:modelValue":s[39]||(s[39]=e=>Ea.editUserForm.last_name=e),required:""},null,2),[[i.Jo,Ea.editUserForm.last_name]]),Ea.editFormErrors.last_name?((0,t.uX)(),(0,t.CE)("div",ps,(0,r.v_)(Ea.editFormErrors.last_name),1)):(0,t.Q3)("",!0)])]),(0,t.Lk)("div",hs,[(0,t.Lk)("div",bs,[s[110]||(s[110]=(0,t.Lk)("label",{for:"editSuffix",class:"form-label"},"Suffix",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control",id:"editSuffix","onUpdate:modelValue":s[40]||(s[40]=e=>Ea.editUserForm.suffix=e),placeholder:"Jr, Sr, III, etc."},null,512),[[i.Jo,Ea.editUserForm.suffix]])]),(0,t.Lk)("div",gs,[s[112]||(s[112]=(0,t.Lk)("label",{for:"editRole",class:"form-label"},"User Type *",-1)),(0,t.bo)((0,t.Lk)("select",{class:(0,r.C4)(["form-select",{"is-invalid":Ea.editFormErrors.role}]),id:"editRole","onUpdate:modelValue":s[41]||(s[41]=e=>Ea.editUserForm.role=e),required:"",disabled:""},s[111]||(s[111]=[(0,t.Lk)("option",{value:"admin"},"Administrator",-1),(0,t.Lk)("option",{value:"client"},"Client",-1)]),2),[[i.u1,Ea.editUserForm.role]]),s[113]||(s[113]=(0,t.Lk)("small",{class:"text-muted"},"User type cannot be changed after creation",-1)),Ea.editFormErrors.role?((0,t.uX)(),(0,t.CE)("div",vs,(0,r.v_)(Ea.editFormErrors.role),1)):(0,t.Q3)("",!0)])]),(0,t.Lk)("div",ys,[(0,t.Lk)("div",ks,[s[114]||(s[114]=(0,t.Lk)("label",{for:"editEmail",class:"form-label"},"Email",-1)),(0,t.bo)((0,t.Lk)("input",{type:"email",class:(0,r.C4)(["form-control",{"is-invalid":Ea.editFormErrors.email}]),id:"editEmail","onUpdate:modelValue":s[42]||(s[42]=e=>Ea.editUserForm.email=e)},null,2),[[i.Jo,Ea.editUserForm.email]]),Ea.editFormErrors.email?((0,t.uX)(),(0,t.CE)("div",Ls,(0,r.v_)(Ea.editFormErrors.email),1)):(0,t.Q3)("",!0)]),(0,t.Lk)("div",ws,[s[115]||(s[115]=(0,t.Lk)("label",{for:"editPhone",class:"form-label"},"Phone Number *",-1)),(0,t.bo)((0,t.Lk)("input",{type:"tel",class:(0,r.C4)(["form-control",{"is-invalid":Ea.editFormErrors.phone_number}]),id:"editPhone","onUpdate:modelValue":s[43]||(s[43]=e=>Ea.editUserForm.phone_number=e),onInput:s[44]||(s[44]=e=>Fa.handlePhoneInput(e,"edit")),placeholder:"09123456789",maxlength:"11",pattern:"[0-9]*",required:""},null,34),[[i.Jo,Ea.editUserForm.phone_number]]),Ea.editFormErrors.phone_number?((0,t.uX)(),(0,t.CE)("div",_s,(0,r.v_)(Ea.editFormErrors.phone_number),1)):(0,t.Q3)("",!0)])]),"admin"===Ea.editUserForm.role?((0,t.uX)(),(0,t.CE)("div",Us,s[116]||(s[116]=[(0,t.Lk)("hr",null,null,-1),(0,t.Lk)("h6",{class:"text-primary mb-3"},[(0,t.Lk)("i",{class:"fas fa-user-shield me-2"}),(0,t.eW)(" Administrator Information ")],-1),(0,t.Lk)("div",{class:"alert alert-info"},[(0,t.Lk)("i",{class:"fas fa-info-circle me-2"}),(0,t.eW)(" Administrator-specific information has been simplified. Only basic profile information is managed here. ")],-1)]))):(0,t.Q3)("",!0),"client"===Ea.editUserForm.role?((0,t.uX)(),(0,t.CE)("div",Cs,[s[120]||(s[120]=(0,t.Lk)("hr",null,null,-1)),s[121]||(s[121]=(0,t.Lk)("h6",{class:"text-info mb-3"},[(0,t.Lk)("i",{class:"fas fa-user me-2"}),(0,t.eW)(" Client Information ")],-1)),s[122]||(s[122]=(0,t.Lk)("div",{class:"alert alert-info"},[(0,t.Lk)("i",{class:"fas fa-info-circle me-2"}),(0,t.eW)(" Client-specific information can only be updated by the client through their profile. ")],-1)),(0,t.Lk)("div",Es,[(0,t.Lk)("div",Fs,[s[117]||(s[117]=(0,t.Lk)("label",{class:"form-label"},"Birth Date",-1)),(0,t.bo)((0,t.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":s[45]||(s[45]=e=>Ea.editUserForm.birth_date=e),readonly:""},null,512),[[i.Jo,Ea.editUserForm.birth_date]])]),(0,t.Lk)("div",Ds,[s[118]||(s[118]=(0,t.Lk)("label",{class:"form-label"},"Gender",-1)),(0,t.Lk)("input",{type:"text",class:"form-control",value:Ea.editUserForm.gender?Ea.editUserForm.gender.charAt(0).toUpperCase()+Ea.editUserForm.gender.slice(1):"",readonly:""},null,8,xs)])]),(0,t.Lk)("div",Rs,[(0,t.Lk)("div",Ss,[s[119]||(s[119]=(0,t.Lk)("label",{class:"form-label"},"Address",-1)),(0,t.Lk)("input",{type:"text",class:"form-control",value:Fa.getFullAddress(Ea.editUserForm),readonly:""},null,8,Ps)])])])):(0,t.Q3)("",!0),s[126]||(s[126]=(0,t.Lk)("hr",null,null,-1)),(0,t.Lk)("div",As,[(0,t.Lk)("div",Ms,[(0,t.Lk)("div",Is,[(0,t.bo)((0,t.Lk)("input",{class:"form-check-input",type:"checkbox",id:"resetPassword","onUpdate:modelValue":s[46]||(s[46]=e=>Ea.editUserForm.resetPassword=e)},null,512),[[i.lH,Ea.editUserForm.resetPassword]]),s[123]||(s[123]=(0,t.Lk)("label",{class:"form-check-label",for:"resetPassword"}," Reset user password ",-1))])])]),Ea.editUserForm.resetPassword?((0,t.uX)(),(0,t.CE)("div",Ts,[(0,t.Lk)("div",js,[s[124]||(s[124]=(0,t.Lk)("label",{for:"editNewPassword",class:"form-label"},"New Password *",-1)),(0,t.bo)((0,t.Lk)("input",{type:"password",class:(0,r.C4)(["form-control",{"is-invalid":Ea.editFormErrors.newPassword}]),id:"editNewPassword","onUpdate:modelValue":s[47]||(s[47]=e=>Ea.editUserForm.newPassword=e),minlength:"6"},null,2),[[i.Jo,Ea.editUserForm.newPassword]]),Ea.editFormErrors.newPassword?((0,t.uX)(),(0,t.CE)("div",Xs,(0,r.v_)(Ea.editFormErrors.newPassword),1)):(0,t.Q3)("",!0)]),(0,t.Lk)("div",$s,[s[125]||(s[125]=(0,t.Lk)("label",{for:"editConfirmPassword",class:"form-label"},"Confirm Password *",-1)),(0,t.bo)((0,t.Lk)("input",{type:"password",class:(0,r.C4)(["form-control",{"is-invalid":Ea.editFormErrors.confirmPassword}]),id:"editConfirmPassword","onUpdate:modelValue":s[48]||(s[48]=e=>Ea.editUserForm.confirmPassword=e),minlength:"6"},null,2),[[i.Jo,Ea.editUserForm.confirmPassword]]),Ea.editFormErrors.confirmPassword?((0,t.uX)(),(0,t.CE)("div",Vs,(0,r.v_)(Ea.editFormErrors.confirmPassword),1)):(0,t.Q3)("",!0)])])):(0,t.Q3)("",!0)],32)):(0,t.Q3)("",!0)]),(0,t.Lk)("div",Ws,[s[127]||(s[127]=(0,t.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),(0,t.Lk)("button",{type:"button",class:"btn btn-primary",onClick:s[50]||(s[50]=(...e)=>Fa.submitEditUser&&Fa.submitEditUser(...e)),disabled:Ea.editUserLoading},[Ea.editUserLoading?((0,t.uX)(),(0,t.CE)("span",Bs)):((0,t.uX)(),(0,t.CE)("i",Qs)),(0,t.eW)(" "+(0,r.v_)(Ea.editUserLoading?"Updating...":"Update User"),1)],8,Ns)])])])]),(0,t.Lk)("div",Os,[(0,t.Lk)("div",qs,[(0,t.Lk)("div",Js,[s[152]||(s[152]=(0,t.Lk)("div",{class:"modal-header"},[(0,t.Lk)("h5",{class:"modal-title",id:"viewUserModalLabel"},[(0,t.Lk)("i",{class:"fas fa-user me-2"}),(0,t.eW)(" User Details ")]),(0,t.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),Ea.viewUserData?((0,t.uX)(),(0,t.CE)("div",zs,[(0,t.Lk)("div",Hs,[(0,t.Lk)("div",Gs,[(0,t.Lk)("div",Ks,[Ea.viewUserData.profile_picture?((0,t.uX)(),(0,t.CE)("div",Ys,[(0,t.Lk)("img",{src:Ea.viewUserData.profile_picture,alt:Ea.viewUserData.full_name,class:"rounded-circle",style:{width:"80px",height:"80px","object-fit":"cover"}},null,8,Zs)])):((0,t.uX)(),(0,t.CE)("div",ea,[(0,t.Lk)("i",{class:(0,r.C4)("admin"===Ea.viewUserData.type?"fas fa-user-shield fa-2x text-primary":"fas fa-user fa-2x text-info")},null,2)]))]),(0,t.Lk)("h5",null,(0,r.v_)(Ea.viewUserData.full_name||"No Name"),1),(0,t.Lk)("span",{class:(0,r.C4)(["badge",Fa.getStatusBadgeClass(Ea.viewUserData.status)])},[s[129]||(s[129]=(0,t.Lk)("i",{class:"fas fa-circle me-1",style:{"font-size":"0.6em"}},null,-1)),(0,t.eW)(" "+(0,r.v_)(Fa.formatStatus(Ea.viewUserData.status)),1)],2),(0,t.Lk)("div",sa,[(0,t.Lk)("span",{class:(0,r.C4)(["badge","admin"===Ea.viewUserData.type?"bg-primary":"bg-info"])},[(0,t.Lk)("i",{class:(0,r.C4)("admin"===Ea.viewUserData.type?"fas fa-user-shield me-1":"fas fa-user me-1")},null,2),(0,t.eW)(" "+(0,r.v_)("admin"===Ea.viewUserData.type?"Administrator":"Client"),1)],2)])]),(0,t.Lk)("div",aa,[s[147]||(s[147]=(0,t.Lk)("h6",{class:"text-primary mb-3"},[(0,t.Lk)("i",{class:"fas fa-id-card me-2"}),(0,t.eW)(" Basic Information ")],-1)),(0,t.Lk)("table",ta,[(0,t.Lk)("tr",null,[s[130]||(s[130]=(0,t.Lk)("td",{class:"text-muted",style:{width:"30%"}},[(0,t.Lk)("strong",null,[(0,t.Lk)("i",{class:"fas fa-at me-1"}),(0,t.eW)("Username:")])],-1)),(0,t.Lk)("td",null,(0,r.v_)(Ea.viewUserData.username),1)]),(0,t.Lk)("tr",null,[s[131]||(s[131]=(0,t.Lk)("td",{class:"text-muted"},[(0,t.Lk)("strong",null,[(0,t.Lk)("i",{class:"fas fa-envelope me-1"}),(0,t.eW)("Email:")])],-1)),(0,t.Lk)("td",null,(0,r.v_)(Ea.viewUserData.email||"Not provided"),1)]),(0,t.Lk)("tr",null,[s[132]||(s[132]=(0,t.Lk)("td",{class:"text-muted"},[(0,t.Lk)("strong",null,[(0,t.Lk)("i",{class:"fas fa-phone me-1"}),(0,t.eW)("Phone:")])],-1)),(0,t.Lk)("td",null,(0,r.v_)(Ea.viewUserData.phone_number||"Not provided"),1)]),(0,t.Lk)("tr",null,[s[134]||(s[134]=(0,t.Lk)("td",{class:"text-muted"},[(0,t.Lk)("strong",null,[(0,t.Lk)("i",{class:"fas fa-info-circle me-1"}),(0,t.eW)("Status:")])],-1)),(0,t.Lk)("td",null,[(0,t.Lk)("span",{class:(0,r.C4)(["badge",Fa.getStatusBadgeClass(Ea.viewUserData.status)])},[s[133]||(s[133]=(0,t.Lk)("i",{class:"fas fa-circle me-1",style:{"font-size":"0.6em"}},null,-1)),(0,t.eW)(" "+(0,r.v_)(Fa.formatStatus(Ea.viewUserData.status)),1)],2)])])]),"admin"===Ea.viewUserData.type?((0,t.uX)(),(0,t.CE)("div",ra,s[135]||(s[135]=[(0,t.Fv)('<h6 class="text-primary mb-3" data-v-c6cd0970><i class="fas fa-user-shield me-2" data-v-c6cd0970></i> Administrator Details </h6><div class="alert alert-info" data-v-c6cd0970><i class="fas fa-info-circle me-2" data-v-c6cd0970></i> Administrator accounts use simplified profile management. Additional administrative details can be managed through dedicated admin settings. </div><div class="row mb-2" data-v-c6cd0970><div class="col-sm-4" data-v-c6cd0970><strong data-v-c6cd0970>Account Type:</strong></div><div class="col-sm-8" data-v-c6cd0970><span class="badge bg-primary" data-v-c6cd0970><i class="fas fa-user-shield me-1" data-v-c6cd0970></i> Administrator </span></div></div><div class="row mb-3" data-v-c6cd0970><div class="col-sm-4" data-v-c6cd0970><strong data-v-c6cd0970>Permissions:</strong></div><div class="col-sm-8" data-v-c6cd0970>Full system access and user management</div></div>',4)]))):(0,t.Q3)("",!0),"client"===Ea.viewUserData.type?((0,t.uX)(),(0,t.CE)("div",ia,[s[141]||(s[141]=(0,t.Lk)("h6",{class:"text-info mb-3"},[(0,t.Lk)("i",{class:"fas fa-user me-2"}),(0,t.eW)(" Client Details ")],-1)),(0,t.Lk)("table",oa,[(0,t.Lk)("tr",null,[s[136]||(s[136]=(0,t.Lk)("td",{class:"text-muted",style:{width:"30%"}},[(0,t.Lk)("strong",null,[(0,t.Lk)("i",{class:"fas fa-birthday-cake me-1"}),(0,t.eW)("Birth Date:")])],-1)),(0,t.Lk)("td",null,(0,r.v_)(Ea.viewUserData.birth_date?Fa.formatDate(Ea.viewUserData.birth_date):"Not provided"),1)]),(0,t.Lk)("tr",null,[s[137]||(s[137]=(0,t.Lk)("td",{class:"text-muted"},[(0,t.Lk)("strong",null,[(0,t.Lk)("i",{class:"fas fa-venus-mars me-1"}),(0,t.eW)("Gender:")])],-1)),(0,t.Lk)("td",null,(0,r.v_)(Ea.viewUserData.gender?Ea.viewUserData.gender.charAt(0).toUpperCase()+Ea.viewUserData.gender.slice(1):"Not specified"),1)]),(0,t.Lk)("tr",null,[s[138]||(s[138]=(0,t.Lk)("td",{class:"text-muted"},[(0,t.Lk)("strong",null,[(0,t.Lk)("i",{class:"fas fa-flag me-1"}),(0,t.eW)("Nationality:")])],-1)),(0,t.Lk)("td",null,(0,r.v_)(Ea.viewUserData.nationality||"Not specified"),1)]),(0,t.Lk)("tr",null,[s[139]||(s[139]=(0,t.Lk)("td",{class:"text-muted"},[(0,t.Lk)("strong",null,[(0,t.Lk)("i",{class:"fas fa-map-marker-alt me-1"}),(0,t.eW)("Address:")])],-1)),(0,t.Lk)("td",null,(0,r.v_)(Fa.getFullAddress(Ea.viewUserData)),1)]),Ea.viewUserData.years_of_residency||Ea.viewUserData.months_of_residency?((0,t.uX)(),(0,t.CE)("tr",na,[s[140]||(s[140]=(0,t.Lk)("td",{class:"text-muted"},[(0,t.Lk)("strong",null,[(0,t.Lk)("i",{class:"fas fa-home me-1"}),(0,t.eW)("Residency:")])],-1)),(0,t.Lk)("td",null,[(0,t.Lk)("span",la,(0,r.v_)(Ea.viewUserData.years_of_residency||0)+" years, "+(0,r.v_)(Ea.viewUserData.months_of_residency||0)+" months ",1)])])):(0,t.Q3)("",!0)])])):(0,t.Q3)("",!0),s[148]||(s[148]=(0,t.Lk)("h6",{class:"text-secondary mb-3 mt-4"},[(0,t.Lk)("i",{class:"fas fa-clock me-2"}),(0,t.eW)(" Account Information ")],-1)),(0,t.Lk)("table",da,[(0,t.Lk)("tr",null,[s[142]||(s[142]=(0,t.Lk)("td",{class:"text-muted",style:{width:"30%"}},[(0,t.Lk)("strong",null,[(0,t.Lk)("i",{class:"fas fa-calendar-plus me-1"}),(0,t.eW)("Registered:")])],-1)),(0,t.Lk)("td",null,(0,r.v_)(Fa.formatDate(Ea.viewUserData.created_at)),1)]),(0,t.Lk)("tr",null,[s[143]||(s[143]=(0,t.Lk)("td",{class:"text-muted"},[(0,t.Lk)("strong",null,[(0,t.Lk)("i",{class:"fas fa-edit me-1"}),(0,t.eW)("Last Updated:")])],-1)),(0,t.Lk)("td",null,(0,r.v_)(Ea.viewUserData.updated_at?Fa.formatDate(Ea.viewUserData.updated_at):"Never"),1)]),(0,t.Lk)("tr",null,[s[144]||(s[144]=(0,t.Lk)("td",{class:"text-muted"},[(0,t.Lk)("strong",null,[(0,t.Lk)("i",{class:"fas fa-sign-in-alt me-1"}),(0,t.eW)("Last Login:")])],-1)),(0,t.Lk)("td",null,[Ea.viewUserData.last_login?((0,t.uX)(),(0,t.CE)("span",ca,(0,r.v_)(Fa.formatDate(Ea.viewUserData.last_login)),1)):((0,t.uX)(),(0,t.CE)("span",ma,"Never"))])])]),Ea.viewUserData&&"client"===Ea.viewUserData.type?((0,t.uX)(),(0,t.CE)("div",ua,[(0,t.Lk)("div",fa,[s[146]||(s[146]=(0,t.Lk)("h6",{class:"text-warning mb-0"},[(0,t.Lk)("i",{class:"fas fa-home me-2"}),(0,t.eW)(" Residency Documents ")],-1)),(0,t.Lk)("button",{class:"btn btn-outline-primary btn-sm me-2",onClick:s[51]||(s[51]=e=>Fa.openImageModal(Ea.viewUserData))},s[145]||(s[145]=[(0,t.Lk)("i",{class:"fas fa-images me-1"},null,-1),(0,t.eW)(" View Images ")]))])])):(0,t.Q3)("",!0)])])])):(0,t.Q3)("",!0),(0,t.Lk)("div",pa,[s[151]||(s[151]=(0,t.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},[(0,t.Lk)("i",{class:"fas fa-times me-1"}),(0,t.eW)(" Close ")],-1)),Ea.viewUserData&&"client"===Ea.viewUserData.type&&Fa.needsResidencyVerification(Ea.viewUserData)?((0,t.uX)(),(0,t.CE)("button",{key:0,type:"button",class:"btn btn-warning",onClick:s[52]||(s[52]=e=>Fa.viewResidencyDocuments(Ea.viewUserData)),"data-bs-dismiss":"modal"},s[149]||(s[149]=[(0,t.Lk)("i",{class:"fas fa-home me-1"},null,-1),(0,t.eW)(" View Residency Documents ")]))):(0,t.Q3)("",!0),(0,t.Lk)("button",{type:"button",class:"btn btn-primary",onClick:s[53]||(s[53]=e=>Fa.editUser(Ea.viewUserData)),"data-bs-dismiss":"modal"},s[150]||(s[150]=[(0,t.Lk)("i",{class:"fas fa-edit me-1"},null,-1),(0,t.eW)(" Edit User ")]))])])])]),(0,t.bF)(Ra,{user:Ea.selectedUserForResidency,processing:Ea.processingResidencyAction,onApprove:Fa.approveResidencyVerification,onReject:Fa.showRejectResidencyModal},null,8,["user","processing","onApprove","onReject"]),s[161]||(s[161]=(0,t.Fv)('<div class="modal fade" id="directImageModal" tabindex="-1" aria-labelledby="directImageModalLabel" aria-hidden="true" data-v-c6cd0970><div class="modal-dialog modal-xl modal-dialog-scrollable" data-v-c6cd0970><div class="modal-content" data-v-c6cd0970><div class="modal-header" data-v-c6cd0970><h5 class="modal-title" id="directImageModalLabel" data-v-c6cd0970><i class="fas fa-images me-2" data-v-c6cd0970></i> Residency Images </h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" data-v-c6cd0970></button></div><div class="modal-body" id="imageModalContent" data-v-c6cd0970></div><div class="modal-footer" data-v-c6cd0970><button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-v-c6cd0970>Close</button></div></div></div></div>',1)),(0,t.Lk)("div",ha,[(0,t.Lk)("div",ba,[(0,t.Lk)("div",ga,[s[160]||(s[160]=(0,t.Lk)("div",{class:"modal-header"},[(0,t.Lk)("h5",{class:"modal-title",id:"rejectResidencyModalLabel"},[(0,t.Lk)("i",{class:"fas fa-times-circle me-2"}),(0,t.eW)(" Reject Residency Verification ")]),(0,t.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),(0,t.Lk)("div",va,[(0,t.Lk)("div",ya,[s[153]||(s[153]=(0,t.Lk)("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),s[154]||(s[154]=(0,t.eW)(" You are about to reject the residency verification for ")),(0,t.Lk)("strong",null,(0,r.v_)(Ea.selectedUserForResidency?.full_name),1),s[155]||(s[155]=(0,t.eW)(". "))]),(0,t.Lk)("div",ka,[s[156]||(s[156]=(0,t.Lk)("label",{for:"rejectionReason",class:"form-label"},"Reason for Rejection *",-1)),(0,t.bo)((0,t.Lk)("textarea",{id:"rejectionReason",class:"form-control","onUpdate:modelValue":s[54]||(s[54]=e=>Ea.rejectionReason=e),rows:"4",placeholder:"Please provide a detailed reason for rejecting the residency verification...",required:""},null,512),[[i.Jo,Ea.rejectionReason]]),s[157]||(s[157]=(0,t.Lk)("div",{class:"form-text"},"Minimum 10 characters required",-1))])]),(0,t.Lk)("div",La,[s[159]||(s[159]=(0,t.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),(0,t.Lk)("button",{type:"button",class:"btn btn-danger",onClick:s[55]||(s[55]=(...e)=>Fa.rejectResidencyVerification&&Fa.rejectResidencyVerification(...e)),disabled:!Ea.rejectionReason||Ea.rejectionReason.length<10||Ea.processingResidencyAction},[Ea.processingResidencyAction?((0,t.uX)(),(0,t.CE)("span",_a)):((0,t.uX)(),(0,t.CE)("i",Ua)),s[158]||(s[158]=(0,t.eW)(" Reject Verification "))],8,wa)])])])])])}a(4114),a(8111),a(2489),a(116),a(7588),a(1701);var Ea=a(3237),Fa=a(2944);const Da={class:"modal fade",id:"residencyDocumentsModal",tabindex:"-1","aria-labelledby":"residencyDocumentsModalLabel","aria-hidden":"true"},xa={class:"modal-dialog modal-xl modal-dialog-scrollable"},Ra={class:"modal-content"},Sa={class:"modal-body"},Pa={key:0},Aa={class:"row mb-4"},Ma={class:"col-12"},Ia={class:"card bg-light"},Ta={class:"card-body"},ja={class:"row"},Xa={class:"col-md-6"},$a={class:"col-md-6"},Va={class:"row"},Wa={class:"col-12"},Na={key:0,class:"text-center py-4"},Ba={key:1,class:"alert alert-danger"},Qa={key:2,class:"text-center py-4"},Oa={key:3,class:"row"},qa={class:"card h-100 document-card"},Ja=["onClick"],za=["src","alt"],Ha={key:1,class:"loading-preview"},Ga={key:2,class:"file-icon-preview"},Ka={class:"card-header d-flex justify-content-between align-items-center"},Ya={class:"mb-0"},Za={class:"card-body"},et={class:"card-text"},st={class:"d-grid"},at=["onClick"],tt={class:"modal-footer"},rt={key:0,class:"ms-auto"},it=["disabled"],ot=["disabled"],nt={key:0,class:"spinner-border spinner-border-sm me-1",role:"status"},lt={key:1,class:"fas fa-check me-1"},dt={key:1,class:"ms-auto"};function ct(e,s,a,i,o,n){const l=(0,t.g2)("DocumentViewer");return(0,t.uX)(),(0,t.CE)("div",Da,[(0,t.Lk)("div",xa,[(0,t.Lk)("div",Ra,[s[25]||(s[25]=(0,t.Lk)("div",{class:"modal-header"},[(0,t.Lk)("h5",{class:"modal-title",id:"residencyDocumentsModalLabel"},[(0,t.Lk)("i",{class:"fas fa-file-image me-2"}),(0,t.eW)(" Residency Documents Review ")]),(0,t.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),(0,t.Lk)("div",Sa,[a.user?((0,t.uX)(),(0,t.CE)("div",Pa,[(0,t.Lk)("div",Aa,[(0,t.Lk)("div",Ma,[(0,t.Lk)("div",Ia,[(0,t.Lk)("div",Ta,[s[8]||(s[8]=(0,t.Lk)("h6",{class:"card-title mb-3"},[(0,t.Lk)("i",{class:"fas fa-user me-2"}),(0,t.eW)(" User Information ")],-1)),(0,t.Lk)("div",ja,[(0,t.Lk)("div",Xa,[(0,t.Lk)("p",null,[s[3]||(s[3]=(0,t.Lk)("strong",null,"Name:",-1)),(0,t.eW)(" "+(0,r.v_)(a.user.full_name),1)]),(0,t.Lk)("p",null,[s[4]||(s[4]=(0,t.Lk)("strong",null,"Username:",-1)),(0,t.eW)(" "+(0,r.v_)(a.user.username),1)]),(0,t.Lk)("p",null,[s[5]||(s[5]=(0,t.Lk)("strong",null,"Email:",-1)),(0,t.eW)(" "+(0,r.v_)(a.user.email),1)])]),(0,t.Lk)("div",$a,[(0,t.Lk)("p",null,[s[6]||(s[6]=(0,t.Lk)("strong",null,"Status:",-1)),(0,t.Lk)("span",{class:(0,r.C4)(["badge",n.getStatusBadgeClass(a.user.status)])},(0,r.v_)(n.formatStatus(a.user.status)),3)]),(0,t.Lk)("p",null,[s[7]||(s[7]=(0,t.Lk)("strong",null,"Registration Date:",-1)),(0,t.eW)(" "+(0,r.v_)(n.formatDate(a.user.created_at)),1)])])])])])])]),(0,t.Lk)("div",Va,[(0,t.Lk)("div",Wa,[s[20]||(s[20]=(0,t.Lk)("h6",{class:"mb-3"},[(0,t.Lk)("i",{class:"fas fa-folder-open me-2"}),(0,t.eW)(" Uploaded Documents ")],-1)),o.loading?((0,t.uX)(),(0,t.CE)("div",Na,s[9]||(s[9]=[(0,t.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,t.Lk)("span",{class:"visually-hidden"},"Loading documents...")],-1),(0,t.Lk)("p",{class:"mt-2"},"Loading documents...",-1)]))):o.error?((0,t.uX)(),(0,t.CE)("div",Ba,[s[10]||(s[10]=(0,t.Lk)("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),(0,t.eW)(" "+(0,r.v_)(o.error),1)])):o.documents&&0!==o.documents.length?((0,t.uX)(),(0,t.CE)("div",Oa,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.documents,(e=>((0,t.uX)(),(0,t.CE)("div",{key:e.id,class:"col-md-6 col-lg-4 mb-3"},[(0,t.Lk)("div",qa,[(0,t.Lk)("div",{class:"card-img-top document-preview",onClick:s=>n.viewDocument(e)},[n.isImageDocument(e)&&o.documentBlobUrls[e.id]?((0,t.uX)(),(0,t.CE)("img",{key:0,src:o.documentBlobUrls[e.id],alt:e.document_name,class:"preview-image",onError:s[0]||(s[0]=(...e)=>n.handleImageError&&n.handleImageError(...e))},null,40,za)):n.isImageDocument(e)?((0,t.uX)(),(0,t.CE)("div",Ha,s[12]||(s[12]=[(0,t.Lk)("div",{class:"spinner-border spinner-border-sm",role:"status"},[(0,t.Lk)("span",{class:"sr-only"},"Loading...")],-1)]))):((0,t.uX)(),(0,t.CE)("div",Ga,[(0,t.Lk)("i",{class:(0,r.C4)([n.getDocumentIcon(e.document_type),"fa-3x"])},null,2)])),s[13]||(s[13]=(0,t.Lk)("div",{class:"preview-overlay"},[(0,t.Lk)("i",{class:"fas fa-eye fa-2x"})],-1))],8,Ja),(0,t.Lk)("div",Ka,[(0,t.Lk)("h6",Ya,(0,r.v_)(n.formatDocumentType(e.document_type)),1),(0,t.Lk)("span",{class:(0,r.C4)(["badge",n.getDocumentStatusBadgeClass(e.verification_status)])},(0,r.v_)(n.formatDocumentStatus(e.verification_status)),3)]),(0,t.Lk)("div",Za,[(0,t.Lk)("p",et,[s[14]||(s[14]=(0,t.Lk)("strong",null,"File:",-1)),(0,t.eW)(" "+(0,r.v_)(e.document_name),1),s[15]||(s[15]=(0,t.Lk)("br",null,null,-1)),s[16]||(s[16]=(0,t.Lk)("strong",null,"Size:",-1)),(0,t.eW)(" "+(0,r.v_)(n.formatFileSize(e.file_size)),1),s[17]||(s[17]=(0,t.Lk)("br",null,null,-1)),s[18]||(s[18]=(0,t.Lk)("strong",null,"Uploaded:",-1)),(0,t.eW)(" "+(0,r.v_)(n.formatDate(e.created_at)),1)]),(0,t.Lk)("div",st,[(0,t.Lk)("button",{class:"btn btn-outline-primary btn-sm",onClick:s=>n.viewDocument(e)},s[19]||(s[19]=[(0,t.Lk)("i",{class:"fas fa-eye me-1"},null,-1),(0,t.eW)(" View Document ")]),8,at)])])])])))),128))])):((0,t.uX)(),(0,t.CE)("div",Qa,s[11]||(s[11]=[(0,t.Lk)("i",{class:"fas fa-file-slash fa-3x text-muted mb-3"},null,-1),(0,t.Lk)("p",{class:"text-muted"},"No residency documents found for this user.",-1)])))])])])):(0,t.Q3)("",!0)]),(0,t.Lk)("div",tt,[s[24]||(s[24]=(0,t.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1)),o.documents&&o.documents.length>0&&!n.allDocumentsApproved?((0,t.uX)(),(0,t.CE)("div",rt,[(0,t.Lk)("button",{type:"button",class:"btn btn-danger me-2",onClick:s[1]||(s[1]=s=>e.$emit("reject")),disabled:a.processing},s[21]||(s[21]=[(0,t.Lk)("i",{class:"fas fa-times me-1"},null,-1),(0,t.eW)(" Reject ")]),8,it),(0,t.Lk)("button",{type:"button",class:"btn btn-success",onClick:s[2]||(s[2]=s=>e.$emit("approve")),disabled:a.processing},[a.processing?((0,t.uX)(),(0,t.CE)("span",nt)):((0,t.uX)(),(0,t.CE)("i",lt)),s[22]||(s[22]=(0,t.eW)(" Approve "))],8,ot)])):n.allDocumentsApproved?((0,t.uX)(),(0,t.CE)("div",dt,s[23]||(s[23]=[(0,t.Lk)("span",{class:"badge bg-success fs-6"},[(0,t.Lk)("i",{class:"fas fa-check me-1"}),(0,t.eW)(" All Documents Approved ")],-1)]))):(0,t.Q3)("",!0)])])]),o.selectedDocument?((0,t.uX)(),(0,t.Wv)(l,{key:0,document:o.selectedDocument,onClose:n.closeDocumentViewer},null,8,["document","onClose"])):(0,t.Q3)("",!0)])}a(1148);var mt=a(7145),ut=a(4300);class ft{constructor(){this.baseURL="/residency"}async getAccountDocuments(e){try{const s=await ut["default"].get(`${this.baseURL}/documents/${e}`);return this.handleResponse(s)}catch(s){return this.handleError(s)}}async getPendingVerifications(e={}){try{const s=await ut["default"].get(`${this.baseURL}/pending`,{params:e});return this.handleResponse(s)}catch(s){return this.handleError(s)}}async approveVerification(e,s=[]){try{const a=await ut["default"].post(`${this.baseURL}/approve`,{account_id:e,document_ids:s});return this.handleResponse(a)}catch(a){return this.handleError(a)}}async rejectVerification(e,s,a=[]){try{const t=await ut["default"].post(`${this.baseURL}/reject`,{account_id:e,rejection_reason:s,document_ids:a});return this.handleResponse(t)}catch(t){return this.handleError(t)}}getDocumentFileUrl(e){const s="https://brgybulabackend-production.up.railway.app/api";return`${s}/residency/documents/${e}/file`}async deleteDocument(e){try{const s=await ut["default"].delete(`${this.baseURL}/documents/${e}`);return this.handleResponse(s)}catch(s){return this.handleError(s)}}handleResponse(e){if(e.data.success)return{success:!0,data:e.data.data,message:e.data.message};throw new Error(e.data.message||"Operation failed")}handleError(e){console.error("Residency Service Error:",e);let s="An unexpected error occurred",a=[],t=0;if(e.response){t=e.response.status;const r=e.response.data;r&&(s=r.message||r.error||s,a=r.errors||r.details||[])}else s=e.request?"Network error - please check your connection":e.message||s;return{success:!1,message:s,errors:a,status:t}}formatDocumentType(e){const s={utility_bill:"Utility Bill",barangay_certificate:"Barangay Certificate",valid_id:"Valid ID",lease_contract:"Lease Contract",other:"Other Document"};return s[e]||e}formatVerificationStatus(e){const s={pending:"Pending Review",approved:"Approved",rejected:"Rejected"};return s[e]||e}getStatusBadgeClass(e){const s={pending:"bg-warning",approved:"bg-success",rejected:"bg-danger"};return s[e]||"bg-secondary"}}var pt=new ft,ht={name:"ResidencyDocumentsModal",components:{DocumentViewer:mt.A},props:{user:{type:Object,default:null},processing:{type:Boolean,default:!1}},data(){return{documents:[],loading:!1,error:null,selectedDocument:null,documentBlobUrls:{},isDestroyed:!1}},watch:{user:{handler(e){e&&this.loadDocuments()},immediate:!0}},computed:{allDocumentsApproved(){return!(!this.documents||0===this.documents.length)&&(this.documents.every((e=>"approved"===e.verification_status))||"approved"===this.user?.residency_verification_status)}},beforeUnmount(){this.isDestroyed=!0,Object.values(this.documentBlobUrls).forEach((e=>{URL.revokeObjectURL(e)}))},methods:{async loadDocuments(){if(this.user&&!this.isDestroyed){this.loading=!0,this.error=null,this.documents=[];try{const e=this.user.original_id||this.user.id,s="string"===typeof e&&e.includes("_")?e.split("_")[1]:e,a=await pt.getAccountDocuments(s);if(this.isDestroyed)return;if(!a.success)throw new Error(a.message||"Failed to load documents");this.documents=a.data||[],await this.loadDocumentThumbnails()}catch(e){console.error("Failed to load residency documents:",e),this.isDestroyed||(this.error=e.message||"Failed to load documents")}finally{this.isDestroyed||(this.loading=!1)}}},viewDocument(e){this.selectedDocument=e},closeDocumentViewer(){this.selectedDocument=null},async loadDocumentThumbnails(){for(const s of this.documents){if(this.isDestroyed)return;if(this.isImageDocument(s))try{const e=await ut["default"].get(`/residency/documents/${s.id}/file`,{responseType:"blob"});if(!this.isDestroyed){const a=new Blob([e.data],{type:s.mime_type});this.documentBlobUrls[s.id]=URL.createObjectURL(a)}}catch(e){console.error(`Failed to load thumbnail for document ${s.id}:`,e)}}},isImageDocument(e){const s=["image/jpeg","image/jpg","image/png","image/gif","image/webp"];return s.includes(e.mime_type?.toLowerCase())},getDocumentPreviewUrl(e){return pt.getDocumentFileUrl(e)},handleImageError(e){console.error("Image failed to load:",e.target.src),e.target.style.display="none"},getDocumentIcon(e){const s={utility_bill:"fas fa-file-invoice text-warning",barangay_certificate:"fas fa-certificate text-success",valid_id:"fas fa-id-card text-info",lease_contract:"fas fa-file-contract text-primary",other:"fas fa-file text-secondary"};return s[e]||"fas fa-file text-secondary"},formatDocumentType(e){return pt.formatDocumentType(e)},formatDocumentStatus(e){return pt.formatVerificationStatus(e)},getDocumentStatusBadgeClass(e){return pt.getStatusBadgeClass(e)},getStatusBadgeClass(e){const s={active:"bg-success",inactive:"bg-secondary",pending:"bg-warning",suspended:"bg-danger",pending_verification:"bg-warning",pending_residency_verification:"bg-info",residency_rejected:"bg-danger",residency_approved:"bg-success",no_residency_documents:"bg-warning"};return s[e]||"bg-secondary"},formatStatus(e){return e?.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase()))||"Unknown"},formatDate(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},formatFileSize(e){if(!e)return"Unknown size";const s=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,a)*100)/100+" "+s[a]}}},bt=a(1241);const gt=(0,bt.A)(ht,[["render",ct],["__scopeId","data-v-1a2bdbb6"]]);var vt=gt,yt=a(9197),kt=a(3911),Lt=a(8077),wt={name:"AdminUsers",components:{AdminHeader:Ea.A,AdminSidebar:Fa.A,ResidencyDocumentsModal:vt},data(){return{sidebarCollapsed:!1,showUserDropdown:!1,isMobile:!1,adminData:null,users:[],searchQuery:"",filterStatus:"",filterType:"",activeTab:"clients",currentPage:1,itemsPerPage:10,loading:!1,userStats:{total:0,active:0,pending:0,admins:0},viewUserData:null,addUserLoading:!1,editUserLoading:!1,selectedUserForResidency:null,processingResidencyAction:!1,processingQuickAction:!1,rejectionReason:"",formErrors:{},editFormErrors:{},addUserForm:{username:"",email:"",password:"",confirmPassword:"",first_name:"",middle_name:"",last_name:"",suffix:"",role:"",phone_number:"",birth_date:"",gender:"",civil_status_id:1,nationality:"Filipino",house_number:"",street:"",subdivision:"",barangay:"",city_municipality:"",province:"",postal_code:"",years_of_residency:null,months_of_residency:null},editUserForm:{id:null,username:"",email:"",first_name:"",middle_name:"",last_name:"",suffix:"",role:"",status:"",phone_number:"",birth_date:"",gender:"",civil_status_id:1,nationality:"Filipino",house_number:"",street:"",subdivision:"",barangay:"",city_municipality:"",province:"",postal_code:"",years_of_residency:null,months_of_residency:null,resetPassword:!1,newPassword:"",confirmPassword:""},genderOptions:[{value:"male",label:"Male"},{value:"female",label:"Female"}],statusOptions:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"suspended",label:"Suspended"},{value:"pending_verification",label:"Pending Verification"}]}},computed:{activeMenu(){const e=this.$route.path;return e.includes("/admin/users")?"users":e.includes("/admin/requests")?"requests":e.includes("/admin/reports")?"reports":e.includes("/admin/settings")?"settings":e.includes("/admin/activity-logs")?"activity":e.includes("/admin/profile")?"profile":"dashboard"},clientStats(){const e=this.users.filter((e=>"client"===e.type&&"inactive"!==e.status));return{total:e.length,active:e.filter((e=>"active"===this.getDisplayStatus(e))).length,pending:e.filter((e=>"pending_residency_verification"===this.getDisplayStatus(e))).length,rejected:e.filter((e=>"residency_rejected"===this.getDisplayStatus(e))).length}},adminStats(){const e=this.users.filter((e=>"admin"===e.type&&"inactive"!==e.status));return{total:e.length,active:e.filter((e=>"active"===e.status)).length,suspended:e.filter((e=>"suspended"===e.status)).length}},filteredUsers(){let e=[...this.users];if("clients"===this.activeTab?e=e.filter((e=>"client"===e.type&&"inactive"!==e.status)):"admins"===this.activeTab&&(e=e.filter((e=>"admin"===e.type&&"inactive"!==e.status))),this.searchQuery){const s=this.searchQuery.toLowerCase();e=e.filter((e=>{const a=this.getDisplayStatus(e),t=this.formatStatus(a);return e.full_name?.toLowerCase().includes(s)||e.email?.toLowerCase().includes(s)||e.username?.toLowerCase().includes(s)||e.type?.toLowerCase().includes(s)||e.status?.toLowerCase().includes(s)||a?.toLowerCase().includes(s)||t?.toLowerCase().includes(s)||e.first_name?.toLowerCase().includes(s)||e.last_name?.toLowerCase().includes(s)}))}return this.filterStatus&&(e=e.filter((e=>{const s=this.getDisplayStatus(e);return s===this.filterStatus}))),e},paginatedUsers(){const e=(this.currentPage-1)*this.itemsPerPage,s=e+this.itemsPerPage;return this.filteredUsers.slice(e,s)},totalPages(){return Math.ceil(this.filteredUsers.length/this.itemsPerPage)},visiblePages(){const e=[],s=Math.max(1,this.currentPage-2),a=Math.min(this.totalPages,this.currentPage+2);for(let t=s;t<=a;t++)e.push(t);return e},isCreatingAdminUser(){return"admins"===this.activeTab}},watch:{searchQuery(){this.currentPage=1},filterStatus(){this.currentPage=1}},async mounted(){if(!yt["default"].isLoggedIn()||"admin"!==yt["default"].getUserType())return void this.$router.push("/login");this.initializeUI(),this.$bootstrap={Modal:Lt.aF};const e=localStorage.getItem("auth_token")||sessionStorage.getItem("auth_token"),s=localStorage.getItem("auth_user")||sessionStorage.getItem("auth_user");if(console.log("🔍 Admin Authentication Debug:"),console.log("  Auth Token:",e?"EXISTS":"NOT FOUND"),console.log("  User Data:",s?"EXISTS":"NOT FOUND"),s)try{const e=JSON.parse(s);console.log("  Username:",e.username),console.log("  User Type:",e.type),console.log("  Role:",e.role),console.log("  Status:",e.status)}catch(t){console.error("  Error parsing user data:",t)}if(!e||!s)return this.showToast("error","You are not logged in. Please login first."),void this.$router.push("/login");try{const e=JSON.parse(s);if("admin"!==e.type)return this.showToast("error","Access denied. Admin privileges required."),void this.$router.push("/login")}catch(t){return console.error("Error parsing user data:",t),this.showToast("error","Invalid authentication data. Please login again."),void this.$router.push("/login")}await this.loadAdminProfile(),await this.loadUserStats(),await this.loadUsers();const a=document.getElementById("directImageModal");a&&a.addEventListener("hidden.bs.modal",(()=>{const e=document.getElementById("imageModalContent");if(e){const s=e.querySelectorAll('img[src^="blob:"]');s.forEach((e=>{URL.revokeObjectURL(e.src)})),e.innerHTML=""}}))},beforeUnmount(){this.handleResize&&window.removeEventListener("resize",this.handleResize);const e=document.getElementById("imageModalContent");if(e){const s=e.querySelectorAll('img[src^="blob:"]');s.forEach((e=>{URL.revokeObjectURL(e.src)}))}},methods:{initializeUI(){if(this.isMobile=window.innerWidth<=768,this.isMobile)this.sidebarCollapsed=!0;else{const e=localStorage.getItem("adminSidebarCollapsed");this.sidebarCollapsed=!!e&&JSON.parse(e)}this.handleResize=()=>{const e=this.isMobile;if(this.isMobile=window.innerWidth<=768,this.isMobile&&!e)this.sidebarCollapsed=!0;else if(!this.isMobile&&e){const e=localStorage.getItem("adminSidebarCollapsed");this.sidebarCollapsed=!!e&&JSON.parse(e)}},window.addEventListener("resize",this.handleResize)},handleSidebarToggle(){this.sidebarCollapsed=!this.sidebarCollapsed,localStorage.setItem("adminSidebarCollapsed",JSON.stringify(this.sidebarCollapsed))},handleMenuChange(e){const s={dashboard:"/admin/dashboard",users:"/admin/users",requests:"/admin/requests",reports:"/admin/reports",settings:"/admin/settings",activity:"/admin/activity-logs",profile:"/admin/profile"};this.isMobile&&(this.sidebarCollapsed=!0),s[e]&&this.$router.push(s[e])},handleUserDropdownToggle(){this.showUserDropdown=!this.showUserDropdown},handleMenuAction(e){"profile"===e?this.$router.push("/admin/profile"):"settings"===e&&this.$router.push("/admin/settings"),this.showUserDropdown=!1},closeMobileSidebar(){this.isMobile&&(this.sidebarCollapsed=!0)},handleLogout(){yt["default"].logout(),this.$router.push("/login")},handlePhoneInput(e,s){const a=e.target.value,t=a.replace(/\D/g,""),r=t.substring(0,11);"add"===s?this.addUserForm.phone_number=r:"edit"===s&&(this.editUserForm.phone_number=r)},async loadAdminProfile(){try{const e=yt["default"].getCurrentUser();e&&e.profile?this.adminData=e.profile:this.adminData={first_name:e?.username||"Admin",role:e?.role||"admin"}}catch(e){console.error("Failed to load admin data:",e);const s=yt["default"].getCurrentUser();this.adminData={first_name:s?.username||"Admin",role:s?.role||"admin"}}},async loadUserStats(){try{const e=await kt.A.getUserStats();e.success?this.userStats=e.data:this.calculateStats()}catch(e){console.error("Failed to load user statistics:",e),this.calculateStats()}},async loadUsers(){this.loading=!0;try{const e={page:this.currentPage,limit:50,search:this.searchQuery||void 0,is_active:"active"===this.filterStatus||"inactive"!==this.filterStatus&&void 0},s=await kt.A.getUsers(e);if(!s.success)throw new Error(s.message||"Failed to load users");this.users=s.data.users.map((e=>kt.A.formatUserData(e))),this.calculateStats()}catch(e){console.error("Failed to load users:",e),this.showToast("error",e.message||"Failed to load users"),this.users=[],this.calculateStats()}finally{this.loading=!1}},calculateStats(){this.userStats={total:this.users.length,active:this.users.filter((e=>"active"===this.getDisplayStatus(e))).length,pending:this.users.filter((e=>"pending_residency_verification"===this.getDisplayStatus(e))).length,admins:this.users.filter((e=>"admin"===e.type)).length}},changePage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},getInitials(e){return e?e.split(" ").map((e=>e.charAt(0))).join("").toUpperCase().slice(0,2):"?"},getStatusBadgeClass(e){const s={active:"bg-success",inactive:"bg-secondary",pending:"bg-warning",suspended:"bg-danger",pending_verification:"bg-warning",pending_residency_verification:"bg-info",residency_rejected:"bg-danger",residency_approved:"bg-success",no_residency_documents:"bg-warning"};return s[e]||"bg-secondary"},formatStatus(e){const s={active:"Active",inactive:"Inactive",pending:"Pending",suspended:"Suspended",pending_verification:"Pending Verification",pending_residency_verification:"Pending Residency Verification",residency_rejected:"Residency Rejected",residency_approved:"Residency Approved",no_residency_documents:"No Residency Documents"};return s[e]||e.charAt(0).toUpperCase()+e.slice(1)},formatDate(e){if(!e)return"";const s=new Date(e);return s.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},async toggleUserStatus(e){try{const s="active"===e.status?"suspended":"active",a=`Status changed by admin: ${this.adminData?.first_name||"Admin"}`,t=await kt.A.updateUserStatus(e.id,s,a);if(!t.success)throw new Error(t.message||"Failed to update user status");{e.status=s,this.calculateStats();const a="active"===s?"activated":"suspended";this.showToast("success",`User ${e.full_name} has been ${a}.`)}}catch(s){console.error("Failed to update user status:",s);const e=s.response?.data?.message||s.message||"Failed to update user status. Please try again.";this.showToast("error",e)}},async deleteUser(e){const s=`Are you sure you want to delete user "${e.full_name}"?\n\nThis will:\n- Deactivate the user account\n- Prevent future logins\n- Preserve data for audit purposes\n\nThis action can be reversed by reactivating the user.`;if(confirm(s))try{const s=`User deleted by admin: ${this.adminData?.first_name||"Admin"}`,a=await kt.A.deleteUser(e.id,s);if(!a.success)throw new Error(a.message||"Failed to delete user");this.showToast("success",`User ${e.full_name} has been deleted successfully.`),await this.loadUsers(),await this.loadUserStats()}catch(a){console.error("Failed to delete user:",a);const e=a.response?.data?.message||a.message||"Failed to delete user. Please try again.";this.showToast("error",e)}},showToast(e,s){this.$toast?.[e]?this.$toast[e](s):(console.log(`${e.toUpperCase()}: ${s}`),"error"===e?alert(`Error: ${s}`):"success"===e&&alert(`Success: ${s}`))},closeModal(e){try{const s=Lt.aF.getInstance(document.getElementById(e));s&&s.hide()}catch(s){console.error("Error closing modal:",s)}},handleFormError(e,s){if(console.error("Form error:",e),e.response?.data?.details){const a={};e.response.data.details.forEach((e=>{e.path&&(a[e.path]=e.msg)})),this[s]={...this[s],...a}}const a=e.response?.data?.message||e.message||"Operation failed";this.showToast("error",a)},showAddUserModal(){this.resetAddUserForm();try{const e=document.getElementById("addUserModal");if(e){const s=new Lt.aF(e);s.show()}}catch(e){console.error("Error showing add user modal:",e),this.$toast?.error?.("Failed to open add user modal")}},resetAddUserForm(){const e="admins"===this.activeTab?"admin":"";Object.assign(this.addUserForm,{username:"",email:"",password:"",confirmPassword:"",first_name:"",middle_name:"",last_name:"",suffix:"",role:e,phone_number:"",birth_date:"",gender:"",civil_status_id:1,nationality:"Filipino",house_number:"",street:"",subdivision:"",barangay:"",city_municipality:"",province:"",postal_code:"",years_of_residency:null,months_of_residency:null}),Object.keys(this.formErrors).forEach((e=>delete this.formErrors[e]))},clearRoleSpecificFields(){const e=this.addUserForm;"admin"===e.role?Object.assign(e,{birth_date:"",gender:"",civil_status_id:1,nationality:"Filipino",house_number:"",street:"",subdivision:"",barangay:"",city_municipality:"",province:"",postal_code:"",years_of_residency:null,months_of_residency:null}):e.role},validateAddUserForm(){const e={},s=this.addUserForm;return(!s.username?.length||s.username.length<3)&&(e.username="Username must be at least 3 characters long"),(!s.password?.length||s.password.length<6)&&(e.password="Password must be at least 6 characters long"),s.confirmPassword?.length||(e.confirmPassword="Please confirm your password"),s.password&&s.confirmPassword&&s.password!==s.confirmPassword&&(e.confirmPassword="Passwords do not match"),(!s.first_name?.trim()||s.first_name.trim().length<2)&&(e.first_name="First name must be at least 2 characters long"),(!s.last_name?.trim()||s.last_name.trim().length<2)&&(e.last_name="Last name must be at least 2 characters long"),s.role||(e.role="Please select a user type"),(!s.phone_number?.trim()||s.phone_number.trim().length<10)&&(e.phone_number="Please provide a valid phone number"),s.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)&&(e.email="Please provide a valid email address"),"client"===s.role&&(s.birth_date||(e.birth_date="Birth date is required for clients"),s.gender||(e.gender="Gender is required for clients"),s.barangay?.trim()||(e.barangay="Barangay is required for clients"),s.city_municipality?.trim()||(e.city_municipality="City/Municipality is required for clients"),s.province?.trim()||(e.province="Province is required for clients")),this.formErrors=e,0===Object.keys(e).length},validateEditUserForm(){const e={},s=this.editUserForm;return(!s.username?.length||s.username.length<3)&&(e.username="Username must be at least 3 characters long"),(!s.first_name?.trim()||s.first_name.trim().length<2)&&(e.first_name="First name must be at least 2 characters long"),(!s.last_name?.trim()||s.last_name.trim().length<2)&&(e.last_name="Last name must be at least 2 characters long"),(!s.phone_number?.trim()||s.phone_number.trim().length<10)&&(e.phone_number="Please provide a valid phone number"),s.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)&&(e.email="Please provide a valid email address"),s.resetPassword&&((!s.newPassword?.length||s.newPassword.length<6)&&(e.newPassword="New password must be at least 6 characters long"),s.newPassword!==s.confirmPassword&&(e.confirmPassword="Passwords do not match")),this.editFormErrors=e,0===Object.keys(e).length},getFullAddress(e){const s=[];return e.house_number&&s.push(e.house_number),e.street&&s.push(e.street),e.subdivision&&s.push(e.subdivision),e.barangay&&s.push(e.barangay),e.city_municipality&&s.push(e.city_municipality),e.province&&s.push(e.province),s.join(", ")||"No address provided"},async submitAddUser(){if(this.validateAddUserForm()){this.addUserLoading=!0;try{const e={...this.addUserForm};["years_of_residency","months_of_residency","civil_status_id"].forEach((s=>{e[s]&&(e[s]=parseInt(e[s]))})),(this.isCreatingAdminUser||"admin"===e.role)&&(e.status="active");const s=await kt.A.createUser(e);if(!s.success)throw new Error(s.message||"Failed to create user");this.showToast("success","User created successfully"),this.closeModal("addUserModal"),this.resetAddUserForm(),await Promise.all([this.loadUsers(),this.loadUserStats()])}catch(e){this.handleFormError(e,"formErrors")}finally{this.addUserLoading=!1}}else this.showToast("error","Please fix the validation errors before submitting.")},editUser(e){this.editUserForm={id:e.id,username:e.username,email:e.email||"",first_name:e.first_name||"",middle_name:e.middle_name||"",last_name:e.last_name||"",suffix:e.suffix||"",role:e.type,status:e.status,phone_number:e.phone_number||"",birth_date:e.birth_date?e.birth_date.split("T")[0]:"",gender:e.gender||"",civil_status_id:e.civil_status_id||1,nationality:e.nationality||"Filipino",house_number:e.house_number||"",street:e.street||"",subdivision:e.subdivision||"",barangay:e.barangay||"",city_municipality:e.city_municipality||"",province:e.province||"",postal_code:e.postal_code||"",years_of_residency:e.years_of_residency||null,months_of_residency:e.months_of_residency||null,resetPassword:!1,newPassword:"",confirmPassword:""},this.editFormErrors={};try{const e=new Lt.aF(document.getElementById("editUserModal"));e.show()}catch(s){this.showToast("error","Failed to open edit user modal")}},async submitEditUser(){if(this.validateEditUserForm()){this.editUserLoading=!0;try{const e=this.editUserForm,s={username:e.username,email:e.email,first_name:e.first_name,middle_name:e.middle_name,last_name:e.last_name,suffix:e.suffix,status:e.status,phone_number:e.phone_number};"admin"===e.role&&Object.assign(s,{position:e.position,department:e.department,employee_id:e.employee_id,hire_date:e.hire_date}),e.resetPassword&&e.newPassword&&(s.password=e.newPassword);const a=await kt.A.updateUser(e.id,s);if(!a.success)throw new Error(a.message||"Failed to update user");this.showToast("success","User updated successfully"),this.closeModal("editUserModal"),await Promise.all([this.loadUsers(),this.loadUserStats()])}catch(e){this.handleFormError(e,"editFormErrors")}finally{this.editUserLoading=!1}}else this.showToast("error","Please fix the validation errors before submitting.")},async viewUser(e){try{const s=await kt.A.getUser(e.id);if(!s.success)throw new Error(s.message||"Failed to load user details");{this.viewUserData=kt.A.formatUserData(s.data);const e=new Lt.aF(document.getElementById("viewUserModal"));e.show()}}catch(s){const e=s.response?.data?.message||s.message||"Failed to load user details";this.showToast("error",e)}},setActiveTab(e){this.activeTab=e,this.filterStatus="",this.searchQuery="",this.currentPage=1,console.log(`🔄 Switched to ${e} tab`)},async handleOpenUserModal(e){console.log("🔔 AdminUsers: Opening user modal from notification:",e);try{const{userId:s,userType:a}=e;if(!s)return void console.error("❌ No user ID provided for modal");console.log(`🔍 Looking for ${a||"unknown"} user with ID: ${s}`),"client"===a?this.setActiveTab("clients"):"admin"===a&&this.setActiveTab("admins");let t=this.users.find((e=>e.id===s||e.original_id===s));if(!t){console.log("🔍 User not found in current list, loading directly...");const e=await kt.A.getUser(s);if(!e.success)throw new Error("User not found");t=kt.A.formatUserData(e.data)}await this.viewUser(t),console.log("✅ User modal opened successfully")}catch(s){console.error("❌ Failed to open user modal:",s),this.showToast("error","Failed to open user details")}},needsResidencyVerification(e){return["pending_residency_verification","residency_rejected"].includes(e.status)},hasResidencyDocuments(e){return"client"===e.type&&e.residency_document_count>0},hasResidencyDocumentsNeedingReview(e){return"client"===e.type&&(e.residency_document_count>0&&"approved"!==e.residency_verification_status)},getDisplayStatus(e){if("client"!==e.type)return e.status;if(e.residency_verification_status)switch(e.residency_verification_status){case"pending":return"pending_residency_verification";case"approved":return"active";case"rejected":return"residency_rejected";default:return e.status}return 0!==e.residency_document_count&&void 0!==e.residency_document_count||!["pending_residency_verification","residency_rejected"].includes(e.status)?(["pending_residency_verification","residency_rejected"].includes(e.status),e.status):"no_residency_documents"},canApproveResidency(e){if("client"!==e.type)return!1;const s=this.getDisplayStatus(e);return"pending_residency_verification"===s&&e.residency_document_count>0},canRejectResidency(e){if("client"!==e.type)return!1;const s=this.getDisplayStatus(e);return"pending_residency_verification"===s&&e.residency_document_count>0},viewResidencyDocuments(e){this.selectedUserForResidency=e,this.rejectionReason="";const s=new Lt.aF(document.getElementById("residencyDocumentsModal"));s.show()},async openImageModal(e){if(!e)return;console.log("Opening image modal for user:",e);const s=new Lt.aF(document.getElementById("directImageModal")),a=document.getElementById("imageModalContent");a.innerHTML='\n        <div class="text-center py-5">\n          <div class="spinner-border text-primary" role="status">\n            <span class="visually-hidden">Loading...</span>\n          </div>\n          <p class="mt-3 text-muted">Loading images...</p>\n        </div>\n      ',s.show();try{const s=e.original_id||e.id,r="string"===typeof s&&s.includes("_")?s.split("_")[1]:s;console.log("Fetching documents for account ID:",r);const i=await pt.getAccountDocuments(r);if(i.success&&i.data&&i.data.length>0){console.log("Documents found:",i.data.length);const e=i.data.filter((e=>{const s=["image/jpeg","image/jpg","image/png","image/gif","image/webp"];return s.includes(e.mime_type?.toLowerCase())}));if(console.log("Image documents found:",e.length),e.length>0){let s='<div class="row g-3">',r=0;for(const a of e)try{console.log("Loading image:",a.document_name);const e=await ut["default"].get(`/residency/documents/${a.id}/file`,{responseType:"blob"}),t=new Blob([e.data],{type:a.mime_type}),i=URL.createObjectURL(t);s+=`\n                  <div class="col-md-6 col-lg-4">\n                    <div class="card shadow-sm">\n                      <img src="${i}" alt="${a.document_name||"Residency Document"}"\n                           class="card-img-top" style="height: 200px; object-fit: contain; background: #f8f9fa;">\n                      <div class="card-body p-2">\n                        <small class="text-muted">${a.document_name||"Unknown Document"}</small>\n                        <br>\n                        <small class="text-muted">${a.document_type||"Document"}</small>\n                      </div>\n                    </div>\n                  </div>\n                `,r++,console.log("✅ Successfully loaded:",a.document_name)}catch(t){console.error("❌ Failed to load image:",a.document_name,t),s+=`\n                  <div class="col-md-6 col-lg-4">\n                    <div class="card shadow-sm">\n                      <div class="card-body text-center p-4">\n                        <i class="fas fa-exclamation-triangle fa-2x text-danger mb-2"></i>\n                        <p class="text-muted small mb-0">Failed to load</p>\n                        <p class="text-muted small mb-0">${a.document_name||"Unknown"}</p>\n                      </div>\n                    </div>\n                  </div>\n                `}s+="</div>",r>0?(a.innerHTML=s,console.log("Successfully displayed",r,"images")):a.innerHTML='\n                <div class="text-center py-5">\n                  <i class="fas fa-exclamation-triangle fa-3x text-danger mb-3"></i>\n                  <h5>Failed to Load Images</h5>\n                  <p class="text-muted">All images failed to load. Please try again.</p>\n                </div>\n              '}else a.innerHTML='\n              <div class="text-center py-5">\n                <i class="fas fa-file fa-3x text-muted mb-3"></i>\n                <h5>No Image Documents</h5>\n                <p class="text-muted">This user has uploaded documents, but none are image files.</p>\n              </div>\n            '}else a.innerHTML='\n            <div class="text-center py-5">\n              <i class="fas fa-folder-open fa-3x text-muted mb-3"></i>\n              <h5>No Documents Found</h5>\n              <p class="text-muted">This user has not uploaded any residency documents yet.</p>\n            </div>\n          '}catch(t){console.error("Error loading images:",t),a.innerHTML=`\n          <div class="text-center py-5">\n            <i class="fas fa-exclamation-triangle fa-3x text-danger mb-3"></i>\n            <h5>Error Loading Images</h5>\n            <p class="text-muted">${t.message||"An unexpected error occurred"}</p>\n            <button class="btn btn-outline-primary btn-sm mt-2" onclick="location.reload()">\n              <i class="fas fa-refresh me-1"></i>\n              Refresh Page\n            </button>\n          </div>\n        `}},async approveResidencyVerification(){if(this.selectedUserForResidency){this.processingResidencyAction=!0;try{const e=this.selectedUserForResidency.original_id||this.selectedUserForResidency.id,s="string"===typeof e&&e.includes("_")?parseInt(e.split("_")[1]):parseInt(e);console.log("Approving residency for account ID:",s);const a=await pt.approveVerification(s);if(!a.success)throw new Error(a.message||"Failed to approve verification");{this.showToast("success","Residency verification approved successfully");const e=Lt.aF.getInstance(document.getElementById("residencyDocumentsModal"));e&&e.hide(),await this.loadUsers()}}catch(e){console.error("Failed to approve residency verification:",e),this.showToast("error",e.message||"Failed to approve verification")}finally{this.processingResidencyAction=!1}}},showRejectResidencyModal(){const e=Lt.aF.getInstance(document.getElementById("residencyDocumentsModal"));e.hide(),setTimeout((()=>{const e=new Lt.aF(document.getElementById("rejectResidencyModal"));e.show()}),300)},async rejectResidencyVerification(){if(this.selectedUserForResidency&&this.rejectionReason&&!(this.rejectionReason.length<10)){this.processingResidencyAction=!0;try{const e=this.selectedUserForResidency.original_id||this.selectedUserForResidency.id,s="string"===typeof e&&e.includes("_")?parseInt(e.split("_")[1]):parseInt(e);console.log("Rejecting residency for account ID:",s);const a=await pt.rejectVerification(s,this.rejectionReason);if(!a.success)throw new Error(a.message||"Failed to reject verification");{this.showToast("success","Residency verification rejected");const e=Lt.aF.getInstance(document.getElementById("rejectResidencyModal"));e.hide(),await this.loadUsers()}}catch(e){console.error("Failed to reject residency verification:",e),this.showToast("error",e.message||"Failed to reject verification")}finally{this.processingResidencyAction=!1}}},async quickApproveClient(e){if(!e||!this.canApproveResidency(e))return;const s=confirm(`Are you sure you want to approve residency verification for ${e.full_name}? This will activate their account and allow them to request documents.`);if(s){this.processingQuickAction=!0;try{const s=e.original_id||e.id,a=await pt.approveVerification(s);if(!a.success)throw new Error(a.message||"Failed to approve residency verification");this.showToast("success",`Residency verification approved for ${e.full_name}`),await this.loadUsers()}catch(a){console.error("Failed to approve residency verification:",a),this.showToast("error",a.message||"Failed to approve residency verification")}finally{this.processingQuickAction=!1}}},async quickRejectClient(e){if(!e||!this.canRejectResidency(e))return;const s=prompt(`Please provide a reason for rejecting residency verification for ${e.full_name}:`,"Documents do not meet verification requirements");if(!s||s.trim().length<10)this.showToast("warning","Please provide a detailed reason (minimum 10 characters)");else{this.processingQuickAction=!0;try{const a=e.original_id||e.id,t=await pt.rejectVerification(a,s.trim());if(!t.success)throw new Error(t.message||"Failed to reject residency verification");this.showToast("success",`Residency verification rejected for ${e.full_name}`),await this.loadUsers()}catch(a){console.error("Failed to reject residency verification:",a),this.showToast("error",a.message||"Failed to reject residency verification")}finally{this.processingQuickAction=!1}}},formatDocumentType(e){return pt.formatDocumentType(e)},formatDocumentStatus(e){return pt.formatVerificationStatus(e)},getDocumentStatusBadgeClass(e){return pt.getStatusBadgeClass(e)},formatFileSize(e){if(!e)return"Unknown";const s=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,a)*100)/100+" "+s[a]}}};const _t=(0,bt.A)(wt,[["render",Ca],["__scopeId","data-v-c6cd0970"]]);var Ut=_t},7145:function(e,s,a){a.d(s,{A:function(){return S}});var t=a(6768),r=a(5130),i=a(4232);const o={class:"viewer-header"},n={class:"document-info"},l={class:"document-title"},d={class:"document-meta"},c={class:"filename"},m={class:"file-size"},u={class:"upload-date"},f={class:"viewer-controls"},p=["disabled"],h={key:1,class:"zoom-level me-2"},b=["disabled"],g={class:"viewer-content",ref:"viewerContent"},v={key:0,class:"loading-state"},y={key:1,class:"error-state"},k={class:"text-muted"},L={key:2,class:"image-viewer"},w=["src","alt"],_={key:3,class:"pdf-viewer"},U=["src"],C={key:4,class:"unsupported-file"};function E(e,s,a,E,F,D){return(0,t.uX)(),(0,t.CE)("div",{class:"document-viewer-overlay",onClick:s[11]||(s[11]=(...e)=>D.handleOverlayClick&&D.handleOverlayClick(...e))},[(0,t.Lk)("div",{class:"document-viewer-container",onClick:s[10]||(s[10]=(0,r.D$)((()=>{}),["stop"]))},[(0,t.Lk)("div",o,[(0,t.Lk)("div",n,[(0,t.Lk)("h4",l,[(0,t.Lk)("i",{class:(0,i.C4)([D.getDocumentIcon(a.document.document_type),"me-2"])},null,2),(0,t.eW)(" "+(0,i.v_)(D.formatDocumentType(a.document.document_type)),1)]),(0,t.Lk)("div",d,[(0,t.Lk)("span",c,(0,i.v_)(a.document.document_name),1),(0,t.Lk)("span",m,(0,i.v_)(D.formatFileSize(a.document.file_size)),1),(0,t.Lk)("span",u,"Uploaded: "+(0,i.v_)(D.formatDate(a.document.created_at)),1)])]),(0,t.Lk)("div",f,[F.canZoom?((0,t.uX)(),(0,t.CE)("button",{key:0,class:"btn btn-outline-secondary btn-sm me-2",onClick:s[0]||(s[0]=(...e)=>D.zoomOut&&D.zoomOut(...e)),disabled:F.zoomLevel<=.5},s[12]||(s[12]=[(0,t.Lk)("i",{class:"fas fa-search-minus"},null,-1)]),8,p)):(0,t.Q3)("",!0),F.canZoom?((0,t.uX)(),(0,t.CE)("span",h,(0,i.v_)(Math.round(100*F.zoomLevel))+"%",1)):(0,t.Q3)("",!0),F.canZoom?((0,t.uX)(),(0,t.CE)("button",{key:2,class:"btn btn-outline-secondary btn-sm me-2",onClick:s[1]||(s[1]=(...e)=>D.zoomIn&&D.zoomIn(...e)),disabled:F.zoomLevel>=3},s[13]||(s[13]=[(0,t.Lk)("i",{class:"fas fa-search-plus"},null,-1)]),8,b)):(0,t.Q3)("",!0),(0,t.Lk)("button",{class:"btn btn-outline-primary btn-sm me-2",onClick:s[2]||(s[2]=(...e)=>D.downloadDocument&&D.downloadDocument(...e))},s[14]||(s[14]=[(0,t.Lk)("i",{class:"fas fa-download me-1"},null,-1),(0,t.eW)(" Download ")])),(0,t.Lk)("button",{class:"btn btn-outline-secondary btn-sm",onClick:s[3]||(s[3]=s=>e.$emit("close"))},s[15]||(s[15]=[(0,t.Lk)("i",{class:"fas fa-times me-1"},null,-1),(0,t.eW)(" Close ")]))])]),(0,t.Lk)("div",g,[F.loading?((0,t.uX)(),(0,t.CE)("div",v,s[16]||(s[16]=[(0,t.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,t.Lk)("span",{class:"sr-only"},"Loading...")],-1),(0,t.Lk)("p",{class:"mt-2"},"Loading document...",-1)]))):F.error?((0,t.uX)(),(0,t.CE)("div",y,[s[18]||(s[18]=(0,t.Lk)("i",{class:"fas fa-exclamation-triangle fa-3x text-danger mb-3"},null,-1)),s[19]||(s[19]=(0,t.Lk)("h5",null,"Unable to Load Document",-1)),(0,t.Lk)("p",k,(0,i.v_)(F.error),1),(0,t.Lk)("button",{class:"btn btn-primary",onClick:s[4]||(s[4]=(...e)=>D.loadDocument&&D.loadDocument(...e))},s[17]||(s[17]=[(0,t.Lk)("i",{class:"fas fa-redo me-1"},null,-1),(0,t.eW)(" Try Again ")]))])):D.isImage?((0,t.uX)(),(0,t.CE)("div",L,[(0,t.Lk)("img",{src:F.documentUrl,alt:a.document.document_name,style:(0,i.Tr)({transform:`scale(${F.zoomLevel})`}),class:"document-image",onLoad:s[5]||(s[5]=(...e)=>D.onImageLoad&&D.onImageLoad(...e)),onError:s[6]||(s[6]=(...e)=>D.onImageError&&D.onImageError(...e))},null,44,w)])):D.isPDF?((0,t.uX)(),(0,t.CE)("div",_,[(0,t.Lk)("iframe",{src:F.documentUrl,class:"pdf-frame",onLoad:s[7]||(s[7]=(...e)=>D.onPDFLoad&&D.onPDFLoad(...e)),onError:s[8]||(s[8]=(...e)=>D.onPDFError&&D.onPDFError(...e))},null,40,U)])):((0,t.uX)(),(0,t.CE)("div",C,[s[21]||(s[21]=(0,t.Lk)("i",{class:"fas fa-file fa-3x text-muted mb-3"},null,-1)),s[22]||(s[22]=(0,t.Lk)("h5",null,"Preview Not Available",-1)),s[23]||(s[23]=(0,t.Lk)("p",{class:"text-muted"},[(0,t.eW)(" This file type cannot be previewed in the browser. "),(0,t.Lk)("br"),(0,t.eW)(" Please download the file to view its contents. ")],-1)),(0,t.Lk)("button",{class:"btn btn-primary",onClick:s[9]||(s[9]=(...e)=>D.downloadDocument&&D.downloadDocument(...e))},s[20]||(s[20]=[(0,t.Lk)("i",{class:"fas fa-download me-1"},null,-1),(0,t.eW)(" Download File ")]))]))],512)])])}var F=a(4300),D={name:"DocumentViewer",props:{document:{type:Object,required:!0}},data(){return{loading:!0,error:null,documentUrl:null,zoomLevel:1,canZoom:!1}},computed:{isImage(){const e=["image/jpeg","image/jpg","image/png","image/gif","image/webp"];return e.includes(this.document.mime_type?.toLowerCase())},isPDF(){return"application/pdf"===this.document.mime_type?.toLowerCase()}},async mounted(){await this.loadDocument()},methods:{async loadDocument(){this.loading=!0,this.error=null;try{const e=await F["default"].get(`/residency/documents/${this.document.id}/file`,{responseType:"blob"}),s=new Blob([e.data],{type:this.document.mime_type});this.documentUrl=URL.createObjectURL(s),this.canZoom=this.isImage}catch(e){console.error("Error loading document:",e),this.error=e.response?.data?.message||"Failed to load document"}finally{this.loading=!1}},async downloadDocument(){try{const e=await F["default"].get(`/residency/documents/${this.document.id}/file`,{responseType:"blob"}),s=new Blob([e.data],{type:this.document.mime_type}),a=URL.createObjectURL(s),t=document.createElement("a");t.href=a,t.download=this.document.document_name,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(a)}catch(e){console.error("Error downloading document:",e),alert("Failed to download document")}},handleOverlayClick(){this.$emit("close")},zoomIn(){this.zoomLevel<3&&(this.zoomLevel+=.25)},zoomOut(){this.zoomLevel>.5&&(this.zoomLevel-=.25)},onImageLoad(){this.loading=!1},onImageError(){this.error="Failed to load image",this.loading=!1},onPDFLoad(){this.loading=!1},onPDFError(){this.error="Failed to load PDF",this.loading=!1},formatDocumentType(e){const s={utility_bill:"Utility Bill",barangay_certificate:"Barangay Certificate",valid_id:"Valid ID",lease_contract:"Lease Contract",other:"Other Document"};return s[e]||e},getDocumentIcon(e){const s={utility_bill:"fas fa-file-invoice text-warning",barangay_certificate:"fas fa-certificate text-success",valid_id:"fas fa-id-card text-info",lease_contract:"fas fa-file-contract text-primary",other:"fas fa-file text-secondary"};return s[e]||"fas fa-file text-secondary"},formatFileSize(e){if(!e)return"Unknown size";const s=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,a)*100)/100+" "+s[a]},formatDate(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}},beforeUnmount(){this.documentUrl&&URL.revokeObjectURL(this.documentUrl)}},x=a(1241);const R=(0,x.A)(D,[["render",E],["__scopeId","data-v-03960ff5"]]);var S=R}}]);