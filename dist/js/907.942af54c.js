"use strict";(self["webpackChunkbosfdr"]=self["webpackChunkbosfdr"]||[]).push([[907],{662:function(e,s,a){a.d(s,{TL:function(){return t},m_:function(){return n},y$:function(){return r}});a(8111),a(7588);const r={required:(e,s="Field")=>!e||"string"===typeof e&&""===e.trim()?`${s} is required`:null,email:e=>{if(!e)return null;const s=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return s.test(e)?null:"Please enter a valid email address"},username:e=>e?e.length<3||e.length>50?"Username must be between 3 and 50 characters":/^[a-zA-Z0-9_]+$/.test(e)?null:"Username can only contain letters, numbers, and underscores":null,password:e=>e?e.length<8?"Password must be at least 8 characters long":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(e)?null:"Password must contain at least one uppercase letter, one lowercase letter, and one number":null,confirmPassword:(e,s)=>e&&e!==s?"Passwords do not match":null,phoneNumber:e=>{if(!e)return null;const s=e.replace(/\s/g,""),a=/^09\d{9}$/;return a.test(s)?null:"Please enter a valid Philippine phone number (09XXXXXXXXX - 11 digits starting with 09)"},name:(e,s="Name")=>e?e.length<1||e.length>100?`${s} must be between 1 and 100 characters`:/^[a-zA-Z\s\-.]+$/.test(e)?null:`${s} can only contain letters, spaces, hyphens, and periods`:null,date:(e,s="Date")=>{if(!e)return null;const a=new Date(e);return isNaN(a.getTime())?`Please enter a valid ${s.toLowerCase()}`:null},birthDate:e=>{if(!e)return null;const s=new Date(e),a=new Date;if(isNaN(s.getTime()))return"Please enter a valid birth date";if(s>=a)return"Birth date must be in the past";const r=a.getFullYear()-s.getFullYear();return r>150?"Please enter a valid birth date":r<13?"You must be at least 13 years old to register":null},otp:e=>e?/^\d{4,10}$/.test(e)?null:"OTP must be a 4-10 digit number":null,address:(e,s="Address")=>e&&(e.length<1||e.length>100)?`${s} must be between 1 and 100 characters`:null,postalCode:e=>e?/^\d{4}$/.test(e)?null:"Postal code must be 4 digits":null,minLength:(e,s,a="Field")=>e&&e.length<s?`${a} must be at least ${s} characters`:null,maxLength:(e,s,a="Field")=>e&&e.length>s?`${a} must be less than ${s} characters`:null,exactLength:(e,s,a="Field")=>e&&e.length!==s?`${a} must be exactly ${s} characters`:null,passwordMatch:(e,s)=>e&&e!==s?"Passwords do not match":null,phone:e=>r.phoneNumber(e)},t=e=>{if(!Array.isArray(e))return{};const s={};return e.forEach((e=>{e.path&&(s[e.path]=e.msg||e.message)})),s},n=(e,s)=>{const a={...e};return delete a[s],a}},4230:function(e,s,a){e.exports=a.p+"img/icon-of-bula.fe10b6ab.jpg"},8907:function(e,s,a){a.r(s),a.d(s,{default:function(){return S}});var r=a(6768),t=a(5130),n=a(4232),l=a(4230);const o={class:"unified-login"},i={class:"container-fluid min-vh-100 d-flex align-items-center justify-content-center bg-light"},c={class:"row w-100 justify-content-center"},d={class:"col-12 col-md-6 col-lg-5 col-xl-4"},u={class:"card shadow-lg border-0"},g={class:"card-body p-4"},m={class:"mb-3"},h={class:"input-group"},p={key:0,class:"invalid-feedback d-block"},b={class:"mb-4"},f={class:"input-group"},v=["type"],w={key:0,class:"invalid-feedback d-block"},y={class:"d-grid gap-2 mb-3"},k=["disabled"],L={key:0,class:"spinner-border spinner-border-sm me-2"},F={key:0,class:"alert alert-danger mt-3",role:"alert"},P={key:1,class:"alert alert-success mt-3",role:"alert"},$={class:"card-footer text-center py-3 bg-light"},C={class:"mb-0 text-muted"},x={key:0,class:"card mt-3 border-warning"};function U(e,s,a,U,E,M){const X=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",o,[(0,r.Lk)("div",i,[(0,r.Lk)("div",c,[(0,r.Lk)("div",d,[(0,r.Lk)("div",u,[s[16]||(s[16]=(0,r.Fv)('<div class="card-header bg-primary text-white text-center py-4" data-v-bc46d6ca><img src="'+l+'" alt="Barangay Bula Council official seal" class="logo mb-2" data-v-bc46d6ca><h3 class="mb-0" data-v-bc46d6ca> Barangay Bula Document Hub </h3><p class="mb-0 mt-2" data-v-bc46d6ca><i class="fas fa-sign-in-alt me-2" data-v-bc46d6ca></i> Login </p></div>',1)),(0,r.Lk)("div",g,[(0,r.Lk)("form",{onSubmit:s[7]||(s[7]=(0,t.D$)(((...e)=>M.submitLogin&&M.submitLogin(...e)),["prevent"]))},[(0,r.Lk)("div",m,[s[9]||(s[9]=(0,r.Lk)("label",{for:"username",class:"form-label"},"Username",-1)),(0,r.Lk)("div",h,[s[8]||(s[8]=(0,r.Lk)("span",{class:"input-group-text"},[(0,r.Lk)("i",{class:"fas fa-user"})],-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:(0,n.C4)(["form-control",{"is-invalid":E.errors.username}]),id:"username","onUpdate:modelValue":s[0]||(s[0]=e=>E.loginForm.username=e),onBlur:s[1]||(s[1]=e=>M.validateField("username")),onInput:s[2]||(s[2]=e=>M.clearFieldError("username")),placeholder:"Enter your username",required:"",autocomplete:"username"},null,34),[[t.Jo,E.loginForm.username]])]),E.errors.username?((0,r.uX)(),(0,r.CE)("div",p,(0,n.v_)(E.errors.username),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",b,[s[11]||(s[11]=(0,r.Lk)("label",{for:"password",class:"form-label"},"Password",-1)),(0,r.Lk)("div",f,[s[10]||(s[10]=(0,r.Lk)("span",{class:"input-group-text"},[(0,r.Lk)("i",{class:"fas fa-lock"})],-1)),(0,r.bo)((0,r.Lk)("input",{type:E.showPassword?"text":"password",class:(0,n.C4)(["form-control",{"is-invalid":E.errors.password}]),id:"password","onUpdate:modelValue":s[3]||(s[3]=e=>E.loginForm.password=e),onBlur:s[4]||(s[4]=e=>M.validateField("password")),onInput:s[5]||(s[5]=e=>M.clearFieldError("password")),placeholder:"Enter your password",required:"",autocomplete:"current-password"},null,42,v),[[t.hp,E.loginForm.password]]),(0,r.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:s[6]||(s[6]=e=>E.showPassword=!E.showPassword),tabindex:"-1"},[(0,r.Lk)("i",{class:(0,n.C4)(E.showPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])]),E.errors.password?((0,r.uX)(),(0,r.CE)("div",w,(0,n.v_)(E.errors.password),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",y,[(0,r.Lk)("button",{type:"submit",class:"btn btn-primary btn-lg",disabled:E.loading},[E.loading?((0,r.uX)(),(0,r.CE)("span",L)):(0,r.Q3)("",!0),(0,r.eW)(" "+(0,n.v_)(E.loading?"Signing In...":"Sign In"),1)],8,k)])],32),E.errorMessage?((0,r.uX)(),(0,r.CE)("div",F,[s[12]||(s[12]=(0,r.Lk)("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),(0,r.eW)(" "+(0,n.v_)(E.errorMessage),1)])):(0,r.Q3)("",!0),E.successMessage?((0,r.uX)(),(0,r.CE)("div",P,[s[13]||(s[13]=(0,r.Lk)("i",{class:"fas fa-check-circle me-2"},null,-1)),(0,r.eW)(" "+(0,n.v_)(E.successMessage),1)])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",$,[(0,r.Lk)("p",C,[s[15]||(s[15]=(0,r.eW)(" Don't have an account? ")),(0,r.bF)(X,{to:"/client/register",class:"text-decoration-none"},{default:(0,r.k6)((()=>s[14]||(s[14]=[(0,r.eW)(" Register Here ")]))),_:1,__:[14]})])])]),E.showStatusInfo?((0,r.uX)(),(0,r.CE)("div",x,s[17]||(s[17]=[(0,r.Fv)('<div class="card-body" data-v-bc46d6ca><h6 class="card-title text-warning" data-v-bc46d6ca><i class="fas fa-info-circle me-2" data-v-bc46d6ca></i> Account Status Information </h6><div class="small text-muted" data-v-bc46d6ca><p class="mb-2" data-v-bc46d6ca><strong data-v-bc46d6ca>Pending Verification:</strong> Complete your email verification to activate your account. </p><p class="mb-2" data-v-bc46d6ca><strong data-v-bc46d6ca>Suspended:</strong> Your account has been temporarily suspended. Contact the administrator. </p><p class="mb-0" data-v-bc46d6ca><strong data-v-bc46d6ca>Inactive:</strong> Your account is inactive. Contact the administrator for assistance. </p></div></div>',1)]))):(0,r.Q3)("",!0)])])])])}a(4114);var E=a(9197),M=a(662),X={name:"UnifiedLogin",data(){return{loading:!1,showPassword:!1,showStatusInfo:!1,errorMessage:"",successMessage:"",loginForm:{username:"",password:"",rememberMe:!1},errors:{}}},mounted(){if(E["default"].isLoggedIn()){const s=E["default"].getCurrentUser(),a=E["default"].getRedirectUrl(s);console.log("User already logged in, redirecting to:",a);try{this.$router.push(a)}catch(e){console.error("Router push error in mounted:",e),window.location.href=a}}"true"===this.$route.query.registered&&(this.successMessage="Registration completed successfully! Please log in.")},methods:{validateField(e){let s=null;const a=this.loginForm[e];switch(e){case"username":s=M.y$.required(a,"Username");break;case"password":s=M.y$.required(a,"Password");break}return s?this.errors={...this.errors,[e]:s}:this.clearFieldError(e),!s},clearFieldError(e){this.errors=(0,M.m_)(this.errors,e)},clearMessages(){this.errorMessage="",this.successMessage="",this.showStatusInfo=!1},async submitLogin(){this.clearMessages();const e=["username","password"];let s=!0;if(e.forEach((e=>{this.validateField(e)||(s=!1)})),s){this.loading=!0;try{const e=await E["default"].login({username:this.loginForm.username,password:this.loginForm.password});e.success&&(this.successMessage="Login successful! Redirecting...",console.log("Login successful, user:",e.user),console.log("Redirect URL:",e.redirectUrl),setTimeout((()=>{console.log("Verifying auth state before redirect:"),console.log("- isLoggedIn:",E["default"].isLoggedIn()),console.log("- getCurrentUser:",E["default"].getCurrentUser()),console.log("- getUserType:",E["default"].getUserType()),setTimeout((()=>{console.log("Final redirect attempt to:",e.redirectUrl);try{this.$router.push(e.redirectUrl)}catch(s){console.error("Router push error:",s),window.location.href=e.redirectUrl}}),100)}),1e3))}catch(a){const e=E["default"].parseError(a);this.errorMessage=e.message,(e.message.includes("pending")||e.message.includes("suspended")||e.message.includes("inactive"))&&(this.showStatusInfo=!0)}finally{this.loading=!1}}else this.errorMessage="Please fill in all required fields"},showForgotPassword(){alert("Forgot password functionality will be implemented soon.")}}},I=a(1241);const _=(0,I.A)(X,[["render",U],["__scopeId","data-v-bc46d6ca"]]);var S=_}}]);