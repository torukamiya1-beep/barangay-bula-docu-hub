"use strict";(self["webpackChunkbosfdr"]=self["webpackChunkbosfdr"]||[]).push([[584,674],{2674:function(e,a,s){s.r(a);s(8111),s(3579),s(4979);var t=s(4300);class o{async registerAccount(e){try{const a=await t["default"].post("/admin/auth/register-account",e);return a.data}catch(a){throw this.handleError(a)}}async completeRegistration(e,a){try{const s=await t["default"].post(`/admin/auth/complete-registration/${e}`,a);return s.data}catch(s){throw this.handleError(s)}}async verifyEmail(e,a){try{const s=await t["default"].post("/admin/auth/verify-email",{email:e,otp:a});return s.data}catch(s){throw this.handleError(s)}}async resendVerificationEmail(e){try{const a=await t["default"].post("/admin/auth/resend-verification",{email:e});return a.data}catch(a){throw this.handleError(a)}}async login(e){try{const a=await t["default"].post("/admin/auth/login",e);return a.data.success&&a.data.data.token&&(localStorage.setItem("adminToken",a.data.data.token),localStorage.setItem("adminData",JSON.stringify(a.data.data.admin))),a.data}catch(a){throw this.handleError(a)}}async getProfile(){try{const e=await t["default"].get("/admin/auth/profile");return e.data.success&&e.data.data&&localStorage.setItem("adminData",JSON.stringify(e.data.data)),e.data}catch(e){throw this.handleError(e)}}async updateProfile(e){try{const a=await t["default"].put("/admin/auth/profile",e);return a.data.success&&a.data.data&&localStorage.setItem("adminData",JSON.stringify(a.data.data)),a.data}catch(a){throw this.handleError(a)}}async changePassword(e){try{const a=await t["default"].put("/admin/auth/change-password",e);return a.data}catch(a){throw this.handleError(a)}}async sendPasswordReset(e){try{const a=await t["default"].post("/admin/auth/forgot-password",{email:e});return a.data}catch(a){throw this.handleError(a)}}async resetPassword(e,a){try{const s=await t["default"].post("/admin/auth/reset-password",{token:e,newPassword:a});return s.data}catch(s){throw this.handleError(s)}}async getDashboardStats(){try{const e=await t["default"].get("/admin/dashboard/stats");return e.data}catch(e){throw this.handleError(e)}}async getRecentActivity(e=10){try{const a=await t["default"].get(`/admin/dashboard/activity?limit=${e}`);return a.data}catch(a){throw this.handleError(a)}}async getNotifications(e=20){try{const a=await t["default"].get(`/admin/notifications?limit=${e}`);return a.data}catch(a){throw this.handleError(a)}}async markNotificationAsRead(e){try{const a=await t["default"].put(`/admin/notifications/${e}/read`);return a.data}catch(a){throw this.handleError(a)}}async markAllNotificationsAsRead(){try{const e=await t["default"].put("/admin/notifications/read-all");return e.data}catch(e){throw this.handleError(e)}}async logout(){try{await t["default"].post("/admin/auth/logout")}catch(e){console.error("Logout API error:",e)}finally{this.clearAuthData()}}clearAuthData(){localStorage.removeItem("adminToken"),localStorage.removeItem("adminData")}isLoggedIn(){const e=localStorage.getItem("adminToken");return!!e}isAuthenticated(){const e=localStorage.getItem("adminToken"),a=this.getAdminData();if(!e||!a)return!1;try{const a=e.split(".");if(3!==a.length)return!1;const s=JSON.parse(atob(a[1])),t=Math.floor(Date.now()/1e3);return s.exp&&s.exp<t?(this.clearAuthData(),!1):"admin"===s.type||(this.clearAuthData(),!1)}catch(s){return console.error("Token validation error:",s),this.clearAuthData(),!1}}hasRole(e){const a=this.getAdminData();return!(!a||!this.isAuthenticated())&&("admin"===a.role||a.role===e)}hasAnyRole(e){return Array.isArray(e)?e.some((e=>this.hasRole(e))):this.hasRole(e)}getAdminData(){const e=localStorage.getItem("adminData");return e?JSON.parse(e):null}getToken(){return localStorage.getItem("adminToken")}async sendOTP(e,a="registration",s=""){try{const o=await t["default"].post("/otp/send",{email:e,purpose:a,firstName:s});return o.data}catch(o){throw this.handleError(o)}}async verifyOTP(e,a,s="registration"){try{const o=await t["default"].post("/otp/verify",{email:e,otp:a,purpose:s});return o.data}catch(o){throw this.handleError(o)}}async resendOTP(e,a="registration",s=""){try{const o=await t["default"].post("/otp/resend",{email:e,purpose:a,firstName:s});return o.data}catch(o){throw this.handleError(o)}}initializeAuth(){this.getToken()}handleError(e){if(e.response){const a=e.response.data?.message||"An error occurred",s=e.response.data?.errors||[];return new Error(JSON.stringify({message:a,errors:s,status:e.response.status}))}return e.request?new Error(JSON.stringify({message:"Network error. Please check your connection.",errors:[],status:0})):new Error(JSON.stringify({message:e.message||"An unexpected error occurred",errors:[],status:0}))}parseError(e){try{return JSON.parse(e.message)}catch{return{message:e.message,errors:[],status:0}}}}a["default"]=new o},3584:function(e,a,s){s.r(a),s.d(a,{default:function(){return Xe}});var t=s(6768),o=s(4232),r=s(5130);const l={class:"admin-settings"},i={class:"dashboard-container"},n={class:"container-fluid py-4"},c={key:0,class:"alert alert-success alert-dismissible fade show",role:"alert"},d={key:1,class:"alert alert-danger alert-dismissible fade show",role:"alert"},u={class:"row mb-4"},m={class:"col-12"},p={class:"card shadow"},h={class:"card-body"},f={class:"row"},k={class:"col-md-3"},b={class:"nav flex-column nav-pills",role:"tablist"},g={class:"col-md-9"},w={key:0,class:"tab-content"},y={class:"row"},L={class:"col-md-6 mb-3"},v={class:"col-md-6 mb-3"},P={class:"row"},C={class:"col-md-6 mb-3"},S={class:"col-md-6 mb-3"},F={class:"row"},M={class:"col-md-6 mb-3"},A={class:"col-md-6 mb-3"},D={class:"row"},T={class:"col-md-6 mb-3"},_={class:"col-md-6 mb-3"},E={class:"row"},U={class:"col-md-6 mb-3"},I={class:"text-end"},B=["disabled"],N={key:0},x={key:1},R={key:1,class:"tab-content"},z={class:"mb-3"},J={class:"input-group"},V=["type"],O={class:"mb-3"},$={class:"input-group"},q=["type"],W={class:"mb-3"},X={class:"input-group"},Q=["type"],H={class:"text-end"},K=["disabled"],Z={key:0},G={key:1},j={key:2,class:"tab-content"},Y={class:"mb-4"},ee={class:"form-check"},ae={class:"form-check"},se={class:"form-check"},te={class:"mb-4"},oe={class:"form-check"},re={class:"row mt-3"},le={class:"col-md-6"},ie={class:"col-md-6"},ne={key:3,class:"tab-content"},ce={class:"row"},de={class:"col-md-6 mb-4"},ue={class:"card border-0 bg-light"},me={class:"card-body"},pe={class:"table table-sm table-borderless"},he={class:"col-md-6 mb-4"},fe={class:"card border-0 bg-light"},ke={class:"card-body"},be={class:"d-grid gap-2"},ge={key:4,class:"tab-content"},we={class:"row"},ye={class:"col-md-6 mb-4"},Le={class:"card border-0 bg-light"},ve={class:"card-body"},Pe={class:"mb-3"},Ce=["disabled"],Se={class:"col-md-6 mb-4"},Fe={class:"card border-0 bg-light"},Me={class:"card-body"},Ae={class:"mb-3"},De=["disabled"],Te={class:"card border-0 bg-light"},_e={class:"card-body"},Ee={class:"table-responsive"},Ue={class:"table table-sm"},Ie={class:"badge bg-info"},Be={class:"btn-group btn-group-sm"},Ne=["onClick"],xe=["onClick"];function Re(e,a,s,Re,ze,Je){const Ve=(0,t.g2)("AdminHeader"),Oe=(0,t.g2)("AdminSidebar");return(0,t.uX)(),(0,t.CE)("div",l,[(0,t.bF)(Ve,{userName:ze.adminData?.first_name||"Admin",showUserDropdown:ze.showUserDropdown,sidebarCollapsed:ze.sidebarCollapsed,activeMenu:Je.activeMenu,onSidebarToggle:Je.handleSidebarToggle,onUserDropdownToggle:Je.handleUserDropdownToggle,onMenuAction:Je.handleMenuAction,onLogout:Je.handleLogout},null,8,["userName","showUserDropdown","sidebarCollapsed","activeMenu","onSidebarToggle","onUserDropdownToggle","onMenuAction","onLogout"]),(0,t.Lk)("div",{class:(0,o.C4)(["mobile-overlay",{active:!ze.sidebarCollapsed&&ze.isMobile}]),onClick:a[0]||(a[0]=(...e)=>Je.closeMobileSidebar&&Je.closeMobileSidebar(...e))},null,2),(0,t.Lk)("div",i,[(0,t.bF)(Oe,{collapsed:ze.sidebarCollapsed,activeMenu:Je.activeMenu,onMenuChange:Je.handleMenuChange,onLogout:Je.handleLogout,onToggleSidebar:Je.handleSidebarToggle},null,8,["collapsed","activeMenu","onMenuChange","onLogout","onToggleSidebar"]),(0,t.Lk)("main",{class:(0,o.C4)(["main-content",{"sidebar-collapsed":ze.sidebarCollapsed}])},[(0,t.Lk)("div",n,[ze.successMessage?((0,t.uX)(),(0,t.CE)("div",c,[a[37]||(a[37]=(0,t.Lk)("i",{class:"fas fa-check-circle me-2"},null,-1)),(0,t.eW)(" "+(0,o.v_)(ze.successMessage)+" ",1),(0,t.Lk)("button",{type:"button",class:"btn-close",onClick:a[1]||(a[1]=e=>ze.successMessage=""),"aria-label":"Close"})])):(0,t.Q3)("",!0),ze.errorMessage?((0,t.uX)(),(0,t.CE)("div",d,[a[38]||(a[38]=(0,t.Lk)("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),(0,t.eW)(" "+(0,o.v_)(ze.errorMessage)+" ",1),(0,t.Lk)("button",{type:"button",class:"btn-close",onClick:a[2]||(a[2]=e=>ze.errorMessage=""),"aria-label":"Close"})])):(0,t.Q3)("",!0),(0,t.Lk)("div",u,[(0,t.Lk)("div",m,[(0,t.Lk)("div",p,[(0,t.Lk)("div",h,[(0,t.Lk)("div",f,[(0,t.Lk)("div",k,[(0,t.Lk)("div",b,[(0,t.Lk)("button",{class:(0,o.C4)(["nav-link",{active:"profile"===ze.activeTab}]),onClick:a[3]||(a[3]=e=>ze.activeTab="profile"),type:"button"},a[39]||(a[39]=[(0,t.Lk)("i",{class:"fas fa-user me-2"},null,-1),(0,t.eW)(" Admin Profile ")]),2),(0,t.Lk)("button",{class:(0,o.C4)(["nav-link",{active:"password"===ze.activeTab}]),onClick:a[4]||(a[4]=e=>ze.activeTab="password"),type:"button"},a[40]||(a[40]=[(0,t.Lk)("i",{class:"fas fa-shield-alt me-2"},null,-1),(0,t.eW)(" Change Password ")]),2)])]),(0,t.Lk)("div",g,["profile"===ze.activeTab?((0,t.uX)(),(0,t.CE)("div",w,[a[51]||(a[51]=(0,t.Lk)("h5",{class:"mb-3"},"Admin Profile",-1)),(0,t.Lk)("form",{onSubmit:a[14]||(a[14]=(0,r.D$)(((...e)=>Je.saveProfile&&Je.saveProfile(...e)),["prevent"]))},[(0,t.Lk)("div",y,[(0,t.Lk)("div",L,[a[41]||(a[41]=(0,t.Lk)("label",{class:"form-label"},"First Name",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[5]||(a[5]=e=>ze.profileForm.first_name=e),required:""},null,512),[[r.Jo,ze.profileForm.first_name]])]),(0,t.Lk)("div",v,[a[42]||(a[42]=(0,t.Lk)("label",{class:"form-label"},"Middle Name",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[6]||(a[6]=e=>ze.profileForm.middle_name=e)},null,512),[[r.Jo,ze.profileForm.middle_name]])])]),(0,t.Lk)("div",P,[(0,t.Lk)("div",C,[a[43]||(a[43]=(0,t.Lk)("label",{class:"form-label"},"Last Name",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[7]||(a[7]=e=>ze.profileForm.last_name=e),required:""},null,512),[[r.Jo,ze.profileForm.last_name]])]),(0,t.Lk)("div",S,[a[44]||(a[44]=(0,t.Lk)("label",{class:"form-label"},"Suffix",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[8]||(a[8]=e=>ze.profileForm.suffix=e),placeholder:"Jr., Sr., III, etc."},null,512),[[r.Jo,ze.profileForm.suffix]])])]),(0,t.Lk)("div",F,[(0,t.Lk)("div",M,[a[45]||(a[45]=(0,t.Lk)("label",{class:"form-label"},"Employee ID",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[9]||(a[9]=e=>ze.profileForm.employee_id=e)},null,512),[[r.Jo,ze.profileForm.employee_id]])]),(0,t.Lk)("div",A,[a[46]||(a[46]=(0,t.Lk)("label",{class:"form-label"},"Phone Number",-1)),(0,t.bo)((0,t.Lk)("input",{type:"tel",class:"form-control","onUpdate:modelValue":a[10]||(a[10]=e=>ze.profileForm.phone_number=e)},null,512),[[r.Jo,ze.profileForm.phone_number]])])]),(0,t.Lk)("div",D,[(0,t.Lk)("div",T,[a[47]||(a[47]=(0,t.Lk)("label",{class:"form-label"},"Email",-1)),(0,t.bo)((0,t.Lk)("input",{type:"email",class:"form-control","onUpdate:modelValue":a[11]||(a[11]=e=>ze.profileForm.email=e),required:""},null,512),[[r.Jo,ze.profileForm.email]])]),(0,t.Lk)("div",_,[a[48]||(a[48]=(0,t.Lk)("label",{class:"form-label"},"Position",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[12]||(a[12]=e=>ze.profileForm.position=e)},null,512),[[r.Jo,ze.profileForm.position]])])]),(0,t.Lk)("div",E,[(0,t.Lk)("div",U,[a[49]||(a[49]=(0,t.Lk)("label",{class:"form-label"},"Department",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[13]||(a[13]=e=>ze.profileForm.department=e)},null,512),[[r.Jo,ze.profileForm.department]])])]),(0,t.Lk)("div",I,[(0,t.Lk)("button",{type:"submit",class:"btn btn-success",disabled:ze.profileLoading},[a[50]||(a[50]=(0,t.Lk)("i",{class:"fas fa-save me-1"},null,-1)),ze.profileLoading?((0,t.uX)(),(0,t.CE)("span",N,"Saving...")):((0,t.uX)(),(0,t.CE)("span",x,"Save Profile"))],8,B)])],32)])):(0,t.Q3)("",!0),"password"===ze.activeTab?((0,t.uX)(),(0,t.CE)("div",R,[a[58]||(a[58]=(0,t.Lk)("h5",{class:"mb-3"},"Change Password",-1)),(0,t.Lk)("form",{onSubmit:a[21]||(a[21]=(0,r.D$)(((...e)=>Je.changePassword&&Je.changePassword(...e)),["prevent"]))},[a[57]||(a[57]=(0,t.Lk)("div",{class:"alert alert-info"},[(0,t.Lk)("i",{class:"fas fa-info-circle me-2"}),(0,t.eW)(" For security reasons, you must enter your current password to change it. ")],-1)),(0,t.Lk)("div",z,[a[52]||(a[52]=(0,t.Lk)("label",{class:"form-label"},"Current Password",-1)),(0,t.Lk)("div",J,[(0,t.bo)((0,t.Lk)("input",{type:ze.showCurrentPassword?"text":"password",class:"form-control","onUpdate:modelValue":a[15]||(a[15]=e=>ze.passwordForm.currentPassword=e),required:"",autocomplete:"current-password"},null,8,V),[[r.hp,ze.passwordForm.currentPassword]]),(0,t.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:a[16]||(a[16]=e=>ze.showCurrentPassword=!ze.showCurrentPassword)},[(0,t.Lk)("i",{class:(0,o.C4)(ze.showCurrentPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])])]),(0,t.Lk)("div",O,[a[53]||(a[53]=(0,t.Lk)("label",{class:"form-label"},"New Password",-1)),(0,t.Lk)("div",$,[(0,t.bo)((0,t.Lk)("input",{type:ze.showNewPassword?"text":"password",class:"form-control","onUpdate:modelValue":a[17]||(a[17]=e=>ze.passwordForm.newPassword=e),required:"",autocomplete:"new-password"},null,8,q),[[r.hp,ze.passwordForm.newPassword]]),(0,t.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:a[18]||(a[18]=e=>ze.showNewPassword=!ze.showNewPassword)},[(0,t.Lk)("i",{class:(0,o.C4)(ze.showNewPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])]),a[54]||(a[54]=(0,t.Lk)("div",{class:"form-text"}," Password must be at least 8 characters with uppercase, lowercase, and number. ",-1))]),(0,t.Lk)("div",W,[a[55]||(a[55]=(0,t.Lk)("label",{class:"form-label"},"Confirm New Password",-1)),(0,t.Lk)("div",X,[(0,t.bo)((0,t.Lk)("input",{type:ze.showConfirmPassword?"text":"password",class:"form-control","onUpdate:modelValue":a[19]||(a[19]=e=>ze.passwordForm.confirmPassword=e),required:"",autocomplete:"new-password"},null,8,Q),[[r.hp,ze.passwordForm.confirmPassword]]),(0,t.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:a[20]||(a[20]=e=>ze.showConfirmPassword=!ze.showConfirmPassword)},[(0,t.Lk)("i",{class:(0,o.C4)(ze.showConfirmPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])])]),(0,t.Lk)("div",H,[(0,t.Lk)("button",{type:"submit",class:"btn btn-warning",disabled:ze.passwordLoading},[a[56]||(a[56]=(0,t.Lk)("i",{class:"fas fa-key me-1"},null,-1)),ze.passwordLoading?((0,t.uX)(),(0,t.CE)("span",Z,"Changing...")):((0,t.uX)(),(0,t.CE)("span",G,"Change Password"))],8,K)])],32)])):(0,t.Q3)("",!0),"notifications"===ze.activeTab?((0,t.uX)(),(0,t.CE)("div",j,[a[69]||(a[69]=(0,t.Lk)("h5",{class:"mb-3"},"Notification Settings",-1)),(0,t.Lk)("form",{onSubmit:a[28]||(a[28]=(0,r.D$)(((...a)=>e.saveNotificationSettings&&e.saveNotificationSettings(...a)),["prevent"]))},[(0,t.Lk)("div",Y,[a[62]||(a[62]=(0,t.Lk)("h6",null,"Email Notifications",-1)),(0,t.Lk)("div",ee,[(0,t.bo)((0,t.Lk)("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":a[22]||(a[22]=a=>e.settings.notifications.newUserRegistration=a)},null,512),[[r.lH,e.settings.notifications.newUserRegistration]]),a[59]||(a[59]=(0,t.Lk)("label",{class:"form-check-label"},"New User Registration",-1))]),(0,t.Lk)("div",ae,[(0,t.bo)((0,t.Lk)("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":a[23]||(a[23]=a=>e.settings.notifications.documentRequests=a)},null,512),[[r.lH,e.settings.notifications.documentRequests]]),a[60]||(a[60]=(0,t.Lk)("label",{class:"form-check-label"},"Document Requests",-1))]),(0,t.Lk)("div",se,[(0,t.bo)((0,t.Lk)("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":a[24]||(a[24]=a=>e.settings.notifications.systemAlerts=a)},null,512),[[r.lH,e.settings.notifications.systemAlerts]]),a[61]||(a[61]=(0,t.Lk)("label",{class:"form-check-label"},"System Alerts",-1))])]),(0,t.Lk)("div",te,[a[67]||(a[67]=(0,t.Lk)("h6",null,"SMS Notifications",-1)),(0,t.Lk)("div",oe,[(0,t.bo)((0,t.Lk)("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":a[25]||(a[25]=a=>e.settings.notifications.smsEnabled=a)},null,512),[[r.lH,e.settings.notifications.smsEnabled]]),a[63]||(a[63]=(0,t.Lk)("label",{class:"form-check-label"},"Enable SMS Notifications",-1))]),(0,t.Lk)("div",re,[(0,t.Lk)("div",le,[a[65]||(a[65]=(0,t.Lk)("label",{class:"form-label"},"SMS Provider",-1)),(0,t.bo)((0,t.Lk)("select",{class:"form-select","onUpdate:modelValue":a[26]||(a[26]=a=>e.settings.notifications.smsProvider=a)},a[64]||(a[64]=[(0,t.Lk)("option",{value:"semaphore"},"Semaphore",-1),(0,t.Lk)("option",{value:"globe"},"Globe Labs",-1),(0,t.Lk)("option",{value:"smart"},"Smart Communications",-1)]),512),[[r.u1,e.settings.notifications.smsProvider]])]),(0,t.Lk)("div",ie,[a[66]||(a[66]=(0,t.Lk)("label",{class:"form-label"},"SMS API Key",-1)),(0,t.bo)((0,t.Lk)("input",{type:"password",class:"form-control","onUpdate:modelValue":a[27]||(a[27]=a=>e.settings.notifications.smsApiKey=a)},null,512),[[r.Jo,e.settings.notifications.smsApiKey]])])])]),a[68]||(a[68]=(0,t.Lk)("div",{class:"text-end"},[(0,t.Lk)("button",{type:"submit",class:"btn btn-success"},[(0,t.Lk)("i",{class:"fas fa-save me-1"}),(0,t.eW)(" Save Changes ")])],-1))],32)])):(0,t.Q3)("",!0),"system"===ze.activeTab?((0,t.uX)(),(0,t.CE)("div",ne,[a[80]||(a[80]=(0,t.Lk)("h5",{class:"mb-3"},"System Settings",-1)),(0,t.Lk)("div",ce,[(0,t.Lk)("div",de,[(0,t.Lk)("div",ue,[(0,t.Lk)("div",me,[a[74]||(a[74]=(0,t.Lk)("h6",{class:"card-title"},"System Information",-1)),(0,t.Lk)("table",pe,[(0,t.Lk)("tbody",null,[(0,t.Lk)("tr",null,[a[70]||(a[70]=(0,t.Lk)("td",null,[(0,t.Lk)("strong",null,"Version:")],-1)),(0,t.Lk)("td",null,(0,o.v_)(ze.systemInfo.version),1)]),(0,t.Lk)("tr",null,[a[71]||(a[71]=(0,t.Lk)("td",null,[(0,t.Lk)("strong",null,"Database:")],-1)),(0,t.Lk)("td",null,(0,o.v_)(ze.systemInfo.database),1)]),(0,t.Lk)("tr",null,[a[72]||(a[72]=(0,t.Lk)("td",null,[(0,t.Lk)("strong",null,"Server:")],-1)),(0,t.Lk)("td",null,(0,o.v_)(ze.systemInfo.server),1)]),(0,t.Lk)("tr",null,[a[73]||(a[73]=(0,t.Lk)("td",null,[(0,t.Lk)("strong",null,"Uptime:")],-1)),(0,t.Lk)("td",null,(0,o.v_)(ze.systemInfo.uptime),1)])])])])])]),(0,t.Lk)("div",he,[(0,t.Lk)("div",fe,[(0,t.Lk)("div",ke,[a[79]||(a[79]=(0,t.Lk)("h6",{class:"card-title"},"System Actions",-1)),(0,t.Lk)("div",be,[(0,t.Lk)("button",{class:"btn btn-warning btn-sm",onClick:a[29]||(a[29]=(...e)=>Je.clearCache&&Je.clearCache(...e))},a[75]||(a[75]=[(0,t.Lk)("i",{class:"fas fa-broom me-1"},null,-1),(0,t.eW)(" Clear System Cache ")])),(0,t.Lk)("button",{class:"btn btn-info btn-sm",onClick:a[30]||(a[30]=(...e)=>Je.optimizeDatabase&&Je.optimizeDatabase(...e))},a[76]||(a[76]=[(0,t.Lk)("i",{class:"fas fa-database me-1"},null,-1),(0,t.eW)(" Optimize Database ")])),(0,t.Lk)("button",{class:"btn btn-success btn-sm",onClick:a[31]||(a[31]=(...e)=>Je.checkUpdates&&Je.checkUpdates(...e))},a[77]||(a[77]=[(0,t.Lk)("i",{class:"fas fa-sync-alt me-1"},null,-1),(0,t.eW)(" Check for Updates ")])),(0,t.Lk)("button",{class:"btn btn-danger btn-sm",onClick:a[32]||(a[32]=(...e)=>Je.restartSystem&&Je.restartSystem(...e))},a[78]||(a[78]=[(0,t.Lk)("i",{class:"fas fa-power-off me-1"},null,-1),(0,t.eW)(" Restart System ")]))])])])])])])):(0,t.Q3)("",!0),"backup"===ze.activeTab?((0,t.uX)(),(0,t.CE)("div",ge,[a[92]||(a[92]=(0,t.Lk)("h5",{class:"mb-3"},"Backup & Restore",-1)),(0,t.Lk)("div",we,[(0,t.Lk)("div",ye,[(0,t.Lk)("div",Le,[(0,t.Lk)("div",ve,[a[83]||(a[83]=(0,t.Lk)("h6",{class:"card-title"},"Create Backup",-1)),a[84]||(a[84]=(0,t.Lk)("p",{class:"text-muted small"},"Create a full system backup including database and files.",-1)),(0,t.Lk)("div",Pe,[a[82]||(a[82]=(0,t.Lk)("label",{class:"form-label"},"Backup Type",-1)),(0,t.bo)((0,t.Lk)("select",{class:"form-select","onUpdate:modelValue":a[33]||(a[33]=a=>e.backupType=a)},a[81]||(a[81]=[(0,t.Lk)("option",{value:"full"},"Full Backup",-1),(0,t.Lk)("option",{value:"database"},"Database Only",-1),(0,t.Lk)("option",{value:"files"},"Files Only",-1)]),512),[[r.u1,e.backupType]])]),(0,t.Lk)("button",{class:"btn btn-primary",onClick:a[34]||(a[34]=(...e)=>Je.createBackup&&Je.createBackup(...e)),disabled:e.backupInProgress},[(0,t.Lk)("i",{class:(0,o.C4)(["fas fa-download me-1",{"fa-spin":e.backupInProgress}])},null,2),(0,t.eW)(" "+(0,o.v_)(e.backupInProgress?"Creating Backup...":"Create Backup"),1)],8,Ce)])])]),(0,t.Lk)("div",Se,[(0,t.Lk)("div",Fe,[(0,t.Lk)("div",Me,[a[86]||(a[86]=(0,t.Lk)("h6",{class:"card-title"},"Restore Backup",-1)),a[87]||(a[87]=(0,t.Lk)("p",{class:"text-muted small"},"Restore system from a previous backup.",-1)),(0,t.Lk)("div",Ae,[a[85]||(a[85]=(0,t.Lk)("label",{class:"form-label"},"Select Backup File",-1)),(0,t.Lk)("input",{type:"file",class:"form-control",accept:".zip,.sql",onChange:a[35]||(a[35]=(...e)=>Je.selectBackupFile&&Je.selectBackupFile(...e))},null,32)]),(0,t.Lk)("button",{class:"btn btn-warning",onClick:a[36]||(a[36]=(...e)=>Je.restoreBackup&&Je.restoreBackup(...e)),disabled:!e.selectedBackupFile||e.restoreInProgress},[(0,t.Lk)("i",{class:(0,o.C4)(["fas fa-upload me-1",{"fa-spin":e.restoreInProgress}])},null,2),(0,t.eW)(" "+(0,o.v_)(e.restoreInProgress?"Restoring...":"Restore Backup"),1)],8,De)])])])]),(0,t.Lk)("div",Te,[(0,t.Lk)("div",_e,[a[91]||(a[91]=(0,t.Lk)("h6",{class:"card-title"},"Recent Backups",-1)),(0,t.Lk)("div",Ee,[(0,t.Lk)("table",Ue,[a[90]||(a[90]=(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",null,"Date"),(0,t.Lk)("th",null,"Type"),(0,t.Lk)("th",null,"Size"),(0,t.Lk)("th",null,"Status"),(0,t.Lk)("th",null,"Actions")])],-1)),(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(ze.recentBackups,(e=>((0,t.uX)(),(0,t.CE)("tr",{key:e.id},[(0,t.Lk)("td",null,(0,o.v_)(Je.formatDate(e.created_at)),1),(0,t.Lk)("td",null,[(0,t.Lk)("span",Ie,(0,o.v_)(e.type),1)]),(0,t.Lk)("td",null,(0,o.v_)(e.size),1),(0,t.Lk)("td",null,[(0,t.Lk)("span",{class:(0,o.C4)(["badge","completed"===e.status?"bg-success":"bg-warning"])},(0,o.v_)(e.status),3)]),(0,t.Lk)("td",null,[(0,t.Lk)("div",Be,[(0,t.Lk)("button",{class:"btn btn-outline-primary",onClick:a=>Je.downloadBackup(e)},a[88]||(a[88]=[(0,t.Lk)("i",{class:"fas fa-download"},null,-1)]),8,Ne),(0,t.Lk)("button",{class:"btn btn-outline-danger",onClick:a=>Je.deleteBackup(e)},a[89]||(a[89]=[(0,t.Lk)("i",{class:"fas fa-trash"},null,-1)]),8,xe)])])])))),128))])])])])])])):(0,t.Q3)("",!0)])])])])])])])],2)])])}s(4114);var ze=s(3237),Je=s(2944),Ve=s(9197),Oe=s(2674),$e={name:"AdminSettings",components:{AdminHeader:ze.A,AdminSidebar:Je.A},data(){return{sidebarCollapsed:!1,showUserDropdown:!1,isMobile:!1,adminData:null,activeTab:"profile",loading:!1,profileLoading:!1,passwordLoading:!1,successMessage:"",errorMessage:"",profileForm:{first_name:"",middle_name:"",last_name:"",suffix:"",employee_id:"",phone_number:"",email:"",position:"",department:"",hire_date:""},passwordForm:{currentPassword:"",newPassword:"",confirmPassword:""},showCurrentPassword:!1,showNewPassword:!1,showConfirmPassword:!1,systemInfo:{version:"1.0.0",database:"MySQL 8.0",server:"Apache 2.4",uptime:"15 days, 3 hours"},recentBackups:[{id:1,created_at:"2024-01-31T10:30:00Z",type:"Full",size:"45.2 MB",status:"completed"},{id:2,created_at:"2024-01-30T10:30:00Z",type:"Database",size:"12.8 MB",status:"completed"},{id:3,created_at:"2024-01-29T10:30:00Z",type:"Full",size:"44.1 MB",status:"completed"}]}},async mounted(){Ve["default"].isLoggedIn()&&"admin"===Ve["default"].getUserType()?(this.initializeUI(),await this.loadAdminProfile(),await this.loadProfileData()):this.$router.push("/login")},beforeUnmount(){this.handleResize&&window.removeEventListener("resize",this.handleResize)},computed:{activeMenu(){const e=this.$route.path;return e.includes("/admin/users")?"users":e.includes("/admin/requests")?"requests":e.includes("/admin/reports")?"reports":e.includes("/admin/settings")?"settings":e.includes("/admin/activity-logs")?"activity":e.includes("/admin/profile")?"profile":"dashboard"}},methods:{initializeUI(){if(this.isMobile=window.innerWidth<=768,this.isMobile)this.sidebarCollapsed=!0;else{const e=localStorage.getItem("adminSidebarCollapsed");this.sidebarCollapsed=!!e&&JSON.parse(e)}this.handleResize=()=>{const e=this.isMobile;if(this.isMobile=window.innerWidth<=768,this.isMobile&&!e)this.sidebarCollapsed=!0;else if(!this.isMobile&&e){const e=localStorage.getItem("adminSidebarCollapsed");this.sidebarCollapsed=!!e&&JSON.parse(e)}},window.addEventListener("resize",this.handleResize)},handleSidebarToggle(){this.sidebarCollapsed=!this.sidebarCollapsed,localStorage.setItem("adminSidebarCollapsed",JSON.stringify(this.sidebarCollapsed))},handleMenuChange(e){const a={dashboard:"/admin/dashboard",users:"/admin/users",requests:"/admin/requests",reports:"/admin/reports",settings:"/admin/settings",activity:"/admin/activity-logs",profile:"/admin/profile"};this.isMobile&&(this.sidebarCollapsed=!0),a[e]&&this.$router.push(a[e])},handleUserDropdownToggle(){this.showUserDropdown=!this.showUserDropdown},handleMenuAction(e){"profile"===e?this.$router.push("/admin/profile"):"settings"===e&&this.$router.push("/admin/settings"),this.showUserDropdown=!1},closeMobileSidebar(){this.isMobile&&(this.sidebarCollapsed=!0)},handleLogout(){Ve["default"].logout(),this.$router.push("/login")},async loadAdminProfile(){try{const e=Ve["default"].getCurrentUser();e&&e.profile?this.adminData=e.profile:this.adminData={first_name:e?.username||"Admin",role:e?.role||"admin"}}catch(e){console.error("Failed to load admin profile:",e);const a=Ve["default"].getCurrentUser();this.adminData={first_name:a?.username||"Admin",role:a?.role||"admin"}}},async loadProfileData(){try{this.loading=!0;const e=await Oe["default"].getProfile();if(e.success){const a=e.data;this.profileForm={first_name:a.first_name||"",middle_name:a.middle_name||"",last_name:a.last_name||"",suffix:a.suffix||"",employee_id:a.employee_id||"",phone_number:a.phone_number||"",email:a.email||"",position:a.position||"",department:a.department||"",hire_date:a.hire_date?a.hire_date.split("T")[0]:""}}else this.errorMessage="Failed to load profile data"}catch(e){console.error("Failed to load profile data:",e),this.errorMessage="Failed to load profile data"}finally{this.loading=!1}},async saveProfile(){try{this.profileLoading=!0,this.clearMessages();const e=await Oe["default"].updateProfile(this.profileForm);e.success?(this.successMessage="Profile updated successfully!",await this.loadAdminProfile()):this.errorMessage=e.message||"Failed to update profile"}catch(e){console.error("Failed to save profile:",e),this.errorMessage="Failed to update profile. Please try again."}finally{this.profileLoading=!1}},async changePassword(){try{if(this.passwordLoading=!0,this.clearMessages(),this.passwordForm.newPassword!==this.passwordForm.confirmPassword)return void(this.errorMessage="New passwords do not match");if(this.passwordForm.newPassword.length<8)return void(this.errorMessage="Password must be at least 8 characters long");const e=await Oe["default"].changePassword({currentPassword:this.passwordForm.currentPassword,newPassword:this.passwordForm.newPassword,confirmPassword:this.passwordForm.confirmPassword});e.success?(this.successMessage="Password changed successfully!",this.passwordForm={currentPassword:"",newPassword:"",confirmPassword:""},this.showCurrentPassword=!1,this.showNewPassword=!1,this.showConfirmPassword=!1):this.errorMessage=e.message||"Failed to change password"}catch(e){console.error("Failed to change password:",e),this.errorMessage="Failed to change password. Please try again."}finally{this.passwordLoading=!1}},clearMessages(){this.successMessage="",this.errorMessage=""},async clearCache(){if(confirm("Are you sure you want to clear the system cache?"))try{console.log("Clearing cache..."),await new Promise((e=>setTimeout(e,2e3))),alert("System cache cleared successfully!")}catch(e){console.error("Failed to clear cache:",e),alert("Failed to clear cache. Please try again.")}},async optimizeDatabase(){if(confirm("Are you sure you want to optimize the database? This may take a few minutes."))try{console.log("Optimizing database..."),await new Promise((e=>setTimeout(e,3e3))),alert("Database optimized successfully!")}catch(e){console.error("Failed to optimize database:",e),alert("Failed to optimize database. Please try again.")}},async checkUpdates(){try{console.log("Checking for updates..."),await new Promise((e=>setTimeout(e,2e3))),alert("System is up to date!")}catch(e){console.error("Failed to check updates:",e),alert("Failed to check for updates. Please try again.")}},async restartSystem(){if(confirm("Are you sure you want to restart the system? This will temporarily make the system unavailable."))try{console.log("Restarting system..."),alert("System restart initiated. Please wait a few minutes before accessing the system again.")}catch(e){console.error("Failed to restart system:",e),alert("Failed to restart system. Please try again.")}},async createBackup(){this.backupInProgress=!0;try{console.log(`Creating ${this.backupType} backup...`),await new Promise((e=>setTimeout(e,5e3)));const e={id:Date.now(),created_at:(new Date).toISOString(),type:this.backupType.charAt(0).toUpperCase()+this.backupType.slice(1),size:"42.5 MB",status:"completed"};this.recentBackups.unshift(e),alert("Backup created successfully!")}catch(e){console.error("Failed to create backup:",e),alert("Failed to create backup. Please try again.")}finally{this.backupInProgress=!1}},selectBackupFile(e){this.selectedBackupFile=e.target.files[0]},async restoreBackup(){if(this.selectedBackupFile){if(confirm("Are you sure you want to restore from this backup? This will overwrite current data.")){this.restoreInProgress=!0;try{console.log("Restoring backup:",this.selectedBackupFile.name),await new Promise((e=>setTimeout(e,8e3))),alert("Backup restored successfully!"),this.selectedBackupFile=null}catch(e){console.error("Failed to restore backup:",e),alert("Failed to restore backup. Please try again.")}finally{this.restoreInProgress=!1}}}else alert("Please select a backup file first.")},downloadBackup(e){console.log("Downloading backup:",e),alert(`Download functionality for backup "${e.type}" will be implemented soon.`)},deleteBackup(e){if(confirm(`Are you sure you want to delete the backup from ${this.formatDate(e.created_at)}?`)){const a=this.recentBackups.findIndex((a=>a.id===e.id));a>-1&&(this.recentBackups.splice(a,1),alert("Backup deleted successfully."))}},formatDate(e){if(!e)return"";const a=new Date(e);return a.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},goBack(){this.$router.push("/admin/dashboard")}}},qe=s(1241);const We=(0,qe.A)($e,[["render",Re],["__scopeId","data-v-013e617e"]]);var Xe=We}}]);