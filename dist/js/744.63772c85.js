"use strict";(self["webpackChunkbosfdr"]=self["webpackChunkbosfdr"]||[]).push([[744],{8638:function(e,a,t){t.r(a),t.d(a,{default:function(){return Sa}});t(8111),t(1701);var i=t(6768),o=t(4232),s=t(5130);const n={class:"barangay-clearance-request"},r={class:"page-header"},l={class:"header-content"},d={class:"page-content"},c={class:"progress-steps"},u={class:"form-container"},p={key:0,class:"form-step"},f={class:"form-section"},m={class:"request-type-options"},h={class:"radio-option"},g={class:"radio-option"},y={key:0,class:"profile-preview"},k={class:"profile-card"},_={class:"profile-info"},v={class:"info-grid"},b={class:"info-item"},L={class:"info-item"},D={class:"info-item"},C={class:"info-item"},P={class:"info-item"},F={class:"info-item"},w={class:"info-item"},S={class:"info-item"},E={key:1,class:"beneficiary-section"},I={class:"form-grid"},q={class:"form-group"},R={class:"form-group"},x={class:"form-group"},z={class:"form-group"},A={class:"form-group"},U={key:0,class:"form-group"},N={class:"form-group"},B=["value"],T={class:"form-group"},V={key:0,class:"alert alert-danger mt-2"},M={class:"verification-section"},$={class:"alert alert-info"},O={class:"form-grid"},X={class:"form-group"},G={class:"form-group"},J={class:"form-grid"},W={class:"form-group"},Y={class:"form-group"},Q={class:"form-section"},j={class:"document-upload-group"},K={key:0,class:"upload-placeholder"},H={key:1,class:"uploaded-file"},Z={class:"document-upload-group"},ee={key:0,class:"upload-placeholder"},ae={key:1,class:"uploaded-file"},te={class:"document-upload-group"},ie={key:0,class:"upload-placeholder"},oe={key:1,class:"uploaded-file"},se={key:1,class:"form-step"},ne={class:"form-section"},re={class:"form-group"},le=["value"],de={key:0,class:"form-group"},ce={class:"form-group"},ue={class:"radio-group"},pe={class:"radio-option"},fe={class:"radio-option"},me={key:1,class:"form-group"},he={class:"form-group"},ge={class:"radio-group"},ye={class:"radio-option"},ke={class:"radio-option"},_e={key:2,class:"form-step"},ve={class:"fee-summary"},be={class:"fee-card"},Le={class:"fee-items"},De={class:"fee-item"},Ce={class:"fee-item total"},Pe={class:"form-section"},Fe={class:"payment-methods"},we=["onClick"],Se={class:"payment-icon"},Ee={class:"payment-info"},Ie={key:0},qe={key:1,class:"grouped-methods-preview"},Re={class:"text-muted"},xe={class:"payment-radio"},ze=["value"],Ae={class:"form-section"},Ue={class:"pickup-options"},Ne={class:"radio-option"},Be={class:"option-content"},Te={class:"radio-option"},Ve={key:0,class:"authorized-pickup-form"},Me={class:"form-grid"},$e={class:"form-group"},Oe={class:"form-group"},Xe={class:"form-group"},Ge={class:"form-group"},Je={class:"form-group"},We={class:"form-group"},Ye={class:"form-group"},Qe={key:3,class:"form-step"},je={class:"review-sections"},Ke={class:"review-section"},He={class:"review-grid"},Ze={class:"review-item"},ea={class:"review-item"},aa={class:"review-item"},ta={class:"review-section"},ia={class:"review-grid"},oa={class:"review-item"},sa={key:0,class:"review-item"},na={class:"review-item"},ra={key:1,class:"review-item"},la={class:"review-item"},da={class:"review-section"},ca={class:"review-grid"},ua={class:"review-item"},pa={class:"review-item"},fa={class:"amount"},ma={class:"terms-section"},ha={class:"checkbox-option"},ga={class:"form-actions"},ya=["disabled"],ka=["disabled"];function _a(e,a,t,_a,va,ba){const La=(0,i.g2)("FileUpload");return(0,i.uX)(),(0,i.CE)("div",n,[(0,i.Lk)("div",r,[(0,i.Lk)("div",l,[a[64]||(a[64]=(0,i.Lk)("div",{class:"header-main"},[(0,i.Lk)("h1",{class:"page-title"},[(0,i.Lk)("i",{class:"fas fa-certificate"}),(0,i.eW)(" Barangay Clearance Request ")]),(0,i.Lk)("p",{class:"page-description"}," Apply for your Barangay Clearance certificate online ")],-1)),(0,i.Lk)("button",{class:"back-btn",onClick:a[0]||(a[0]=(...e)=>ba.goBack&&ba.goBack(...e))},a[63]||(a[63]=[(0,i.Lk)("i",{class:"fas fa-arrow-left"},null,-1),(0,i.eW)(" Back ")]))])]),(0,i.Lk)("div",d,[(0,i.Lk)("div",c,[(0,i.Lk)("div",{class:(0,o.C4)(["step",{active:va.currentStep>=1,completed:va.currentStep>1}])},a[65]||(a[65]=[(0,i.Lk)("div",{class:"step-number"},"1",-1),(0,i.Lk)("span",{class:"step-label"},"Upload Documents",-1)]),2),(0,i.Lk)("div",{class:(0,o.C4)(["step",{active:va.currentStep>=2,completed:va.currentStep>2}])},a[66]||(a[66]=[(0,i.Lk)("div",{class:"step-number"},"2",-1),(0,i.Lk)("span",{class:"step-label"},"Purpose & Details",-1)]),2),(0,i.Lk)("div",{class:(0,o.C4)(["step",{active:va.currentStep>=3,completed:va.currentStep>3}])},a[67]||(a[67]=[(0,i.Lk)("div",{class:"step-number"},"3",-1),(0,i.Lk)("span",{class:"step-label"},"Payment",-1)]),2),(0,i.Lk)("div",{class:(0,o.C4)(["step",{active:va.currentStep>=4}])},a[68]||(a[68]=[(0,i.Lk)("div",{class:"step-number"},"4",-1),(0,i.Lk)("span",{class:"step-label"},"Review & Submit",-1)]),2)]),(0,i.Lk)("div",u,[(0,i.Lk)("form",{onSubmit:a[62]||(a[62]=(0,s.D$)(((...e)=>ba.handleSubmit&&ba.handleSubmit(...e)),["prevent"]))},[1===va.currentStep?((0,i.uX)(),(0,i.CE)("div",p,[a[119]||(a[119]=(0,i.Lk)("div",{class:"step-header"},[(0,i.Lk)("h2",null,"Personal Information"),(0,i.Lk)("p",null,"Choose who this document is for")],-1)),(0,i.Lk)("div",f,[a[73]||(a[73]=(0,i.Lk)("h3",null,"Who is this document for?",-1)),(0,i.Lk)("div",m,[(0,i.Lk)("label",h,[(0,i.bo)((0,i.Lk)("input",{type:"radio","onUpdate:modelValue":a[1]||(a[1]=e=>va.formData.is_third_party_request=e),value:!1,onChange:a[2]||(a[2]=(...e)=>ba.handleRequestTypeChange&&ba.handleRequestTypeChange(...e))},null,544),[[s.XL,va.formData.is_third_party_request]]),a[69]||(a[69]=(0,i.Lk)("span",{class:"radio-custom"},null,-1)),a[70]||(a[70]=(0,i.Lk)("div",{class:"option-content"},[(0,i.Lk)("strong",null,"For myself"),(0,i.Lk)("p",null,"Request document using my profile information")],-1))]),(0,i.Lk)("label",g,[(0,i.bo)((0,i.Lk)("input",{type:"radio","onUpdate:modelValue":a[3]||(a[3]=e=>va.formData.is_third_party_request=e),value:!0,onChange:a[4]||(a[4]=(...e)=>ba.handleRequestTypeChange&&ba.handleRequestTypeChange(...e))},null,544),[[s.XL,va.formData.is_third_party_request]]),a[71]||(a[71]=(0,i.Lk)("span",{class:"radio-custom"},null,-1)),a[72]||(a[72]=(0,i.Lk)("div",{class:"option-content"},[(0,i.Lk)("strong",null,"For someone else"),(0,i.Lk)("p",null,"Request document on behalf of another person")],-1))])])]),va.formData.is_third_party_request?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",y,[(0,i.Lk)("div",k,[(0,i.Lk)("div",_,[(0,i.Lk)("h3",null,(0,o.v_)(ba.getFullName()),1),(0,i.Lk)("div",v,[(0,i.Lk)("div",b,[a[74]||(a[74]=(0,i.Lk)("label",null,"Email:",-1)),(0,i.Lk)("span",null,(0,o.v_)(va.clientData?.email||va.clientData?.profile?.email||"Not provided"),1)]),(0,i.Lk)("div",L,[a[75]||(a[75]=(0,i.Lk)("label",null,"Phone:",-1)),(0,i.Lk)("span",null,(0,o.v_)(va.clientData?.phone_number||va.clientData?.profile?.phone_number||"Not provided"),1)]),(0,i.Lk)("div",D,[a[76]||(a[76]=(0,i.Lk)("label",null,"Address:",-1)),(0,i.Lk)("span",null,(0,o.v_)(ba.getFullAddress()),1)]),(0,i.Lk)("div",C,[a[77]||(a[77]=(0,i.Lk)("label",null,"Date of Birth:",-1)),(0,i.Lk)("span",null,(0,o.v_)(ba.formatDate(va.clientData?.birth_date||va.clientData?.profile?.birth_date)),1)]),(0,i.Lk)("div",P,[a[78]||(a[78]=(0,i.Lk)("label",null,"Gender:",-1)),(0,i.Lk)("span",null,(0,o.v_)(va.clientData?.gender||va.clientData?.profile?.gender||"Not provided"),1)]),(0,i.Lk)("div",F,[a[79]||(a[79]=(0,i.Lk)("label",null,"Civil Status:",-1)),(0,i.Lk)("span",null,(0,o.v_)(ba.getCivilStatusName(va.clientData?.civil_status_id||va.clientData?.profile?.civil_status_id)),1)]),(0,i.Lk)("div",w,[a[80]||(a[80]=(0,i.Lk)("label",null,"Nationality:",-1)),(0,i.Lk)("span",null,(0,o.v_)(va.clientData?.nationality||va.clientData?.profile?.nationality||"Not provided"),1)]),(0,i.Lk)("div",S,[a[81]||(a[81]=(0,i.Lk)("label",null,"Years of Residency:",-1)),(0,i.Lk)("span",null,(0,o.v_)(ba.getResidencyDisplay()),1)])])])])])),va.formData.is_third_party_request?((0,i.uX)(),(0,i.CE)("div",E,[a[102]||(a[102]=(0,i.Lk)("h3",null,"Person this document is for",-1)),(0,i.Lk)("div",I,[(0,i.Lk)("div",q,[a[82]||(a[82]=(0,i.Lk)("label",null,"First Name *",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":a[5]||(a[5]=e=>va.formData.beneficiary.first_name=e),required:"",class:"form-control"},null,512),[[s.Jo,va.formData.beneficiary.first_name]])]),(0,i.Lk)("div",R,[a[83]||(a[83]=(0,i.Lk)("label",null,"Middle Name",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":a[6]||(a[6]=e=>va.formData.beneficiary.middle_name=e),class:"form-control"},null,512),[[s.Jo,va.formData.beneficiary.middle_name]])]),(0,i.Lk)("div",x,[a[84]||(a[84]=(0,i.Lk)("label",null,"Last Name *",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":a[7]||(a[7]=e=>va.formData.beneficiary.last_name=e),required:"",class:"form-control"},null,512),[[s.Jo,va.formData.beneficiary.last_name]])]),(0,i.Lk)("div",z,[a[85]||(a[85]=(0,i.Lk)("label",null,"Date of Birth *",-1)),(0,i.bo)((0,i.Lk)("input",{type:"date","onUpdate:modelValue":a[8]||(a[8]=e=>va.formData.beneficiary.birth_date=e),required:"",class:"form-control"},null,512),[[s.Jo,va.formData.beneficiary.birth_date]])]),(0,i.Lk)("div",A,[a[87]||(a[87]=(0,i.Lk)("label",null,"Gender *",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":a[9]||(a[9]=e=>va.formData.beneficiary.gender=e),required:"",class:"form-control",onChange:a[10]||(a[10]=(...e)=>ba.handleGenderChange&&ba.handleGenderChange(...e))},a[86]||(a[86]=[(0,i.Lk)("option",{value:""},"Select Gender",-1),(0,i.Lk)("option",{value:"male"},"Male",-1),(0,i.Lk)("option",{value:"female"},"Female",-1)]),544),[[s.u1,va.formData.beneficiary.gender]])]),"male"===va.formData.beneficiary.gender?((0,i.uX)(),(0,i.CE)("div",U,[a[89]||(a[89]=(0,i.Lk)("label",null,"Suffix",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":a[11]||(a[11]=e=>va.formData.beneficiary.suffix=e),class:"form-control"},a[88]||(a[88]=[(0,i.Fv)('<option value="" data-v-4c53f1ea>None</option><option value="Jr" data-v-4c53f1ea>Jr</option><option value="Sr" data-v-4c53f1ea>Sr</option><option value="II" data-v-4c53f1ea>II</option><option value="III" data-v-4c53f1ea>III</option>',5)]),512),[[s.u1,va.formData.beneficiary.suffix]])])):(0,i.Q3)("",!0),(0,i.Lk)("div",N,[a[91]||(a[91]=(0,i.Lk)("label",null,"Civil Status *",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":a[12]||(a[12]=e=>va.formData.beneficiary.civil_status_id=e),required:"",class:"form-control"},[a[90]||(a[90]=(0,i.Lk)("option",{value:""},"Select Status",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(va.civilStatuses,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e.id,value:e.id},(0,o.v_)(e.status_name),9,B)))),128))],512),[[s.u1,va.formData.beneficiary.civil_status_id]])]),(0,i.Lk)("div",T,[a[93]||(a[93]=(0,i.Lk)("label",null,"Relationship to You *",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":a[13]||(a[13]=e=>va.formData.beneficiary.relationship_to_requestor=e),required:"",class:"form-control",onChange:a[14]||(a[14]=(...e)=>ba.validateFamilyRelationship&&ba.validateFamilyRelationship(...e))},a[92]||(a[92]=[(0,i.Fv)('<option value="" data-v-4c53f1ea>Select Relationship</option><option value="spouse" data-v-4c53f1ea>Spouse</option><option value="child" data-v-4c53f1ea>Child</option><option value="parent" data-v-4c53f1ea>Parent</option><option value="sibling" data-v-4c53f1ea>Sibling</option>',5)]),544),[[s.u1,va.formData.beneficiary.relationship_to_requestor]]),a[94]||(a[94]=(0,i.Lk)("small",{class:"form-text text-muted"}," Note: You can only request documents on behalf of immediate family members (spouse, children, parents, siblings). ",-1)),va.familyRelationshipError?((0,i.uX)(),(0,i.CE)("div",V,(0,o.v_)(va.familyRelationshipError),1)):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",M,[a[96]||(a[96]=(0,i.Lk)("h4",null,"Family Member Verification",-1)),(0,i.Lk)("div",$,[a[95]||(a[95]=(0,i.Lk)("i",{class:"fas fa-info-circle"},null,-1)),(0,i.eW)(" "+(0,o.v_)(ba.familyVerificationText),1)]),(0,i.bF)(La,{label:"Family Member Verification Image",placeholder:ba.familyVerificationPlaceholder,required:!0,"accepted-types":"image/*","accepted-types-text":"Accepted: JPEG, PNG, GIF (Max 5MB)","help-text":"Upload a clear photo of the family member's valid government-issued ID for verification purposes.",onFileSelected:ba.handleBeneficiaryVerificationFile,onUploadSuccess:ba.onBeneficiaryVerificationUpload,onUploadError:ba.onBeneficiaryVerificationError,onFileRemoved:ba.onBeneficiaryVerificationRemoved},null,8,["placeholder","onFileSelected","onUploadSuccess","onUploadError","onFileRemoved"])]),a[103]||(a[103]=(0,i.Lk)("h4",null,"Address Information",-1)),(0,i.Lk)("div",O,[(0,i.Lk)("div",X,[a[97]||(a[97]=(0,i.Lk)("label",null,"House Number",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":a[15]||(a[15]=e=>va.formData.beneficiary.house_number=e),class:"form-control"},null,512),[[s.Jo,va.formData.beneficiary.house_number]])]),(0,i.Lk)("div",G,[a[98]||(a[98]=(0,i.Lk)("label",null,"Street",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":a[16]||(a[16]=e=>va.formData.beneficiary.street=e),class:"form-control"},null,512),[[s.Jo,va.formData.beneficiary.street]])]),(0,i.bo)((0,i.Lk)("input",{type:"hidden","onUpdate:modelValue":a[17]||(a[17]=e=>va.formData.beneficiary.region_code=e)},null,512),[[s.Jo,va.formData.beneficiary.region_code]]),(0,i.bo)((0,i.Lk)("input",{type:"hidden","onUpdate:modelValue":a[18]||(a[18]=e=>va.formData.beneficiary.province_code=e)},null,512),[[s.Jo,va.formData.beneficiary.province_code]]),(0,i.bo)((0,i.Lk)("input",{type:"hidden","onUpdate:modelValue":a[19]||(a[19]=e=>va.formData.beneficiary.city_code=e)},null,512),[[s.Jo,va.formData.beneficiary.city_code]]),(0,i.bo)((0,i.Lk)("input",{type:"hidden","onUpdate:modelValue":a[20]||(a[20]=e=>va.formData.beneficiary.barangay_code=e)},null,512),[[s.Jo,va.formData.beneficiary.barangay_code]]),a[99]||(a[99]=(0,i.Fv)('<div class="form-group col-span-2" data-v-4c53f1ea><div class="alert alert-info" data-v-4c53f1ea><h6 data-v-4c53f1ea><i class="fas fa-map-marker-alt me-2" data-v-4c53f1ea></i>Address Information</h6><p class="mb-0" data-v-4c53f1ea><strong data-v-4c53f1ea>Region:</strong> Region XII (SOCCSKSARGEN)<br data-v-4c53f1ea><strong data-v-4c53f1ea>Province:</strong> South Cotabato<br data-v-4c53f1ea><strong data-v-4c53f1ea>City/Municipality:</strong> General Santos City (Dadiangas)<br data-v-4c53f1ea><strong data-v-4c53f1ea>Barangay:</strong> Bula </p></div></div>',1))]),a[104]||(a[104]=(0,i.Lk)("h4",null,"Contact Information",-1)),(0,i.Lk)("div",J,[(0,i.Lk)("div",W,[a[100]||(a[100]=(0,i.Lk)("label",null,"Phone Number",-1)),(0,i.bo)((0,i.Lk)("input",{type:"tel","onUpdate:modelValue":a[21]||(a[21]=e=>va.formData.beneficiary.phone_number=e),class:"form-control",onInput:a[22]||(a[22]=e=>ba.handlePhoneInput(e,"beneficiary")),placeholder:"09123456789",maxlength:"11",pattern:"[0-9]*"},null,544),[[s.Jo,va.formData.beneficiary.phone_number]])]),(0,i.Lk)("div",Y,[a[101]||(a[101]=(0,i.Lk)("label",null,"Email Address",-1)),(0,i.bo)((0,i.Lk)("input",{type:"email","onUpdate:modelValue":a[23]||(a[23]=e=>va.formData.beneficiary.email=e),class:"form-control"},null,512),[[s.Jo,va.formData.beneficiary.email]])])])])):(0,i.Q3)("",!0),(0,i.Lk)("div",Q,[a[117]||(a[117]=(0,i.Lk)("h3",null,[(0,i.Lk)("i",{class:"fas fa-upload"}),(0,i.eW)(" Required Documents")],-1)),a[118]||(a[118]=(0,i.Lk)("p",{class:"section-description"},"Please upload the following required documents as per government regulations:",-1)),(0,i.Lk)("div",j,[a[108]||(a[108]=(0,i.Lk)("label",{class:"document-label"},[(0,i.Lk)("i",{class:"fas fa-id-card"}),(0,i.eW)(" Valid Government ID * "),(0,i.Lk)("span",{class:"document-info"},"(Driver's License, Voter's ID, Passport, etc.)")],-1)),(0,i.Lk)("div",{class:"file-upload-area",onClick:a[26]||(a[26]=e=>ba.triggerFileInput("government_id")),onDragover:a[27]||(a[27]=(0,s.D$)((()=>{}),["prevent"])),onDrop:a[28]||(a[28]=(0,s.D$)((e=>ba.handleFileDrop(e,"government_id")),["prevent"]))},[(0,i.Lk)("input",{ref:"governmentIdInput",type:"file",accept:"image/*,.pdf",onChange:a[24]||(a[24]=e=>ba.handleFileSelect(e,"government_id")),style:{display:"none"},required:""},null,544),va.uploadedFiles.government_id?((0,i.uX)(),(0,i.CE)("div",H,[a[107]||(a[107]=(0,i.Lk)("i",{class:"fas fa-file-check"},null,-1)),(0,i.Lk)("span",null,(0,o.v_)(va.uploadedFiles.government_id.name),1),(0,i.Lk)("button",{type:"button",onClick:a[25]||(a[25]=(0,s.D$)((e=>ba.removeFile("government_id")),["stop"])),class:"remove-file"},a[106]||(a[106]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)]))])):((0,i.uX)(),(0,i.CE)("div",K,a[105]||(a[105]=[(0,i.Lk)("i",{class:"fas fa-cloud-upload-alt"},null,-1),(0,i.Lk)("p",null,"Click to upload or drag and drop",-1),(0,i.Lk)("small",null,"JPG, PNG, PDF (Max 5MB)",-1)])))],32)]),(0,i.Lk)("div",Z,[a[112]||(a[112]=(0,i.Lk)("label",{class:"document-label"},[(0,i.Lk)("i",{class:"fas fa-home"}),(0,i.eW)(" Proof of Residency * "),(0,i.Lk)("span",{class:"document-info"},"(Utility Bill, Lease Agreement, Barangay Certificate)")],-1)),(0,i.Lk)("div",{class:"file-upload-area",onClick:a[31]||(a[31]=e=>ba.triggerFileInput("proof_of_residency")),onDragover:a[32]||(a[32]=(0,s.D$)((()=>{}),["prevent"])),onDrop:a[33]||(a[33]=(0,s.D$)((e=>ba.handleFileDrop(e,"proof_of_residency")),["prevent"]))},[(0,i.Lk)("input",{ref:"proofOfResidencyInput",type:"file",accept:"image/*,.pdf",onChange:a[29]||(a[29]=e=>ba.handleFileSelect(e,"proof_of_residency")),style:{display:"none"},required:""},null,544),va.uploadedFiles.proof_of_residency?((0,i.uX)(),(0,i.CE)("div",ae,[a[111]||(a[111]=(0,i.Lk)("i",{class:"fas fa-file-check"},null,-1)),(0,i.Lk)("span",null,(0,o.v_)(va.uploadedFiles.proof_of_residency.name),1),(0,i.Lk)("button",{type:"button",onClick:a[30]||(a[30]=(0,s.D$)((e=>ba.removeFile("proof_of_residency")),["stop"])),class:"remove-file"},a[110]||(a[110]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)]))])):((0,i.uX)(),(0,i.CE)("div",ee,a[109]||(a[109]=[(0,i.Lk)("i",{class:"fas fa-cloud-upload-alt"},null,-1),(0,i.Lk)("p",null,"Click to upload or drag and drop",-1),(0,i.Lk)("small",null,"JPG, PNG, PDF (Max 5MB)",-1)])))],32)]),(0,i.Lk)("div",te,[a[116]||(a[116]=(0,i.Lk)("label",{class:"document-label"},[(0,i.Lk)("i",{class:"fas fa-certificate"}),(0,i.eW)(" Community Tax Certificate (Cedula) "),(0,i.Lk)("span",{class:"document-info optional"},"(Optional - if available)")],-1)),(0,i.Lk)("div",{class:"file-upload-area",onClick:a[36]||(a[36]=e=>ba.triggerFileInput("cedula")),onDragover:a[37]||(a[37]=(0,s.D$)((()=>{}),["prevent"])),onDrop:a[38]||(a[38]=(0,s.D$)((e=>ba.handleFileDrop(e,"cedula")),["prevent"]))},[(0,i.Lk)("input",{ref:"cedulaInput",type:"file",accept:"image/*,.pdf",onChange:a[34]||(a[34]=e=>ba.handleFileSelect(e,"cedula")),style:{display:"none"}},null,544),va.uploadedFiles.cedula?((0,i.uX)(),(0,i.CE)("div",oe,[a[115]||(a[115]=(0,i.Lk)("i",{class:"fas fa-file-check"},null,-1)),(0,i.Lk)("span",null,(0,o.v_)(va.uploadedFiles.cedula.name),1),(0,i.Lk)("button",{type:"button",onClick:a[35]||(a[35]=(0,s.D$)((e=>ba.removeFile("cedula")),["stop"])),class:"remove-file"},a[114]||(a[114]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)]))])):((0,i.uX)(),(0,i.CE)("div",ie,a[113]||(a[113]=[(0,i.Lk)("i",{class:"fas fa-cloud-upload-alt"},null,-1),(0,i.Lk)("p",null,"Click to upload or drag and drop",-1),(0,i.Lk)("small",null,"JPG, PNG, PDF (Max 5MB)",-1)])))],32)])]),a[120]||(a[120]=(0,i.Fv)('<div class="form-section" data-v-4c53f1ea><div class="legal-notice" data-v-4c53f1ea><h3 data-v-4c53f1ea><i class="fas fa-info-circle" data-v-4c53f1ea></i> Important Notice</h3><p data-v-4c53f1ea>This barangay clearance certifies that you are a resident in good standing with no pending legal cases or disputes within the barangay. Only information required by law is collected.</p><div class="data-privacy-note" data-v-4c53f1ea><small data-v-4c53f1ea><i class="fas fa-shield-alt" data-v-4c53f1ea></i> Your personal information is protected under the Data Privacy Act of 2012.</small></div></div></div>',1))])):(0,i.Q3)("",!0),2===va.currentStep?((0,i.uX)(),(0,i.CE)("div",se,[a[135]||(a[135]=(0,i.Lk)("div",{class:"step-header"},[(0,i.Lk)("h2",null,"Purpose and Additional Details"),(0,i.Lk)("p",null,"Please provide the purpose and any additional information")],-1)),(0,i.Lk)("div",ne,[(0,i.Lk)("div",re,[a[122]||(a[122]=(0,i.Lk)("label",{for:"purpose_category"},"Purpose Category *",-1)),(0,i.bo)((0,i.Lk)("select",{id:"purpose_category","onUpdate:modelValue":a[39]||(a[39]=e=>va.formData.purpose_category_id=e),required:"",onChange:a[40]||(a[40]=(...e)=>ba.onPurposeChange&&ba.onPurposeChange(...e))},[a[121]||(a[121]=(0,i.Lk)("option",{value:""},"Select purpose",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(va.purposeCategories,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e.id,value:e.id},(0,o.v_)(e.category_name),9,le)))),128))],544),[[s.u1,va.formData.purpose_category_id]])]),ba.shouldShowPurposeDetails?((0,i.uX)(),(0,i.CE)("div",de,[a[123]||(a[123]=(0,i.Lk)("label",{for:"purpose_details"},"Purpose Details *",-1)),(0,i.bo)((0,i.Lk)("textarea",{id:"purpose_details","onUpdate:modelValue":a[41]||(a[41]=e=>va.formData.purpose_details=e),rows:"3",required:"",placeholder:"Please provide specific details about the purpose of this clearance"},null,512),[[s.Jo,va.formData.purpose_details]])])):(0,i.Q3)("",!0),(0,i.Lk)("div",ce,[a[128]||(a[128]=(0,i.Lk)("label",{for:"pending_cases"},"Pending Cases Declaration *",-1)),(0,i.Lk)("div",ue,[(0,i.Lk)("label",pe,[(0,i.bo)((0,i.Lk)("input",{type:"radio","onUpdate:modelValue":a[42]||(a[42]=e=>va.formData.has_pending_cases=e),value:!1,required:""},null,512),[[s.XL,va.formData.has_pending_cases]]),a[124]||(a[124]=(0,i.Lk)("span",{class:"radio-custom"},null,-1)),a[125]||(a[125]=(0,i.eW)(" No pending cases "))]),(0,i.Lk)("label",fe,[(0,i.bo)((0,i.Lk)("input",{type:"radio","onUpdate:modelValue":a[43]||(a[43]=e=>va.formData.has_pending_cases=e),value:!0,required:""},null,512),[[s.XL,va.formData.has_pending_cases]]),a[126]||(a[126]=(0,i.Lk)("span",{class:"radio-custom"},null,-1)),a[127]||(a[127]=(0,i.eW)(" Has pending cases "))])])]),va.formData.has_pending_cases?((0,i.uX)(),(0,i.CE)("div",me,[a[129]||(a[129]=(0,i.Lk)("label",{for:"pending_cases_details"},"Pending Cases Details *",-1)),(0,i.bo)((0,i.Lk)("textarea",{id:"pending_cases_details","onUpdate:modelValue":a[44]||(a[44]=e=>va.formData.pending_cases_details=e),rows:"3",required:"",placeholder:"Please provide details about pending cases"},null,512),[[s.Jo,va.formData.pending_cases_details]])])):(0,i.Q3)("",!0),(0,i.Lk)("div",he,[a[134]||(a[134]=(0,i.Lk)("label",{for:"voter_registration_status"},"Voter Registration Status *",-1)),(0,i.Lk)("div",ge,[(0,i.Lk)("label",ye,[(0,i.bo)((0,i.Lk)("input",{type:"radio","onUpdate:modelValue":a[45]||(a[45]=e=>va.formData.voter_registration_status=e),value:!0,required:""},null,512),[[s.XL,va.formData.voter_registration_status]]),a[130]||(a[130]=(0,i.Lk)("span",{class:"radio-custom"},null,-1)),a[131]||(a[131]=(0,i.eW)(" Registered voter "))]),(0,i.Lk)("label",ke,[(0,i.bo)((0,i.Lk)("input",{type:"radio","onUpdate:modelValue":a[46]||(a[46]=e=>va.formData.voter_registration_status=e),value:!1,required:""},null,512),[[s.XL,va.formData.voter_registration_status]]),a[132]||(a[132]=(0,i.Lk)("span",{class:"radio-custom"},null,-1)),a[133]||(a[133]=(0,i.eW)(" Not registered voter "))])])])])])):(0,i.Q3)("",!0),3===va.currentStep?((0,i.uX)(),(0,i.CE)("div",_e,[a[152]||(a[152]=(0,i.Lk)("div",{class:"step-header"},[(0,i.Lk)("h2",null,"Payment Information"),(0,i.Lk)("p",null,"Choose your preferred payment method")],-1)),(0,i.Lk)("div",ve,[(0,i.Lk)("div",be,[a[138]||(a[138]=(0,i.Lk)("h3",null,"Fee Breakdown",-1)),(0,i.Lk)("div",Le,[(0,i.Lk)("div",De,[a[136]||(a[136]=(0,i.Lk)("span",null,"Barangay Clearance Fee",-1)),(0,i.Lk)("span",null,"₱"+(0,o.v_)(ba.formatCurrency(va.baseFee)),1)]),(0,i.Lk)("div",Ce,[a[137]||(a[137]=(0,i.Lk)("span",null,"Total Amount",-1)),(0,i.Lk)("span",null,"₱"+(0,o.v_)(ba.formatCurrency(va.totalFee)),1)])])])]),(0,i.Lk)("div",Pe,[a[139]||(a[139]=(0,i.Lk)("h3",null,"Select Payment Method",-1)),(0,i.Lk)("div",Fe,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(va.paymentMethods,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:(0,o.C4)(["payment-option",{selected:va.formData.payment_method_id===e.id}]),onClick:a=>ba.selectPaymentMethod(e.id)},[(0,i.Lk)("div",Se,[(0,i.Lk)("i",{class:(0,o.C4)(ba.getPaymentIcon(e.method_code))},null,2)]),(0,i.Lk)("div",Ee,[(0,i.Lk)("h4",null,(0,o.v_)(e.method_name),1),e.description?((0,i.uX)(),(0,i.CE)("p",Ie,(0,o.v_)(e.description),1)):(0,i.Q3)("",!0),"group"===e.group_type&&e.grouped_methods?((0,i.uX)(),(0,i.CE)("div",qe,[(0,i.Lk)("small",Re," Includes: "+(0,o.v_)(e.grouped_methods.map((e=>ba.getPaymentMethodDisplayName(e.method_code))).join(", ")),1)])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",xe,[(0,i.bo)((0,i.Lk)("input",{type:"radio",value:e.id,"onUpdate:modelValue":a[47]||(a[47]=e=>va.formData.payment_method_id=e),required:""},null,8,ze),[[s.XL,va.formData.payment_method_id]])])],10,we)))),128))])]),(0,i.Lk)("div",Ae,[a[151]||(a[151]=(0,i.Lk)("h3",null,"Document Pickup",-1)),(0,i.Lk)("div",Ue,[(0,i.Lk)("label",Ne,[(0,i.bo)((0,i.Lk)("input",{type:"radio","onUpdate:modelValue":a[48]||(a[48]=e=>va.pickupOption=e),value:"self",onChange:a[49]||(a[49]=(...e)=>ba.handlePickupOptionChange&&ba.handlePickupOptionChange(...e))},null,544),[[s.XL,va.pickupOption]]),a[141]||(a[141]=(0,i.Lk)("span",{class:"radio-custom"},null,-1)),(0,i.Lk)("div",Be,[a[140]||(a[140]=(0,i.Lk)("strong",null,"I will pick up personally",-1)),(0,i.Lk)("p",null,(0,o.v_)(va.formData.is_third_party_request?"You (the requestor)":"You")+" will collect the document",1)])]),(0,i.Lk)("label",Te,[(0,i.bo)((0,i.Lk)("input",{type:"radio","onUpdate:modelValue":a[50]||(a[50]=e=>va.pickupOption=e),value:"authorized",onChange:a[51]||(a[51]=(...e)=>ba.handlePickupOptionChange&&ba.handlePickupOptionChange(...e))},null,544),[[s.XL,va.pickupOption]]),a[142]||(a[142]=(0,i.Lk)("span",{class:"radio-custom"},null,-1)),a[143]||(a[143]=(0,i.Lk)("div",{class:"option-content"},[(0,i.Lk)("strong",null,"Someone else will pick up"),(0,i.Lk)("p",null,"Authorize another person to collect the document")],-1))])]),"authorized"===va.pickupOption?((0,i.uX)(),(0,i.CE)("div",Ve,[a[149]||(a[149]=(0,i.Lk)("h4",null,"Authorized Pickup Person",-1)),a[150]||(a[150]=(0,i.Lk)("div",{class:"alert alert-info"},[(0,i.Lk)("i",{class:"fas fa-info-circle"}),(0,i.eW)(" You will need to upload an authorization letter and valid ID after submitting this request. ")],-1)),(0,i.Lk)("div",Me,[(0,i.Lk)("div",$e,[a[144]||(a[144]=(0,i.Lk)("label",null,"First Name *",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":a[52]||(a[52]=e=>va.formData.authorized_pickup.first_name=e),required:"",class:"form-control"},null,512),[[s.Jo,va.formData.authorized_pickup.first_name]])]),(0,i.Lk)("div",Oe,[a[145]||(a[145]=(0,i.Lk)("label",null,"Middle Name",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":a[53]||(a[53]=e=>va.formData.authorized_pickup.middle_name=e),class:"form-control"},null,512),[[s.Jo,va.formData.authorized_pickup.middle_name]])]),(0,i.Lk)("div",Xe,[a[146]||(a[146]=(0,i.Lk)("label",null,"Last Name *",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":a[54]||(a[54]=e=>va.formData.authorized_pickup.last_name=e),required:"",class:"form-control"},null,512),[[s.Jo,va.formData.authorized_pickup.last_name]])]),(0,i.Lk)("div",Ge,[a[147]||(a[147]=(0,i.Lk)("label",null,"Phone Number *",-1)),(0,i.bo)((0,i.Lk)("input",{type:"tel","onUpdate:modelValue":a[55]||(a[55]=e=>va.formData.authorized_pickup.phone_number=e),required:"",class:"form-control",onInput:a[56]||(a[56]=e=>ba.handlePhoneInput(e,"authorized_pickup")),placeholder:"09123456789",maxlength:"11",pattern:"[0-9]*"},null,544),[[s.Jo,va.formData.authorized_pickup.phone_number]])]),(0,i.Lk)("div",Je,[(0,i.bF)(La,{label:"Valid ID Image",placeholder:"Click to upload pickup person's valid ID",required:!0,"accepted-types":"image/*","accepted-types-text":"Accepted: JPEG, PNG, GIF (Max 5MB)","help-text":"Upload a clear photo of the pickup person's valid government-issued ID.",onFileSelected:ba.handlePickupIdFile,onUploadSuccess:ba.onPickupIdUpload,onUploadError:ba.onPickupIdError,onFileRemoved:ba.onPickupIdRemoved},null,8,["onFileSelected","onUploadSuccess","onUploadError","onFileRemoved"])]),(0,i.Lk)("div",We,[(0,i.bF)(La,{label:"Authorization Letter",placeholder:"Click to upload authorization letter",required:!0,"accepted-types":"image/*,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document","accepted-types-text":"Accepted: Images, PDF, Word documents (Max 5MB)","help-text":"Upload the authorization letter allowing this person to pick up the document on your behalf.",onFileSelected:ba.handlePickupAuthFile,onUploadSuccess:ba.onPickupAuthUpload,onUploadError:ba.onPickupAuthError,onFileRemoved:ba.onPickupAuthRemoved},null,8,["onFileSelected","onUploadSuccess","onUploadError","onFileRemoved"])]),(0,i.Lk)("div",Ye,[(0,i.Lk)("label",null,"Relationship to "+(0,o.v_)(va.formData.is_third_party_request?"Beneficiary":"You")+" *",1),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":a[57]||(a[57]=e=>va.formData.authorized_pickup.relationship_to_beneficiary=e),required:"",class:"form-control"},a[148]||(a[148]=[(0,i.Fv)('<option value="" data-v-4c53f1ea>Select Relationship</option><option value="spouse" data-v-4c53f1ea>Spouse</option><option value="child" data-v-4c53f1ea>Child</option><option value="parent" data-v-4c53f1ea>Parent</option><option value="sibling" data-v-4c53f1ea>Sibling</option><option value="relative" data-v-4c53f1ea>Other Relative</option><option value="friend" data-v-4c53f1ea>Friend</option><option value="colleague" data-v-4c53f1ea>Colleague</option>',8)]),512),[[s.u1,va.formData.authorized_pickup.relationship_to_beneficiary]])])])])):(0,i.Q3)("",!0)])])):(0,i.Q3)("",!0),4===va.currentStep?((0,i.uX)(),(0,i.CE)("div",Qe,[a[169]||(a[169]=(0,i.Lk)("div",{class:"step-header"},[(0,i.Lk)("h2",null,"Review Your Request"),(0,i.Lk)("p",null,"Please review all information before submitting")],-1)),(0,i.Lk)("div",je,[(0,i.Lk)("div",Ke,[a[156]||(a[156]=(0,i.Lk)("h3",null,"Personal Information",-1)),(0,i.Lk)("div",He,[(0,i.Lk)("div",Ze,[a[153]||(a[153]=(0,i.Lk)("label",null,"Full Name:",-1)),(0,i.Lk)("span",null,(0,o.v_)(ba.getFullName()),1)]),(0,i.Lk)("div",ea,[a[154]||(a[154]=(0,i.Lk)("label",null,"Address:",-1)),(0,i.Lk)("span",null,(0,o.v_)(ba.getFullAddress()),1)]),(0,i.Lk)("div",aa,[a[155]||(a[155]=(0,i.Lk)("label",null,"Phone:",-1)),(0,i.Lk)("span",null,(0,o.v_)(va.clientData?.phone_number||va.clientData?.profile?.phone_number||"Not provided"),1)])])]),(0,i.Lk)("div",ta,[a[162]||(a[162]=(0,i.Lk)("h3",null,"Purpose & Details",-1)),(0,i.Lk)("div",ia,[(0,i.Lk)("div",oa,[a[157]||(a[157]=(0,i.Lk)("label",null,"Purpose:",-1)),(0,i.Lk)("span",null,(0,o.v_)(ba.getPurposeCategoryName()),1)]),ba.shouldShowPurposeDetails&&va.formData.purpose_details?((0,i.uX)(),(0,i.CE)("div",sa,[a[158]||(a[158]=(0,i.Lk)("label",null,"Details:",-1)),(0,i.Lk)("span",null,(0,o.v_)(va.formData.purpose_details),1)])):(0,i.Q3)("",!0),(0,i.Lk)("div",na,[a[159]||(a[159]=(0,i.Lk)("label",null,"Pending Cases:",-1)),(0,i.Lk)("span",null,(0,o.v_)(va.formData.has_pending_cases?"Yes":"No"),1)]),va.formData.has_pending_cases&&va.formData.pending_cases_details?((0,i.uX)(),(0,i.CE)("div",ra,[a[160]||(a[160]=(0,i.Lk)("label",null,"Case Details:",-1)),(0,i.Lk)("span",null,(0,o.v_)(va.formData.pending_cases_details),1)])):(0,i.Q3)("",!0),(0,i.Lk)("div",la,[a[161]||(a[161]=(0,i.Lk)("label",null,"Voter Registration:",-1)),(0,i.Lk)("span",null,(0,o.v_)(!0===va.formData.voter_registration_status?"Registered voter":!1===va.formData.voter_registration_status?"Not registered voter":"Not specified"),1)])])]),(0,i.Lk)("div",da,[a[165]||(a[165]=(0,i.Lk)("h3",null,"Payment Information",-1)),(0,i.Lk)("div",ca,[(0,i.Lk)("div",ua,[a[163]||(a[163]=(0,i.Lk)("label",null,"Payment Method:",-1)),(0,i.Lk)("span",null,(0,o.v_)(ba.getPaymentMethodName()),1)]),(0,i.Lk)("div",pa,[a[164]||(a[164]=(0,i.Lk)("label",null,"Total Amount:",-1)),(0,i.Lk)("span",fa,"₱"+(0,o.v_)(ba.formatCurrency(va.totalFee)),1)])])])]),(0,i.Lk)("div",ma,[(0,i.Lk)("label",ha,[(0,i.bo)((0,i.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[58]||(a[58]=e=>va.formData.agree_to_terms=e),required:""},null,512),[[s.lH,va.formData.agree_to_terms]]),a[166]||(a[166]=(0,i.Lk)("span",{class:"checkbox-custom"},null,-1)),a[167]||(a[167]=(0,i.eW)(" I agree to the ")),(0,i.Lk)("a",{href:"#",onClick:a[59]||(a[59]=(0,s.D$)(((...e)=>ba.showTerms&&ba.showTerms(...e)),["prevent"]))},"terms and conditions"),a[168]||(a[168]=(0,i.eW)(" and certify that all information provided is true and accurate. "))])])])):(0,i.Q3)("",!0),(0,i.Lk)("div",ga,[va.currentStep>1?((0,i.uX)(),(0,i.CE)("button",{key:0,type:"button",class:"btn-secondary",onClick:a[60]||(a[60]=(...e)=>ba.previousStep&&ba.previousStep(...e))},a[170]||(a[170]=[(0,i.Lk)("i",{class:"fas fa-chevron-left"},null,-1),(0,i.eW)(" Previous ")]))):(0,i.Q3)("",!0),va.currentStep<4?((0,i.uX)(),(0,i.CE)("button",{key:1,type:"button",class:"btn-primary",onClick:a[61]||(a[61]=(...e)=>ba.nextStep&&ba.nextStep(...e)),disabled:!ba.canProceedToNextStep()},a[171]||(a[171]=[(0,i.eW)(" Next "),(0,i.Lk)("i",{class:"fas fa-chevron-right"},null,-1)]),8,ya)):(0,i.Q3)("",!0),4===va.currentStep?((0,i.uX)(),(0,i.CE)("button",{key:2,type:"submit",class:"btn-submit",disabled:va.submitting||!va.formData.agree_to_terms},[va.submitting?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[a[172]||(a[172]=(0,i.Lk)("i",{class:"fas fa-spinner fa-spin"},null,-1)),a[173]||(a[173]=(0,i.eW)(" Submitting... "))],64)):((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[a[174]||(a[174]=(0,i.Lk)("i",{class:"fas fa-paper-plane"},null,-1)),a[175]||(a[175]=(0,i.eW)(" Submit Request "))],64))],8,ka)):(0,i.Q3)("",!0)])],32)])])])}t(4114),t(116),t(7588);var va=t(1939),ba=t(6212),La=t(2599),Da=t(1137),Ca=t(1919),Pa={name:"BarangayClearanceRequest",components:{FileUpload:Ca.A},data(){return{currentStep:1,submitting:!1,purposeCategories:[],paymentMethods:[],originalPaymentMethods:[],baseFee:150,totalFee:150,familyRelationshipError:null,formData:{document_type_id:2,purpose_category_id:"",purpose_details:"",is_third_party_request:!1,beneficiary:{first_name:"",middle_name:"",last_name:"",suffix:"",birth_date:"",gender:"",civil_status_id:"",nationality:"Filipino",phone_number:"",email:"",house_number:"",street:"",subdivision:"",barangay:"Bula",city_municipality:"General Santos City (Dadiangas)",province:"South Cotabato",postal_code:"",years_of_residency:null,months_of_residency:null,relationship_to_requestor:"",region_code:"12",province_code:"1263",city_code:"126303",barangay_code:"126303005"},authorized_pickup:{first_name:"",middle_name:"",last_name:"",suffix:"",phone_number:"",email:"",relationship_to_beneficiary:""},has_pending_cases:!1,pending_cases_details:"",voter_registration_status:null,payment_method_id:"",agree_to_terms:!1},uploadedFiles:{government_id:null,proof_of_residency:null,cedula:null,beneficiary_verification:null,pickup_id_image:null,pickup_authorization:null},uploadErrors:{},maxFileSize:5242880,allowedFileTypes:["image/jpeg","image/jpg","image/png","application/pdf"],pickupOption:"self",civilStatuses:[],clientData:null,regions:[],provinces:[],cities:[],barangays:[],filteredProvinces:[],filteredCities:[],filteredBarangays:[],isValidating:!1}},computed:{cachedClientData(){return ba["default"].getCurrentUser()},shouldShowPurposeDetails(){return 10===this.formData.purpose_category_id},familyVerificationPlaceholder(){return"spouse"===this.formData.beneficiary.relationship_to_requestor?"Click to upload spouse verification image":"Click to upload family Member Verification Image"},familyVerificationText(){return"spouse"===this.formData.beneficiary.relationship_to_requestor?"To verify that this person is indeed your spouse, please upload a clear photo of Marriage Application.":"To verify that this person is indeed your family member, please upload a clear photo of their valid ID (Driver's License, National ID, Passport, etc.)."}},async mounted(){await this.loadFormData()},methods:{async loadFormData(){try{console.log("Loading fresh profile data...");const e=await ba["default"].getProfile();e.success?(this.clientData=e.data,console.log("Fresh profile data loaded:",this.clientData)):(this.clientData=this.cachedClientData,console.log("Using cached profile data:",this.clientData));const[a,t]=await Promise.all([va.A.getPurposeCategories(),va.A.getPaymentMethods(),this.loadCivilStatuses(),this.loadAddressData()]);this.purposeCategories=a.data||[],this.originalPaymentMethods=t.data||[],this.paymentMethods=La["default"].groupPaymentMethods(this.originalPaymentMethods)}catch(e){console.error("Error loading form data:",e),this.clientData=this.cachedClientData,this.showToast("Error","Failed to load some form data","error")}},getFullName(){const e=this.clientData||this.clientData?.profile;return e?`${e.first_name||""} ${e.middle_name||""} ${e.last_name||""}`.trim():"N/A"},getFullAddress(){const e=this.clientData||this.clientData?.profile;if(!e)return"Not provided";const a=[e.house_number,e.street,e.subdivision,e.barangay,e.city_municipality||e.city,e.province].filter(Boolean);return a.length>0?a.join(", "):"Not provided"},getCivilStatusName(e){const a={1:"Single",2:"Married",3:"Divorced",4:"Widowed",5:"Separated"};return a[e]||"Not provided"},getResidencyDisplay(){const e=this.clientData||this.clientData?.profile;if(!e)return"Not provided";const a=e.years_of_residency,t=e.months_of_residency;if(!a&&!t)return"Not provided";const i=[];return a&&i.push(`${a} year${a>1?"s":""}`),t&&i.push(`${t} month${t>1?"s":""}`),i.join(" and ")},formatDate(e){return e?new Date(e).toLocaleDateString():"Not provided"},formatCurrency(e){return parseFloat(e).toFixed(2)},canProceedToNextStep(){switch(this.currentStep){case 1:{const e=this.uploadedFiles.government_id&&this.uploadedFiles.proof_of_residency;return!!e&&(!this.formData.is_third_party_request||this.validateBeneficiaryData())}case 2:{let e=this.formData.purpose_category_id&&null!==this.formData.has_pending_cases&&null!==this.formData.voter_registration_status;return this.shouldShowPurposeDetails&&(e=e&&this.formData.purpose_details),e}case 3:{const e=this.formData.payment_method_id;return!!e&&("authorized"!==this.pickupOption||this.validateAuthorizedPickup())}default:return!0}},nextStep(){this.canProceedToNextStep()&&this.currentStep<4&&this.currentStep++},previousStep(){this.currentStep>1&&this.currentStep--},onPurposeChange(){this.shouldShowPurposeDetails||(this.formData.purpose_details="")},sanitizeRequestData(e){const a={};for(const[t,i]of Object.entries(e))a[t]=void 0===i||""===i?null:"object"===typeof i&&null!==i?this.sanitizeRequestData(i):i;return a},redirectToCedula(){this.$router.push("/client/cedula-request")},selectPaymentMethod(e){this.formData.payment_method_id=e},getActualPaymentMethodId(){return La["default"].getActualPaymentMethodId(this.formData.payment_method_id,this.originalPaymentMethods)},getPaymentIcon(e){const a={CASH:"fas fa-money-bill",ONLINE_PAYMENT_GROUP:"fas fa-credit-card",PAYMONGO_CARD:"fas fa-credit-card",PAYMONGO_GCASH:"fab fa-google-pay",PAYMONGO_GRABPAY:"fas fa-mobile-alt",PAYMONGO_PAYMAYA:"fas fa-wallet",PAYMONGO_BANK:"fas fa-university"};return a[e]||"fas fa-credit-card"},getPurposeCategoryName(){const e=this.purposeCategories.find((e=>e.id===this.formData.purpose_category_id));return e?.category_name||""},getPaymentMethodName(){const e=this.paymentMethods.find((e=>e.id===this.formData.payment_method_id));return e?.method_name||""},getPaymentMethodDisplayName(e){return La["default"].getPaymentMethodDisplayName(e)},handlePhoneInput(e,a){const t=e.target.value,i=t.replace(/\D/g,""),o=i.substring(0,11);"beneficiary"===a?this.formData.beneficiary.phone_number=o:"authorized_pickup"===a&&(this.formData.authorized_pickup.phone_number=o)},async handleSubmit(){if(this.formData.agree_to_terms){if(console.log("🔍 DEBUG: pickupOption =",this.pickupOption),console.log("🔍 DEBUG: authorized_pickup data =",JSON.stringify(this.formData.authorized_pickup,null,2)),console.log("🔍 DEBUG: uploadedFiles =",this.uploadedFiles),"authorized"===this.pickupOption){if(console.log("🔍 Running final validation for authorized pickup..."),!this.validateAuthorizedPickup(!0))return console.log("❌ Validation failed, stopping submission"),void(this.submitting=!1);console.log("✅ Validation passed, continuing with submission")}try{this.submitting=!0;const e=this.sanitizeRequestData({document_type_id:parseInt(this.formData.document_type_id)||2,purpose_category_id:parseInt(this.formData.purpose_category_id)||1,purpose_details:this.shouldShowPurposeDetails&&this.formData.purpose_details&&this.formData.purpose_details.length>=10?this.formData.purpose_details:null,payment_method_id:this.getActualPaymentMethodId(),delivery_method:"pickup",priority:"normal",is_third_party_request:this.formData.is_third_party_request||!1,requestor_notes:null,beneficiary:this.formData.is_third_party_request?this.formData.beneficiary:null,authorized_pickup:"authorized"===this.pickupOption?this.formData.authorized_pickup:null,has_pending_cases:Boolean(this.formData.has_pending_cases),pending_cases_details:this.formData.pending_cases_details||null,voter_registration_status:null!==this.formData.voter_registration_status?Boolean(this.formData.voter_registration_status):null,total_fee:this.totalFee||150,total_document_fee:150});console.log("Submitting request data:",e);const a=await va.A.submitRequest(e),t=a.data.id;console.log("Request created with ID:",t);const i=this.uploadedFiles.government_id||this.uploadedFiles.proof_of_residency||this.uploadedFiles.cedula;i&&(console.log("Uploading documents..."),await this.uploadDocumentsToRequest(t)),this.formData.is_third_party_request&&this.uploadedFiles.beneficiary_verification&&(console.log("📤 Uploading beneficiary verification..."),await this.uploadBeneficiaryVerification(t)),"authorized"===this.pickupOption&&(console.log("📤 Uploading pickup authorization files..."),await this.uploadPickupFiles(t)),this.showToast("Success","Request submitted successfully!","success"),this.$router.push({name:"RequestDetails",params:{id:t}})}catch(e){console.error("Error submitting request:",e),console.error("Error details:",{status:e.response?.status,data:e.response?.data,message:e.message});let a="Failed to submit request";e.response?.data?.message?a=e.response.data.message:e.response?.data?.errors?a=e.response.data.errors.map((e=>e.msg)).join(", "):e.message&&(a=e.message),this.showToast("Error",a,"error")}finally{this.submitting=!1}}},async uploadDocumentsToRequest(e){try{const a=[],t=["government_id","proof_of_residency","cedula"];if(Object.entries(this.uploadedFiles).forEach((([e,i])=>{i&&t.includes(e)&&a.push({type:e,file:i})})),0===a.length)return void console.log("No main documents to upload");console.log("📤 Uploading main documents:",a.map((e=>e.type)));const i=await va.A.uploadDocuments(e,a);i.success?(console.log("Documents uploaded successfully:",i.data),this.showToast("Success",`${i.data.total_uploaded} document(s) uploaded successfully`,"success")):(console.error("Document upload failed:",i),this.showToast("Warning","Request submitted but some documents failed to upload","warning"))}catch(a){console.error("Document upload error:",a),this.showToast("Warning","Request submitted but document upload failed. You can upload documents later.","warning")}},async uploadPickupFiles(e){try{console.log("🔍 Starting file upload for request:",e);const a=(await Promise.resolve().then(t.bind(t,4300))).default,i=await a.get(`/client/document-requests/${e}/authorization-status`),o=i.data.data?.pickup_person?.id;if(!o)return console.error("❌ No pickup person ID found"),void console.error("❌ Response data:",i.data);if(console.log("✅ Found pickup person ID:",o),this.uploadedFiles.pickup_id_image){console.log("📤 Uploading pickup ID image...");const e=new FormData;e.append("id_image",this.uploadedFiles.pickup_id_image);const t=await a.post(`/verification-documents/pickup-person/${o}/id-image`,e,{headers:{"Content-Type":"multipart/form-data"}});console.log("✅ ID image uploaded successfully:",t.data)}if(this.uploadedFiles.pickup_authorization){console.log("📤 Uploading authorization document...");const e=new FormData;e.append("authorization_document",this.uploadedFiles.pickup_authorization);const t=await a.post(`/verification-documents/pickup-person/${o}/authorization-document`,e,{headers:{"Content-Type":"multipart/form-data"}});console.log("✅ Authorization document uploaded successfully:",t.data)}console.log("🎉 All pickup files uploaded successfully")}catch(a){console.error("❌ Error uploading pickup files:",a),console.error("❌ Error response:",a.response?.data),this.showToast("Warning","Request created but some files failed to upload. You can upload them later.","warning")}},async uploadBeneficiaryVerification(e){try{console.log("🔍 Starting beneficiary verification upload for request:",e);const a=(await Promise.resolve().then(t.bind(t,4300))).default,i=await a.get(`/client/document-requests/${e}`);if(!i.data.success||!i.data.data.beneficiary)throw new Error("Beneficiary information not found");const o=i.data.data.beneficiary.id;console.log("📋 Found beneficiary ID:",o);const s=new FormData;s.append("verification_image",this.uploadedFiles.beneficiary_verification);const n=await a.post(`/verification-documents/beneficiary/${o}/verification-image`,s,{headers:{"Content-Type":"multipart/form-data"}});if(!n.data.success)throw new Error(n.data.message||"Upload failed");console.log("✅ Beneficiary verification uploaded successfully"),this.showToast("Success","Family member verification uploaded successfully","success")}catch(a){console.error("❌ Error uploading beneficiary verification:",a),console.error("❌ Error response:",a.response?.data),this.showToast("Warning","Request created but verification image failed to upload. You can upload it later.","warning")}},goBack(){this.$router.push({name:"NewDocumentRequest"})},updateProfile(){console.log("Update profile")},triggerFileInput(e){const a={government_id:"governmentIdInput",proof_of_residency:"proofOfResidencyInput",cedula:"cedulaInput"},t=a[e];t?this.$refs[t]?this.$refs[t].click():(console.warn(`File input ref '${t}' not found`),this.$nextTick((()=>{this.$refs[t]?this.$refs[t].click():console.error(`File input ref '${t}' still not found after nextTick`)}))):console.error(`Unknown file type: ${e}`)},handleFileSelect(e,a){const t=e.target.files[0];t&&this.validateAndSetFile(t,a)},handleFileDrop(e,a){const t=e.dataTransfer.files[0];t&&this.validateAndSetFile(t,a)},validateAndSetFile(e,a){return delete this.uploadErrors[a],e.size>this.maxFileSize?(this.uploadErrors[a]="File size must be less than 5MB",void this.showToast("Error","File size must be less than 5MB","error")):this.allowedFileTypes.includes(e.type)?(this.uploadedFiles[a]=e,void this.showToast("Success",`${e.name} uploaded successfully`,"success")):(this.uploadErrors[a]="Only JPG, PNG, and PDF files are allowed",void this.showToast("Error","Only JPG, PNG, and PDF files are allowed","error"))},removeFile(e){this.uploadedFiles[e]=null,delete this.uploadErrors[e];const a={government_id:"governmentIdInput",proof_of_residency:"proofOfResidencyInput",cedula:"cedulaInput"},t=a[e];t&&this.$refs[t]?this.$refs[t].value="":console.warn(`File input ref '${t}' not found during removal`)},showTerms(){console.log("Show terms")},showToast(e,a,t="info"){console.log(`[${t.toUpperCase()}] ${e}: ${a}`);const i=document.createElement("div");if(i.className=`toast-notification toast-${t}`,i.innerHTML=`\n        <div class="toast-header">\n          <strong>${e}</strong>\n          <button type="button" class="toast-close" onclick="this.parentElement.parentElement.remove()">×</button>\n        </div>\n        <div class="toast-body">${a}</div>\n      `,!document.getElementById("toast-styles")){const e=document.createElement("style");e.id="toast-styles",e.textContent="\n          .toast-notification {\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            min-width: 300px;\n            background: white;\n            border-radius: 8px;\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n            z-index: 9999;\n            animation: slideIn 0.3s ease;\n          }\n          .toast-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            padding: 12px 16px 8px;\n            border-bottom: 1px solid #e9ecef;\n            font-weight: 600;\n          }\n          .toast-body {\n            padding: 8px 16px 12px;\n            color: #6c757d;\n          }\n          .toast-close {\n            background: none;\n            border: none;\n            font-size: 18px;\n            cursor: pointer;\n            color: #6c757d;\n            padding: 0;\n            margin-left: 8px;\n          }\n          .toast-success {\n            border-left: 4px solid #28a745;\n          }\n          .toast-error {\n            border-left: 4px solid #dc3545;\n          }\n          .toast-warning {\n            border-left: 4px solid #ffc107;\n          }\n          .toast-info {\n            border-left: 4px solid #17a2b8;\n          }\n          @keyframes slideIn {\n            from {\n              transform: translateX(100%);\n              opacity: 0;\n            }\n            to {\n              transform: translateX(0);\n              opacity: 1;\n            }\n          }\n        ",document.head.appendChild(e)}document.body.appendChild(i),setTimeout((()=>{i.parentElement&&i.remove()}),5e3)},handleRequestTypeChange(){this.formData.is_third_party_request||(this.resetBeneficiaryData(),this.familyRelationshipError=null)},handleGenderChange(){"male"!==this.formData.beneficiary.gender&&(this.formData.beneficiary.suffix="")},validateFamilyRelationship(){if(this.familyRelationshipError=null,!this.formData.is_third_party_request)return!0;const e=this.formData.beneficiary.relationship_to_requestor;if(!e)return!0;const a=["spouse","husband","wife","child","son","daughter","parent","father","mother","sibling","brother","sister"];return!!a.includes(e.toLowerCase())||(this.familyRelationshipError="You can only request documents on behalf of immediate family members (spouse, children, parents, siblings).",!1)},handlePickupOptionChange(){"authorized"!==this.pickupOption&&this.resetAuthorizedPickupData()},resetBeneficiaryData(){this.formData.beneficiary={first_name:"",middle_name:"",last_name:"",suffix:"",birth_date:"",gender:"",civil_status_id:"",nationality:"Filipino",phone_number:"",email:"",house_number:"",street:"",subdivision:"",barangay:"Bula",city_municipality:"General Santos City (Dadiangas)",province:"South Cotabato",postal_code:"",years_of_residency:null,months_of_residency:null,relationship_to_requestor:"",region:"Region XII (SOCCSKSARGEN)",region_code:"12",province_code:"1263",city_code:"126303",barangay_code:"126303005"}},resetAuthorizedPickupData(){this.formData.authorized_pickup={first_name:"",middle_name:"",last_name:"",suffix:"",phone_number:"",email:"",relationship_to_beneficiary:""},this.uploadedFiles.pickup_id_image=null,this.uploadedFiles.pickup_authorization=null},async loadCivilStatuses(){try{this.civilStatuses=[{id:1,status_name:"Single"},{id:2,status_name:"Married"},{id:3,status_name:"Widowed"},{id:4,status_name:"Divorced"},{id:5,status_name:"Separated"}]}catch(e){console.error("Error loading civil statuses:",e)}},validateBeneficiaryData(){if(!this.formData.is_third_party_request)return!0;const e=["first_name","last_name","birth_date","gender","civil_status_id","region_code","province_code","city_code","barangay_code","relationship_to_requestor"];for(const a of e)if(!this.formData.beneficiary[a])return this.showToast("Error",`Please fill in the beneficiary's ${a.replace("_"," ")}`,"error"),!1;return this.validateFamilyRelationship()?!!this.uploadedFiles.beneficiary_verification||(this.showToast("Error","Please upload the family member's verification ID image","error"),!1):(this.showToast("Error",this.familyRelationshipError,"error"),!1)},validateAuthorizedPickup(e=!1){if(console.log("🔍 validateAuthorizedPickup called with showErrors:",e),console.log("🔍 pickupOption:",this.pickupOption),console.log("🔍 authorized_pickup data:",this.formData.authorized_pickup),"authorized"!==this.pickupOption)return console.log("✅ Not authorized pickup, validation passed"),!0;if(this.isValidating)return console.log("⚠️ Validation already in progress, skipping"),!1;e&&(this.isValidating=!0,setTimeout((()=>{this.isValidating=!1}),1e3));const a=["first_name","last_name","phone_number","relationship_to_beneficiary"];for(const t of a){const a=this.formData.authorized_pickup[t];if(console.log(`🔍 Checking field ${t}:`,a),!a||""===a.trim())return e&&(console.log(`❌ Field ${t} is missing`),this.showToast("Error",`Please fill in the pickup person's ${t.replace("_"," ")}`,"error")),!1}return this.uploadedFiles.pickup_id_image?this.uploadedFiles.pickup_authorization?(console.log("✅ Authorized pickup validation passed"),!0):(e&&(console.log("❌ Missing pickup authorization"),this.showToast("Error","Please upload the authorization letter","error")),!1):(e&&(console.log("❌ Missing pickup ID image"),this.showToast("Error","Please upload the pickup person's valid ID image","error")),!1)},handleBeneficiaryVerificationFile(e){console.log("Beneficiary verification file selected:",e.name),this.uploadedFiles.beneficiary_verification=e},onBeneficiaryVerificationUpload(e){console.log("Beneficiary verification uploaded successfully:",e),this.showToast("Success","Family member verification image uploaded successfully","success")},onBeneficiaryVerificationError(e){console.error("Beneficiary verification upload error:",e),this.showToast("Error","Failed to upload verification image: "+(e.response?.data?.message||e.message),"error")},onBeneficiaryVerificationRemoved(){console.log("Beneficiary verification file removed"),this.uploadedFiles.beneficiary_verification=null},handlePickupIdFile(e){console.log("Pickup ID file selected:",e.name),this.uploadedFiles.pickup_id_image=e},onPickupIdUpload(e){console.log("Pickup ID uploaded successfully:",e),this.showToast("Success","Pickup person ID image uploaded successfully","success")},onPickupIdError(e){console.error("Pickup ID upload error:",e),this.showToast("Error","Failed to upload ID image: "+(e.response?.data?.message||e.message),"error")},onPickupIdRemoved(){console.log("Pickup ID file removed"),this.uploadedFiles.pickup_id_image=null},handlePickupAuthFile(e){console.log("Pickup authorization file selected:",e.name),this.uploadedFiles.pickup_authorization=e},onPickupAuthUpload(e){console.log("Pickup authorization uploaded successfully:",e),this.showToast("Success","Authorization document uploaded successfully","success")},onPickupAuthError(e){console.error("Pickup authorization upload error:",e),this.showToast("Error","Failed to upload authorization document: "+(e.response?.data?.message||e.message),"error")},onPickupAuthRemoved(){console.log("Pickup authorization file removed"),this.uploadedFiles.pickup_authorization=null},async loadAddressData(){try{this.regions=await Da.A.getRegions()}catch(e){console.error("Error loading address data:",e),this.showToast("Error","Failed to load address data","error")}},async onRegionChange(){try{if(this.filteredProvinces=[],this.filteredCities=[],this.filteredBarangays=[],this.formData.beneficiary.province_code="",this.formData.beneficiary.city_code="",this.formData.beneficiary.barangay_code="",this.formData.beneficiary.province="",this.formData.beneficiary.city_municipality="",this.formData.beneficiary.barangay="",this.formData.beneficiary.region="",this.formData.beneficiary.region_code){this.filteredProvinces=await Da.A.getProvincesByRegion(this.formData.beneficiary.region_code);const e=this.regions.find((e=>e.region_code===this.formData.beneficiary.region_code));e&&(this.formData.beneficiary.region=e.region_name)}}catch(e){console.error("Error loading provinces:",e),this.showToast("Error","Failed to load provinces","error")}},async onProvinceChange(){try{if(this.filteredCities=[],this.filteredBarangays=[],this.formData.beneficiary.city_code="",this.formData.beneficiary.barangay_code="",this.formData.beneficiary.city_municipality="",this.formData.beneficiary.barangay="",this.formData.beneficiary.province_code){this.filteredCities=await Da.A.getCitiesByProvince(this.formData.beneficiary.province_code);const e=this.filteredProvinces.find((e=>e.province_code===this.formData.beneficiary.province_code));e&&(this.formData.beneficiary.province=e.province_name)}}catch(e){console.error("Error loading cities:",e),this.showToast("Error","Failed to load cities","error")}},async onCityChange(){try{if(this.filteredBarangays=[],this.formData.beneficiary.barangay_code="",this.formData.beneficiary.barangay="",this.formData.beneficiary.city_code){this.filteredBarangays=await Da.A.getBarangaysByCity(this.formData.beneficiary.city_code);const e=this.filteredCities.find((e=>e.city_code===this.formData.beneficiary.city_code));e&&(this.formData.beneficiary.city_municipality=e.city_name)}}catch(e){console.error("Error loading barangays:",e),this.showToast("Error","Failed to load barangays","error")}},onBarangayChange(){if(this.formData.beneficiary.barangay_code){const e=this.filteredBarangays.find((e=>e.brgy_code===this.formData.beneficiary.barangay_code));e&&(this.formData.beneficiary.barangay=e.brgy_name)}}}},Fa=t(1241);const wa=(0,Fa.A)(Pa,[["render",_a],["__scopeId","data-v-4c53f1ea"]]);var Sa=wa}}]);