"use strict";(self["webpackChunkbosfdr"]=self["webpackChunkbosfdr"]||[]).push([[245],{3911:function(e,s,t){t(4114);var a=t(4300);class r{constructor(){this.baseURL="/users"}async getUsers(e={}){try{const s=await a["default"].get(this.baseURL,{params:e});return this.handleResponse(s)}catch(s){return this.handleError(s)}}async getUserStats(){try{const e=await a["default"].get(`${this.baseURL}/stats`);return this.handleResponse(e)}catch(e){return this.handleError(e)}}async getUser(e){try{const s=await a["default"].get(`${this.baseURL}/${e}`);return this.handleResponse(s)}catch(s){return this.handleError(s)}}async createUser(e){try{const s=await a["default"].post(this.baseURL,e);return this.handleResponse(s)}catch(s){return this.handleError(s)}}async updateUser(e,s){try{const t=await a["default"].put(`${this.baseURL}/${e}`,s);return this.handleResponse(t)}catch(t){return this.handleError(t)}}async updateUserStatus(e,s,t=""){try{const r=await a["default"].patch(`${this.baseURL}/${e}/status`,{status:s,reason:t});return this.handleResponse(r)}catch(r){return this.handleError(r)}}async deleteUser(e,s=""){try{const t=await a["default"].delete(`${this.baseURL}/${e}`,{data:{reason:s}});return this.handleResponse(t)}catch(t){return this.handleError(t)}}async resetUserPassword(e,s){try{const t=await a["default"].post(`${this.baseURL}/${e}/reset-password`,{new_password:s});return this.handleResponse(t)}catch(t){return this.handleError(t)}}async getUserActivity(e,s={}){try{const t=await a["default"].get(`${this.baseURL}/${e}/activity`,{params:s});return this.handleResponse(t)}catch(t){return this.handleError(t)}}async bulkUpdateUsers(e,s,t={}){try{const r=await a["default"].post(`${this.baseURL}/bulk`,{user_ids:e,action:s,data:t});return this.handleResponse(r)}catch(r){return this.handleError(r)}}async exportUsers(e="csv",s={}){try{const t=await a["default"].get(`${this.baseURL}/export`,{params:{format:e,...s},responseType:"blob"}),r=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");return i.href=r,i.setAttribute("download",`users_export_${(new Date).toISOString().split("T")[0]}.${e}`),document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(r),{success:!0,message:"Export completed successfully"}}catch(t){return this.handleError(t)}}async getArchivedUsers(e=1,s=10,t=""){try{const r={page:e,limit:s,...t&&{search:t}},i=await a["default"].get(`${this.baseURL}/get-archived-users`,{params:r});return this.handleResponse(i)}catch(r){return this.handleError(r)}}async restoreUser(e){try{const s=await a["default"].patch(`${this.baseURL}/${e}/restore`);return this.handleResponse(s)}catch(s){return this.handleError(s)}}async getUserRoles(){try{const e=await a["default"].get(`${this.baseURL}/roles`);return this.handleResponse(e)}catch(e){return this.handleError(e)}}handleResponse(e){if(e.data.success)return{success:!0,data:e.data.data,message:e.data.message,pagination:e.data.pagination};throw new Error(e.data.message||"Operation failed")}handleError(e){console.error("User Management Service Error:",e);let s="An unexpected error occurred",t=[],a=0;if(e.response){a=e.response.status;const r=e.response.data;switch(r.message&&(s=r.message),r.errors&&(t=Array.isArray(r.errors)?r.errors:[r.errors]),a){case 401:s="Authentication required. Please log in again.";break;case 403:s="You do not have permission to perform this action.";break;case 404:s="User not found.";break;case 422:s="Validation failed. Please check your input.";break;case 429:s="Too many requests. Please try again later.";break;case 500:s="Server error. Please try again later.";break}}else e.request&&(s="Network error. Please check your connection.");return{success:!1,message:s,errors:t,status:a}}validateUserData(e,s=!1){const t=[];if(s&&!e.username||(!e.username||e.username.length<3)&&t.push("Username must be at least 3 characters long"),!s||e.email){const s=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;e.email&&s.test(e.email)||t.push("Please provide a valid email address")}return s&&!e.password||(!e.password||e.password.length<6)&&t.push("Password must be at least 6 characters long"),s&&!e.first_name||(!e.first_name||e.first_name.trim().length<2)&&t.push("First name must be at least 2 characters long"),s&&!e.last_name||(!e.last_name||e.last_name.trim().length<2)&&t.push("Last name must be at least 2 characters long"),{isValid:0===t.length,errors:t}}formatUserData(e){return{...e,full_name:`${e.first_name||""} ${e.last_name||""}`.trim(),status_label:this.getStatusLabel(e.status),type_label:this.getTypeLabel(e.type||e.role),created_at_formatted:this.formatDate(e.created_at),last_login_formatted:e.last_login?this.formatDate(e.last_login):"Never"}}getStatusLabel(e){const s={active:"Active",inactive:"Inactive",pending:"Pending Verification",suspended:"Suspended",pending_verification:"Pending Verification"};return s[e]||e}getTypeLabel(e){const s={admin:"Administrator",employee:"Employee",client:"Client",user:"User"};return s[e]||e}formatDate(e){if(!e)return"";const s=new Date(e);return s.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}}s.A=new r},5245:function(e,s,t){t.r(s),t.d(s,{default:function(){return ns}});var a=t(6768),r=t(4232),i=t(5130);const l={class:"admin-archive"},n={class:"dashboard-container"},o={class:"container-fluid px-4"},c={class:"row"},d={class:"col-12"},u={class:"card shadow"},h={class:"card-header py-3 d-flex justify-content-between align-items-center"},m={class:"d-flex gap-2 align-items-center"},g={class:"input-group",style:{width:"300px"}},v={class:"d-flex align-items-center gap-2"},p={class:"card-body"},f={key:0,class:"row mb-3"},k={class:"col-md-6"},L={class:"text-muted mb-0"},y={key:0},b={key:1,class:"text-center py-4"},w={key:2,class:"text-center py-5"},U={class:"text-muted"},_={class:"text-muted"},x={key:3,class:"table-responsive"},D={class:"table table-bordered table-hover"},C={class:"d-flex align-items-center"},P={class:"user-avatar me-3"},E={class:"avatar-placeholder rounded-circle bg-light d-flex align-items-center justify-content-center",style:{width:"40px",height:"40px"}},A={class:"fw-bold"},R={class:"text-muted small"},$={class:"text-muted small"},S={class:"text-muted small"},N={class:"text-center"},M={class:"btn-group btn-group-sm"},Q=["onClick"],j=["onClick"],X={key:4,class:"d-flex justify-content-between align-items-center mt-3"},T={class:"text-muted small"},W={key:0},F={class:"pagination pagination-sm mb-0"},I=["disabled"],V=["onClick"],q=["disabled"],B={class:"modal fade",id:"viewUserModal",tabindex:"-1","aria-labelledby":"viewUserModalLabel","aria-hidden":"true"},O={class:"modal-dialog modal-dialog-centered modal-lg"},H={class:"modal-content"},K={class:"modal-body p-4"},Y={key:0,class:"container-fluid"},G={class:"row align-items-center mb-4"},J={class:"col-auto"},z={class:"avatar-placeholder-large rounded-circle bg-light d-flex align-items-center justify-content-center",style:{width:"80px",height:"80px"}},Z={class:"col"},ee={class:"mb-0"},se={class:"text-muted mb-0"},te={class:"mt-2"},ae={class:"row"},re={class:"col-md-6 mb-4"},ie={class:"card h-100"},le={class:"card-body"},ne={class:"list-group list-group-flush"},oe={class:"list-group-item d-flex justify-content-between align-items-center"},ce={class:"value-text"},de={key:0,class:"list-group-item d-flex justify-content-between align-items-center"},ue={class:"value-text"},he={key:1,class:"list-group-item d-flex justify-content-between align-items-center"},me={class:"value-text"},ge={key:2,class:"list-group-item d-flex justify-content-between align-items-center"},ve={class:"value-text"},pe={key:3,class:"list-group-item d-flex justify-content-between align-items-center"},fe={class:"value-text"},ke={key:4,class:"list-group-item d-flex justify-content-between align-items-center"},Le={class:"value-text"},ye={key:5,class:"list-group-item d-flex justify-content-between align-items-center"},be={class:"value-text"},we={key:6,class:"list-group-item d-flex justify-content-between align-items-center"},Ue={class:"value-text"},_e={key:7,class:"list-group-item d-flex justify-content-between align-items-center"},xe={class:"value-text"},De={class:"col-md-6 mb-4"},Ce={class:"card h-100"},Pe={class:"card-body"},Ee={class:"list-group list-group-flush"},Ae={class:"list-group-item d-flex justify-content-between align-items-center"},Re={class:"value-text"},$e={class:"list-group-item d-flex justify-content-between align-items-center"},Se={class:"value-text"},Ne={key:0,class:"list-group-item d-flex justify-content-between align-items-start"},Me={class:"value-text text-end"},Qe={key:1,class:"list-group-item d-flex justify-content-between align-items-center"},je={class:"value-text"},Xe={class:"card"},Te={class:"card-body"},We={class:"list-group list-group-flush"},Fe={class:"list-group-item d-flex justify-content-between align-items-center"},Ie={class:"value-text"},Ve={class:"list-group-item d-flex justify-content-between align-items-center"},qe={class:"value-text"},Be={key:0,class:"list-group-item d-flex justify-content-between align-items-center"},Oe={class:"value-text"},He={key:1,class:"list-group-item d-flex justify-content-between align-items-center"},Ke={class:"value-text"},Ye={class:"list-group-item d-flex justify-content-between align-items-center"},Ge={class:"value-text"},Je={key:1,class:"text-center"},ze={class:"modal-footer"};function Ze(e,s,t,Ze,es,ss){const ts=(0,a.g2)("AdminHeader"),as=(0,a.g2)("AdminSidebar");return(0,a.uX)(),(0,a.CE)("div",l,[(0,a.bF)(ts,{userName:es.adminData?.first_name||"Admin",showUserDropdown:es.showUserDropdown,sidebarCollapsed:es.sidebarCollapsed,activeMenu:es.activeMenu,onSidebarToggle:ss.handleSidebarToggle,onUserDropdownToggle:ss.handleUserDropdownToggle,onMenuAction:ss.handleMenuAction,onLogout:ss.handleLogout},null,8,["userName","showUserDropdown","sidebarCollapsed","activeMenu","onSidebarToggle","onUserDropdownToggle","onMenuAction","onLogout"]),(0,a.Lk)("div",{class:(0,r.C4)(["mobile-overlay",{active:!es.sidebarCollapsed&&e.isMobile}]),onClick:s[0]||(s[0]=(...s)=>e.closeMobileSidebar&&e.closeMobileSidebar(...s))},null,2),(0,a.Lk)("div",n,[(0,a.bF)(as,{collapsed:es.sidebarCollapsed,activeMenu:es.activeMenu,onMenuChange:e.handleMenuChange,onLogout:ss.handleLogout,onToggleSidebar:ss.handleSidebarToggle},null,8,["collapsed","activeMenu","onMenuChange","onLogout","onToggleSidebar"]),(0,a.Lk)("main",{class:(0,r.C4)(["main-content",{"sidebar-collapsed":es.sidebarCollapsed}])},[(0,a.Lk)("div",o,[(0,a.Lk)("div",c,[(0,a.Lk)("div",d,[(0,a.Lk)("div",u,[(0,a.Lk)("div",h,[s[11]||(s[11]=(0,a.Lk)("h6",{class:"m-0 font-weight-bold text-primary"},[(0,a.Lk)("i",{class:"fas fa-archive me-2"}),(0,a.eW)(" Archived Users ")],-1)),(0,a.Lk)("div",m,[(0,a.Lk)("div",g,[s[7]||(s[7]=(0,a.Lk)("span",{class:"input-group-text"},[(0,a.Lk)("i",{class:"fas fa-search"})],-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control",placeholder:"Search archived users...","onUpdate:modelValue":s[1]||(s[1]=e=>es.searchQuery=e)},null,512),[[i.Jo,es.searchQuery]])]),(0,a.Lk)("div",v,[s[9]||(s[9]=(0,a.Lk)("label",{class:"form-label mb-0 text-muted small"},"Show:",-1)),(0,a.bo)((0,a.Lk)("select",{class:"form-select form-select-sm","onUpdate:modelValue":s[2]||(s[2]=e=>es.itemsPerPage=e),style:{width:"auto"}},s[8]||(s[8]=[(0,a.Lk)("option",{value:"5"},"5",-1),(0,a.Lk)("option",{value:"10"},"10",-1),(0,a.Lk)("option",{value:"25"},"25",-1),(0,a.Lk)("option",{value:"50"},"50",-1)]),512),[[i.u1,es.itemsPerPage]]),s[10]||(s[10]=(0,a.Lk)("span",{class:"text-muted small"},"entries",-1))])])]),(0,a.Lk)("div",p,[!es.loading&&es.archivedUsers.length>0?((0,a.uX)(),(0,a.CE)("div",f,[(0,a.Lk)("div",k,[(0,a.Lk)("p",L,[(0,a.eW)(" Showing "+(0,r.v_)((es.currentPage-1)*es.itemsPerPage+1)+" to "+(0,r.v_)(Math.min(es.currentPage*es.itemsPerPage,ss.filteredUsers.length))+" of "+(0,r.v_)(ss.filteredUsers.length)+" archived users ",1),es.searchQuery?((0,a.uX)(),(0,a.CE)("span",y,"(filtered from "+(0,r.v_)(es.archivedUsers.length)+" total)",1)):(0,a.Q3)("",!0)])]),s[12]||(s[12]=(0,a.Lk)("div",{class:"col-md-6 text-end"},[(0,a.Lk)("small",{class:"text-muted"},[(0,a.Lk)("i",{class:"fas fa-info-circle me-1"}),(0,a.eW)(" Archived users can be restored to active status ")])],-1))])):(0,a.Q3)("",!0),es.loading?((0,a.uX)(),(0,a.CE)("div",b,s[13]||(s[13]=[(0,a.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,a.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,a.Lk)("p",{class:"mt-2 text-muted"},"Loading archived users...",-1)]))):es.loading||0!==ss.filteredUsers.length?((0,a.uX)(),(0,a.CE)("div",x,[(0,a.Lk)("table",D,[s[22]||(s[22]=(0,a.Lk)("thead",{class:"table-light"},[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"User Information"),(0,a.Lk)("th",null,"Account Type"),(0,a.Lk)("th",null,"Status"),(0,a.Lk)("th",null,"Archived Date"),(0,a.Lk)("th",{class:"text-center"},"Actions")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(ss.paginatedUsers,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id},[(0,a.Lk)("td",null,[(0,a.Lk)("div",C,[(0,a.Lk)("div",P,[(0,a.Lk)("div",E,[(0,a.Lk)("i",{class:(0,r.C4)("admin"===e.type?"fas fa-user-shield text-primary":"fas fa-user text-info")},null,2)])]),(0,a.Lk)("div",null,[(0,a.Lk)("div",A,(0,r.v_)(e.full_name||"No Name"),1),(0,a.Lk)("div",R,[s[16]||(s[16]=(0,a.Lk)("i",{class:"fas fa-envelope me-1"},null,-1)),(0,a.eW)((0,r.v_)(e.email||"No email"),1)]),(0,a.Lk)("div",$,[s[17]||(s[17]=(0,a.Lk)("i",{class:"fas fa-at me-1"},null,-1)),(0,a.eW)((0,r.v_)(e.username),1)])])])]),(0,a.Lk)("td",null,[(0,a.Lk)("span",{class:(0,r.C4)(["badge","admin"===e.type?"bg-primary":"bg-info"])},[(0,a.Lk)("i",{class:(0,r.C4)("admin"===e.type?"fas fa-user-shield me-1":"fas fa-user me-1")},null,2),(0,a.eW)(" "+(0,r.v_)("admin"===e.type?"Administrator":"Client"),1)],2)]),s[21]||(s[21]=(0,a.Lk)("td",null,[(0,a.Lk)("span",{class:"badge bg-secondary"},[(0,a.Lk)("i",{class:"fas fa-archive me-1"}),(0,a.eW)(" Archived ")])],-1)),(0,a.Lk)("td",null,[(0,a.Lk)("div",S,[s[18]||(s[18]=(0,a.Lk)("i",{class:"fas fa-calendar me-1"},null,-1)),(0,a.eW)(" "+(0,r.v_)(ss.formatDate(e.updated_at)),1)])]),(0,a.Lk)("td",N,[(0,a.Lk)("div",M,[(0,a.Lk)("button",{class:"btn btn-outline-info",onClick:s=>ss.viewUser(e),title:"View Details"},s[19]||(s[19]=[(0,a.Lk)("i",{class:"fas fa-eye"},null,-1)]),8,Q),(0,a.Lk)("button",{class:"btn btn-outline-success",onClick:s=>ss.restoreUser(e),title:"Restore User"},s[20]||(s[20]=[(0,a.Lk)("i",{class:"fas fa-undo"},null,-1)]),8,j)])])])))),128))])])])):((0,a.uX)(),(0,a.CE)("div",w,[s[15]||(s[15]=(0,a.Lk)("i",{class:"fas fa-archive fa-3x text-muted mb-3"},null,-1)),(0,a.Lk)("h5",U,(0,r.v_)(es.searchQuery?"No Matching Archived Users":"No Archived Users"),1),(0,a.Lk)("p",_,(0,r.v_)(es.searchQuery?`No archived users match your search for "${es.searchQuery}". Try adjusting your search terms.`:"There are no archived users to display. Users will appear here when they are deleted from the system."),1),es.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,class:"btn btn-outline-primary btn-sm",onClick:s[3]||(s[3]=e=>es.searchQuery="")},s[14]||(s[14]=[(0,a.Lk)("i",{class:"fas fa-times me-1"},null,-1),(0,a.eW)(" Clear Search ")]))):(0,a.Q3)("",!0)])),ss.filteredUsers.length>0?((0,a.uX)(),(0,a.CE)("div",X,[(0,a.Lk)("div",T,[s[23]||(s[23]=(0,a.Lk)("i",{class:"fas fa-info-circle me-1"},null,-1)),(0,a.eW)(" Page "+(0,r.v_)(es.currentPage)+" of "+(0,r.v_)(ss.totalPages)+" ("+(0,r.v_)((es.currentPage-1)*es.itemsPerPage+1)+" to "+(0,r.v_)(Math.min(es.currentPage*es.itemsPerPage,ss.filteredUsers.length))+" of "+(0,r.v_)(ss.filteredUsers.length)+" entries) ",1)]),ss.totalPages>1?((0,a.uX)(),(0,a.CE)("nav",W,[(0,a.Lk)("ul",F,[(0,a.Lk)("li",{class:(0,r.C4)(["page-item",{disabled:1===es.currentPage}])},[(0,a.Lk)("button",{class:"page-link",onClick:s[4]||(s[4]=e=>ss.changePage(es.currentPage-1)),disabled:1===es.currentPage},s[24]||(s[24]=[(0,a.Lk)("i",{class:"fas fa-chevron-left"},null,-1),(0,a.eW)(" Previous ")]),8,I)],2),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(ss.visiblePages,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e,class:(0,r.C4)(["page-item",{active:e===es.currentPage}])},[(0,a.Lk)("button",{class:"page-link",onClick:s=>ss.changePage(e)},(0,r.v_)(e),9,V)],2)))),128)),(0,a.Lk)("li",{class:(0,r.C4)(["page-item",{disabled:es.currentPage===ss.totalPages}])},[(0,a.Lk)("button",{class:"page-link",onClick:s[5]||(s[5]=e=>ss.changePage(es.currentPage+1)),disabled:es.currentPage===ss.totalPages},s[25]||(s[25]=[(0,a.eW)(" Next "),(0,a.Lk)("i",{class:"fas fa-chevron-right"},null,-1)]),8,q)],2)])])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)])])])])])],2)]),(0,a.Lk)("div",B,[(0,a.Lk)("div",O,[(0,a.Lk)("div",H,[s[51]||(s[51]=(0,a.Lk)("div",{class:"modal-header bg-light"},[(0,a.Lk)("h5",{class:"modal-title",id:"viewUserModalLabel"},[(0,a.Lk)("i",{class:"fas fa-user-circle me-2"}),(0,a.eW)(" Archived User Details ")]),(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),(0,a.Lk)("div",K,[es.viewUserData?((0,a.uX)(),(0,a.CE)("div",Y,[(0,a.Lk)("div",G,[(0,a.Lk)("div",J,[(0,a.Lk)("div",z,[(0,a.Lk)("i",{class:(0,r.C4)("admin"===es.viewUserData.type?"fas fa-user-shield fa-3x text-primary":"fas fa-user fa-3x text-info")},null,2)])]),(0,a.Lk)("div",Z,[(0,a.Lk)("h4",ee,(0,r.v_)(es.viewUserData.full_name||"No Name"),1),(0,a.Lk)("p",se,"@"+(0,r.v_)(es.viewUserData.username),1),(0,a.Lk)("div",te,[(0,a.Lk)("span",{class:(0,r.C4)(["badge","admin"===es.viewUserData.type?"bg-primary":"bg-info"])},[(0,a.Lk)("i",{class:(0,r.C4)("admin"===es.viewUserData.type?"fas fa-user-shield me-1":"fas fa-user me-1")},null,2),(0,a.eW)(" "+(0,r.v_)("admin"===es.viewUserData.type?"Administrator":"Client"),1)],2),s[26]||(s[26]=(0,a.Lk)("span",{class:"badge bg-secondary ms-2"},[(0,a.Lk)("i",{class:"fas fa-archive me-1"}),(0,a.eW)(" Archived ")],-1))])])]),(0,a.Lk)("div",ae,[(0,a.Lk)("div",re,[(0,a.Lk)("div",ie,[s[36]||(s[36]=(0,a.Lk)("div",{class:"card-header"},[(0,a.Lk)("h6",{class:"mb-0"},[(0,a.Lk)("i",{class:"fas fa-id-card me-2"}),(0,a.eW)(" Personal Information ")])],-1)),(0,a.Lk)("div",le,[(0,a.Lk)("ul",ne,[(0,a.Lk)("li",oe,[s[27]||(s[27]=(0,a.Lk)("strong",null,"Full Name:",-1)),(0,a.Lk)("span",ce,(0,r.v_)(es.viewUserData.full_name||"Not provided"),1)]),"client"===es.viewUserData.type?((0,a.uX)(),(0,a.CE)("li",de,[s[28]||(s[28]=(0,a.Lk)("strong",null,"Gender:",-1)),(0,a.Lk)("span",ue,(0,r.v_)(es.viewUserData.gender?es.viewUserData.gender.charAt(0).toUpperCase()+es.viewUserData.gender.slice(1):"Not specified"),1)])):(0,a.Q3)("",!0),"client"===es.viewUserData.type?((0,a.uX)(),(0,a.CE)("li",he,[s[29]||(s[29]=(0,a.Lk)("strong",null,"Birth Date:",-1)),(0,a.Lk)("span",me,(0,r.v_)(es.viewUserData.birth_date?ss.formatDate(es.viewUserData.birth_date):"Not provided"),1)])):(0,a.Q3)("",!0),"client"===es.viewUserData.type?((0,a.uX)(),(0,a.CE)("li",ge,[s[30]||(s[30]=(0,a.Lk)("strong",null,"Civil Status:",-1)),(0,a.Lk)("span",ve,(0,r.v_)(ss.getCivilStatusLabel(es.viewUserData.civil_status_id)),1)])):(0,a.Q3)("",!0),"client"===es.viewUserData.type?((0,a.uX)(),(0,a.CE)("li",pe,[s[31]||(s[31]=(0,a.Lk)("strong",null,"Nationality:",-1)),(0,a.Lk)("span",fe,(0,r.v_)(es.viewUserData.nationality||"Not provided"),1)])):(0,a.Q3)("",!0),"admin"===es.viewUserData.type?((0,a.uX)(),(0,a.CE)("li",ke,[s[32]||(s[32]=(0,a.Lk)("strong",null,"Employee ID:",-1)),(0,a.Lk)("span",Le,(0,r.v_)(es.viewUserData.employee_id||"Not provided"),1)])):(0,a.Q3)("",!0),"admin"===es.viewUserData.type?((0,a.uX)(),(0,a.CE)("li",ye,[s[33]||(s[33]=(0,a.Lk)("strong",null,"Position:",-1)),(0,a.Lk)("span",be,(0,r.v_)(es.viewUserData.position||"Not provided"),1)])):(0,a.Q3)("",!0),"admin"===es.viewUserData.type?((0,a.uX)(),(0,a.CE)("li",we,[s[34]||(s[34]=(0,a.Lk)("strong",null,"Department:",-1)),(0,a.Lk)("span",Ue,(0,r.v_)(es.viewUserData.department||"Not provided"),1)])):(0,a.Q3)("",!0),"admin"===es.viewUserData.type?((0,a.uX)(),(0,a.CE)("li",_e,[s[35]||(s[35]=(0,a.Lk)("strong",null,"Hire Date:",-1)),(0,a.Lk)("span",xe,(0,r.v_)(es.viewUserData.hire_date?ss.formatDate(es.viewUserData.hire_date):"Not provided"),1)])):(0,a.Q3)("",!0)])])])]),(0,a.Lk)("div",De,[(0,a.Lk)("div",Ce,[s[41]||(s[41]=(0,a.Lk)("div",{class:"card-header"},[(0,a.Lk)("h6",{class:"mb-0"},[(0,a.Lk)("i",{class:"fas fa-address-book me-2"}),(0,a.eW)(" Contact Information ")])],-1)),(0,a.Lk)("div",Pe,[(0,a.Lk)("ul",Ee,[(0,a.Lk)("li",Ae,[s[37]||(s[37]=(0,a.Lk)("strong",null,"Email:",-1)),(0,a.Lk)("span",Re,(0,r.v_)(es.viewUserData.email||"Not provided"),1)]),(0,a.Lk)("li",$e,[s[38]||(s[38]=(0,a.Lk)("strong",null,"Phone:",-1)),(0,a.Lk)("span",Se,(0,r.v_)(es.viewUserData.phone_number||"Not provided"),1)]),"client"===es.viewUserData.type?((0,a.uX)(),(0,a.CE)("li",Ne,[s[39]||(s[39]=(0,a.Lk)("strong",null,"Address:",-1)),(0,a.Lk)("span",Me,(0,r.v_)(ss.getFullAddress(es.viewUserData)),1)])):(0,a.Q3)("",!0),"client"===es.viewUserData.type?((0,a.uX)(),(0,a.CE)("li",Qe,[s[40]||(s[40]=(0,a.Lk)("strong",null,"Years of Residency:",-1)),(0,a.Lk)("span",je,(0,r.v_)(ss.getResidencyDuration(es.viewUserData)),1)])):(0,a.Q3)("",!0)])])])])]),(0,a.Lk)("div",Xe,[s[47]||(s[47]=(0,a.Lk)("div",{class:"card-header"},[(0,a.Lk)("h6",{class:"mb-0"},[(0,a.Lk)("i",{class:"fas fa-cogs me-2"}),(0,a.eW)(" Account Status ")])],-1)),(0,a.Lk)("div",Te,[(0,a.Lk)("ul",We,[(0,a.Lk)("li",Fe,[s[42]||(s[42]=(0,a.Lk)("strong",null,"Account Created:",-1)),(0,a.Lk)("span",Ie,(0,r.v_)(ss.formatDate(es.viewUserData.created_at)),1)]),(0,a.Lk)("li",Ve,[s[43]||(s[43]=(0,a.Lk)("strong",null,"Last Updated:",-1)),(0,a.Lk)("span",qe,(0,r.v_)(ss.formatDate(es.viewUserData.updated_at)),1)]),es.viewUserData.last_login?((0,a.uX)(),(0,a.CE)("li",Be,[s[44]||(s[44]=(0,a.Lk)("strong",null,"Last Login:",-1)),(0,a.Lk)("span",Oe,(0,r.v_)(ss.formatDate(es.viewUserData.last_login)),1)])):(0,a.Q3)("",!0),es.viewUserData.password_changed_at?((0,a.uX)(),(0,a.CE)("li",He,[s[45]||(s[45]=(0,a.Lk)("strong",null,"Password Changed:",-1)),(0,a.Lk)("span",Ke,(0,r.v_)(ss.formatDate(es.viewUserData.password_changed_at)),1)])):(0,a.Q3)("",!0),(0,a.Lk)("li",Ye,[s[46]||(s[46]=(0,a.Lk)("strong",null,"Archived Date:",-1)),(0,a.Lk)("span",Ge,(0,r.v_)(ss.formatDate(es.viewUserData.updated_at)),1)])])])])])):((0,a.uX)(),(0,a.CE)("div",Je,s[48]||(s[48]=[(0,a.Lk)("p",null,"No user data to display.",-1)])))]),(0,a.Lk)("div",ze,[s[50]||(s[50]=(0,a.Lk)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},[(0,a.Lk)("i",{class:"fas fa-times me-1"}),(0,a.eW)(" Close ")],-1)),(0,a.Lk)("button",{type:"button",class:"btn btn-success",onClick:s[6]||(s[6]=e=>ss.restoreUser(es.viewUserData))},s[49]||(s[49]=[(0,a.Lk)("i",{class:"fas fa-undo me-1"},null,-1),(0,a.eW)(" Restore User ")]))])])])])])}t(4114),t(8111),t(2489),t(1701);var es=t(3237),ss=t(2944),ts=t(3911),as=t(8077),rs={name:"AdminArchive",components:{AdminHeader:es.A,AdminSidebar:ss.A},data(){return{sidebarCollapsed:!1,showUserDropdown:!1,activeMenu:"archive",loading:!1,archivedUsers:[],viewUserData:null,searchQuery:"",currentPage:1,itemsPerPage:10,adminData:null}},computed:{filteredUsers(){let e=[...this.archivedUsers];if(this.searchQuery){const s=this.searchQuery.toLowerCase();e=e.filter((e=>e.full_name?.toLowerCase().includes(s)||e.email?.toLowerCase().includes(s)||e.username?.toLowerCase().includes(s)||e.type?.toLowerCase().includes(s)))}return e},paginatedUsers(){const e=(this.currentPage-1)*this.itemsPerPage,s=e+this.itemsPerPage;return this.filteredUsers.slice(e,s)},totalPages(){return Math.ceil(this.filteredUsers.length/this.itemsPerPage)},visiblePages(){const e=[],s=Math.max(1,this.currentPage-2),t=Math.min(this.totalPages,this.currentPage+2);for(let a=s;a<=t;a++)e.push(a);return e}},watch:{searchQuery(){this.currentPage=1},itemsPerPage(){this.currentPage=1}},async mounted(){await this.loadArchivedUsers()},methods:{async loadArchivedUsers(){try{this.loading=!0;const e=await ts.A.getArchivedUsers(1,100,this.searchQuery);e.success?this.archivedUsers=e.data.map((e=>({...e,full_name:`${e.first_name||""} ${e.last_name||""}`.trim()}))):this.showToast("error",e.message||"Failed to load archived users")}catch(e){console.error("Error loading archived users:",e),this.showToast("error","Failed to load archived users")}finally{this.loading=!1}},async viewUser(e){try{const s=await ts.A.getUser(e.id);if(!s.success)throw new Error(s.message||"Failed to load user details");{this.viewUserData=ts.A.formatUserData(s.data);const e=new as.aF(document.getElementById("viewUserModal"));e.show()}}catch(s){console.error("Error viewing user:",s);const e=s.response?.data?.message||s.message||"Failed to load user details";this.showToast("error",e)}},async restoreUser(e){if(confirm(`Are you sure you want to restore ${e.full_name}?`))try{const s=await ts.A.restoreUser(e.id);if(s.success){this.showToast("success",`${e.full_name} has been restored successfully`),this.archivedUsers=this.archivedUsers.filter((s=>s.id!==e.id));const s=as.aF.getInstance(document.getElementById("viewUserModal"));s&&s.hide()}else this.showToast("error",s.message||"Failed to restore user")}catch(s){console.error("Error restoring user:",s),this.showToast("error","Failed to restore user")}},changePage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},handleSidebarToggle(){this.sidebarCollapsed=!this.sidebarCollapsed},handleUserDropdownToggle(){this.showUserDropdown=!this.showUserDropdown},handleMenuAction(e){if("archive"===e)return;const s={dashboard:"/admin/dashboard",users:"/admin/users",requests:"/admin/requests"};s[e]&&this.$router.push(s[e])},handleLogout(){this.$router.push("/admin/login")},formatDate(e){if(!e)return"";const s=new Date(e);return s.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},showToast(e,s){"success"===e?alert(`✅ ${s}`):"error"===e?alert(`❌ ${s}`):alert(`ℹ️ ${s}`)},getCivilStatusLabel(e){const s={1:"Single",2:"Married",3:"Widowed",4:"Divorced",5:"Separated"};return s[e]||"Not specified"},getFullAddress(e){if(!e)return"Not provided";const s=[e.house_number,e.street,e.subdivision,e.barangay,e.city_municipality,e.province].filter((e=>e&&""!==e.trim()));return s.length>0?s.join(", "):"Not provided"},getResidencyDuration(e){if(!e)return"Not provided";const s=e.years_of_residency||0,t=e.months_of_residency||0;if(0===s&&0===t)return"Not provided";const a=[];return s>0&&a.push(`${s} year${1!==s?"s":""}`),t>0&&a.push(`${t} month${1!==t?"s":""}`),a.join(", ")}}},is=t(1241);const ls=(0,is.A)(rs,[["render",Ze],["__scopeId","data-v-3913af95"]]);var ns=ls}}]);